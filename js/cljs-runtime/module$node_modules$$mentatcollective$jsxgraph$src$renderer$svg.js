shadow$provide.module$node_modules$$mentatcollective$jsxgraph$src$renderer$svg=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _jxg=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$jxg")),_options=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$options"));global=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$renderer$abstract"));
var _constants=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$base$constants")),_type=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$utils$type")),_color=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$utils$color")),_base=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$utils$base64")),_numerics=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$math$numerics"));
_jxg.default.SVGRenderer=function(container,dim){this.type="svg";this.isIE=-1!==navigator.appVersion.indexOf("MSIE")||navigator.userAgent.match(/Trident\//);this.svgRoot=null;this.svgNamespace="http://www.w3.org/2000/svg";this.xlinkNamespace="http://www.w3.org/1999/xlink";this.container=container;this.container.style.MozUserSelect="none";this.container.style.userSelect="none";this.container.style.overflow="hidden";""===this.container.style.position&&(this.container.style.position="relative");this.svgRoot=
this.container.ownerDocument.createElementNS(this.svgNamespace,"svg");this.svgRoot.style.overflow="hidden";this.svgRoot.style.display="block";this.resize(dim.width,dim.height);this.container.appendChild(this.svgRoot);this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs");this.svgRoot.appendChild(this.defs);this.filter=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter");this.filter.setAttributeNS(null,"id",this.container.id+"_f1");this.filter.setAttributeNS(null,
"width","300%");this.filter.setAttributeNS(null,"height","300%");this.filter.setAttributeNS(null,"filterUnits","userSpaceOnUse");this.feOffset=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset");this.feOffset.setAttributeNS(null,"in","SourceAlpha");this.feOffset.setAttributeNS(null,"result","offOut");this.feOffset.setAttributeNS(null,"dx","5");this.feOffset.setAttributeNS(null,"dy","5");this.filter.appendChild(this.feOffset);this.feGaussianBlur=this.container.ownerDocument.createElementNS(this.svgNamespace,
"feGaussianBlur");this.feGaussianBlur.setAttributeNS(null,"in","offOut");this.feGaussianBlur.setAttributeNS(null,"result","blurOut");this.feGaussianBlur.setAttributeNS(null,"stdDeviation","3");this.filter.appendChild(this.feGaussianBlur);this.feBlend=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend");this.feBlend.setAttributeNS(null,"in","SourceGraphic");this.feBlend.setAttributeNS(null,"in2","blurOut");this.feBlend.setAttributeNS(null,"mode","normal");this.filter.appendChild(this.feBlend);
this.defs.appendChild(this.filter);this.layer=[];for(container=0;container<_options.default.layer.numlayers;container++)this.layer[container]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[container]);if(this.supportsForeignObject=document.implementation.hasFeature("http://w3.org/TR/SVG11/feature#Extensibility","1.1"))this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display",
"none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.container.id+"_foreignObj"),this.svgRoot.appendChild(this.foreignObjLayer);this.dashArray="2, 2;5, 5;10, 10;20, 20;20, 10, 10, 10;20, 5, 10, 5".split(";")};_jxg.default.SVGRenderer.prototype=new global.default;_jxg.default.extend(_jxg.default.SVGRenderer.prototype,{_createArrowHead:function(el,
idAppendix,type){var node2=el.id+"Triangle";_type.default.exists(idAppendix)&&(node2+=idAppendix);node2=this.createPrim("marker",node2);node2.setAttributeNS(null,"stroke",_type.default.evaluate(el.visProp.strokecolor));node2.setAttributeNS(null,"stroke-opacity",_type.default.evaluate(el.visProp.strokeopacity));node2.setAttributeNS(null,"fill",_type.default.evaluate(el.visProp.strokecolor));node2.setAttributeNS(null,"fill-opacity",_type.default.evaluate(el.visProp.strokeopacity));node2.setAttributeNS(null,
"stroke-width",0);node2.setAttributeNS(null,"orient","auto");node2.setAttributeNS(null,"markerUnits","strokeWidth");var node3=this.container.ownerDocument.createElementNS(this.svgNamespace,"path");var h=5;"End"===idAppendix?(idAppendix=0,2===type?node3.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):3===type?node3.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):4===type?(h=3.31,node3.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):
5===type?(h=3.28,node3.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):6===type?(h=2.84,node3.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):7===type?(h=5.2,node3.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):
node3.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),el.elementClass===_constants.default.OBJECT_CLASS_LINE&&(idAppendix=2===type?4.9:3===type?3.3:4===type||5===type||6===type?6.66:7===type?0:10)):(idAppendix=10,2===type?node3.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):3===type?(idAppendix=3.3,node3.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):4===type?(h=3.31,node3.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):
5===type?(h=3.28,node3.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):6===type?(h=2.84,node3.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):7===type?(h=5.2,node3.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):
node3.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),el.elementClass===_constants.default.OBJECT_CLASS_LINE&&(idAppendix=2===type?5.1:3===type?.02:4===type||5===type||6===type?3.33:7===type?10:.05));7===type&&(node2.setAttributeNS(null,"fill","none"),node2.setAttributeNS(null,"stroke-width",1));node2.setAttributeNS(null,"refY",h);node2.setAttributeNS(null,"refX",idAppendix);node2.appendChild(node3);return node2},_setArrowColor:function(node,color,opacity,el,type){node&&(_type.default.isString(color)&&
(7!==type?this._setAttribute(function(){node.setAttributeNS(null,"stroke",color);node.setAttributeNS(null,"fill",color);node.setAttributeNS(null,"stroke-opacity",opacity);node.setAttributeNS(null,"fill-opacity",opacity)},el.visPropOld.fillcolor):this._setAttribute(function(){node.setAttributeNS(null,"fill","none");node.setAttributeNS(null,"stroke",color);node.setAttributeNS(null,"stroke-opacity",opacity)},el.visPropOld.fillcolor)),this.isIE&&el.rendNode.parentNode.insertBefore(el.rendNode,el.rendNode))},
_setArrowWidth:function(node,width,parentNode,size){node&&(size*=width,node.setAttributeNS(null,"viewBox","0 0 "+10*width+" "+10*width),node.setAttributeNS(null,"markerHeight",size),node.setAttributeNS(null,"markerWidth",size),node.setAttributeNS(null,"display","inherit"),this.isIE&&parentNode.parentNode.insertBefore(parentNode,parentNode))},updateTicks:function(ticks){var i,tickStr="",len=ticks.ticks.length,isReal=!0;for(i=0;i<len;i++){var j=ticks.ticks[i];var x=j[0];var y=j[1];var len2=x.length;
var str=" M "+x[0]+" "+y[0];_type.default.isNumber(x[0])||(isReal=!1);for(j=1;isReal&&j<len2;++j)_type.default.isNumber(x[j])?str+=" L "+x[j]+" "+y[j]:isReal=!1;isReal&&(tickStr+=str)}i=ticks.rendNode;_type.default.exists(i)||(i=this.createPrim("path",ticks.id),this.appendChildPrim(i,_type.default.evaluate(ticks.visProp.layer)),ticks.rendNode=i);i.setAttributeNS(null,"stroke",_type.default.evaluate(ticks.visProp.strokecolor));i.setAttributeNS(null,"fill","none");i.setAttributeNS(null,"stroke-opacity",
_type.default.evaluate(ticks.visProp.strokeopacity));i.setAttributeNS(null,"stroke-width",_type.default.evaluate(ticks.visProp.strokewidth));this.updatePathPrim(i,tickStr,ticks.board)},displayCopyright:function(str,fontsize){var node=this.createPrim("text","licenseText");node.setAttributeNS(null,"x","20px");node.setAttributeNS(null,"y",2+fontsize+"px");node.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+fontsize+"px; fill:#356AA0;  opacity:0.3;");str=this.container.ownerDocument.createTextNode(str);
node.appendChild(str);this.appendChildPrim(node,0)},drawInternalText:function(el){var node=this.createPrim("text",el.id);node.style.whiteSpace="nowrap";el.rendNodeText=this.container.ownerDocument.createTextNode("");node.appendChild(el.rendNodeText);this.appendChildPrim(node,_type.default.evaluate(el.visProp.layer));return node},updateInternalText:function(el){var content=el.plaintext,ev_ax=el.getAnchorX(),ev_ay=el.getAnchorY();el.rendNode.getAttributeNS(null,"class")!==el.visProp.cssclass&&(el.rendNode.setAttributeNS(null,
"class",_type.default.evaluate(el.visProp.cssclass)),el.needsSizeUpdate=!0);if(!isNaN(el.coords.scrCoords[1]+el.coords.scrCoords[2])){var v=el.coords.scrCoords[1];el.visPropOld.left!==ev_ax+v&&(el.rendNode.setAttributeNS(null,"x",v+"px"),"left"===ev_ax?el.rendNode.setAttributeNS(null,"text-anchor","start"):"right"===ev_ax?el.rendNode.setAttributeNS(null,"text-anchor","end"):"middle"===ev_ax&&el.rendNode.setAttributeNS(null,"text-anchor","middle"),el.visPropOld.left=ev_ax+v);v=el.coords.scrCoords[2];
el.visPropOld.top!==ev_ay+v&&(el.rendNode.setAttributeNS(null,"y",v+.5*this.vOffsetText+"px"),"bottom"===ev_ay?el.rendNode.setAttributeNS(null,"dominant-baseline","text-after-edge"):"top"===ev_ay?el.rendNode.setAttributeNS(null,"dy","1.6ex"):"middle"===ev_ay&&el.rendNode.setAttributeNS(null,"dy","0.6ex"),el.visPropOld.top=ev_ay+v)}el.htmlStr!==content&&(el.rendNodeText.data=content,el.htmlStr=content);this.transformImage(el,el.transformations)},updateInternalTextStyle:function(el,strokeColor,strokeOpacity,
duration){this.setObjectFillColor(el,strokeColor,strokeOpacity)},drawImage:function(el){var node=this.createPrim("image",el.id);node.setAttributeNS(null,"preserveAspectRatio","none");this.appendChildPrim(node,_type.default.evaluate(el.visProp.layer));el.rendNode=node;this.updateImage(el)},transformImage:function(el,t){var node=el.rendNode;0<t.length&&(el=this.joinTransforms(el,t),el=[el[1][1],el[2][1],el[1][2],el[2][2],el[1][0],el[2][0]].join(),node.setAttributeNS(null,"transform"," matrix("+el+") "))},
updateImageURL:function(el){var url=_type.default.evaluate(el.url);return el._src!==url?(el.imgIsLoaded=!1,el.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",url),el._src=url,!0):!1},updateImageStyle:function(el,doHighlight){doHighlight=_type.default.evaluate(doHighlight?el.visProp.highlightcssclass:el.visProp.cssclass);el.rendNode.setAttributeNS(null,"class",doHighlight)},drawForeignObject:function(el){el.rendNode=this.appendChildPrim(this.createPrim("foreignObject",el.id),_type.default.evaluate(el.visProp.layer));
this.appendNodesToElement(el,"foreignObject");this.updateForeignObject(el)},updateForeignObject:function(el){el.rendNode.style.overflow=el._useUserSize?"hidden":"visible";this.updateRectPrim(el.rendNode,el.coords.scrCoords[1],el.coords.scrCoords[2]-el.size[1],el.size[0],el.size[1]);el.rendNode.innerHTML=el.content;this._updateVisual(el,{stroke:!0,dash:!0},!0)},appendChildPrim:function(node,level){_type.default.exists(level)?level>=_options.default.layer.numlayers&&(level=_options.default.layer.numlayers-
1):level=0;this.layer[level].appendChild(node);return node},createPrim:function(type,id){var node=this.container.ownerDocument.createElementNS(this.svgNamespace,type);node.setAttributeNS(null,"id",this.container.id+"_"+id);node.style.position="absolute";"path"===type&&(node.setAttributeNS(null,"stroke-linecap","round"),node.setAttributeNS(null,"stroke-linejoin","round"),node.setAttributeNS(null,"fill-rule","evenodd"));return node},remove:function(shape){_type.default.exists(shape)&&_type.default.exists(shape.parentNode)&&
shape.parentNode.removeChild(shape)},setLayer:function(el,level){_type.default.exists(level)?level>=_options.default.layer.numlayers&&(level=_options.default.layer.numlayers-1):level=0;this.layer[level].appendChild(el.rendNode)},makeArrows:function(el,a){var ev_fa=a.evFirst,ev_la=a.evLast;if(el.visPropOld.firstarrow===ev_fa&&el.visPropOld.lastarrow===ev_la)this.isIE&&el.visPropCalc.visible&&(ev_fa||ev_la)&&el.rendNode.parentNode.insertBefore(el.rendNode,el.rendNode);else{if(ev_fa){var node2=el.rendNodeTriangleStart;
_type.default.exists(node2)?this.defs.appendChild(node2):(node2=this._createArrowHead(el,"End",a.typeFirst),this.defs.appendChild(node2),el.rendNodeTriangleStart=node2,el.rendNode.setAttributeNS(null,"marker-start","url(#"+this.container.id+"_"+el.id+"TriangleEnd)"))}else node2=el.rendNodeTriangleStart,_type.default.exists(node2)&&this.remove(node2);ev_la?(node2=el.rendNodeTriangleEnd,_type.default.exists(node2)?this.defs.appendChild(node2):(node2=this._createArrowHead(el,"Start",a.typeLast),this.defs.appendChild(node2),
el.rendNodeTriangleEnd=node2,el.rendNode.setAttributeNS(null,"marker-end","url(#"+this.container.id+"_"+el.id+"TriangleStart)"))):(node2=el.rendNodeTriangleEnd,_type.default.exists(node2)&&this.remove(node2));el.visPropOld.firstarrow=ev_fa;el.visPropOld.lastarrow=ev_la}},updateEllipsePrim:function(node,x,y,rx,ry){x=2E5>Math.abs(x)?x:2E5*x/Math.abs(x);y=2E5>Math.abs(y)?y:2E5*y/Math.abs(y);rx=2E5>Math.abs(rx)?rx:2E5*rx/Math.abs(rx);ry=2E5>Math.abs(ry)?ry:2E5*ry/Math.abs(ry);node.setAttributeNS(null,
"cx",x);node.setAttributeNS(null,"cy",y);node.setAttributeNS(null,"rx",Math.abs(rx));node.setAttributeNS(null,"ry",Math.abs(ry))},updateLinePrim:function(node,p1x,p1y,p2x,p2y){isNaN(p1x+p1y+p2x+p2y)||(p1x=2E5>Math.abs(p1x)?p1x:2E5*p1x/Math.abs(p1x),p1y=2E5>Math.abs(p1y)?p1y:2E5*p1y/Math.abs(p1y),p2x=2E5>Math.abs(p2x)?p2x:2E5*p2x/Math.abs(p2x),p2y=2E5>Math.abs(p2y)?p2y:2E5*p2y/Math.abs(p2y),node.setAttributeNS(null,"x1",p1x),node.setAttributeNS(null,"y1",p1y),node.setAttributeNS(null,"x2",p2x),node.setAttributeNS(null,
"y2",p2y))},updatePathPrim:function(node,pointString){""===pointString&&(pointString="M 0 0");node.setAttributeNS(null,"d",pointString)},updatePathStringPoint:function(el,size,type){var s="";el=el.coords.scrCoords;var sqrt32=size*Math.sqrt(3)*.5,s05=.5*size;"x"===type?s=" M "+(el[1]-size)+" "+(el[2]-size)+" L "+(el[1]+size)+" "+(el[2]+size)+" M "+(el[1]+size)+" "+(el[2]-size)+" L "+(el[1]-size)+" "+(el[2]+size):"+"===type?s=" M "+(el[1]-size)+" "+el[2]+" L "+(el[1]+size)+" "+el[2]+" M "+el[1]+" "+
(el[2]-size)+" L "+el[1]+" "+(el[2]+size):"\x3c\x3e"===type?s=" M "+(el[1]-size)+" "+el[2]+" L "+el[1]+" "+(el[2]+size)+" L "+(el[1]+size)+" "+el[2]+" L "+el[1]+" "+(el[2]-size)+" Z ":"^"===type?s=" M "+el[1]+" "+(el[2]-size)+" L "+(el[1]-sqrt32)+" "+(el[2]+s05)+" L "+(el[1]+sqrt32)+" "+(el[2]+s05)+" Z ":"v"===type?s=" M "+el[1]+" "+(el[2]+size)+" L "+(el[1]-sqrt32)+" "+(el[2]-s05)+" L "+(el[1]+sqrt32)+" "+(el[2]-s05)+" Z ":"\x3e"===type?s=" M "+(el[1]+size)+" "+el[2]+" L "+(el[1]-s05)+" "+(el[2]-
sqrt32)+" L "+(el[1]-s05)+" "+(el[2]+sqrt32)+" Z ":"\x3c"===type&&(s=" M "+(el[1]-size)+" "+el[2]+" L "+(el[1]+s05)+" "+(el[2]-sqrt32)+" L "+(el[1]+s05)+" "+(el[2]+sqrt32)+" Z ");return s},updatePathStringPrim:function(el){var i,nextSymb=" M ",pStr="";if(0>=el.numberPoints)return"";var len=Math.min(el.points.length,el.numberPoints);if(1===el.bezierDegree)for(i=0;i<len;i++){var scr=el.points[i].scrCoords;isNaN(scr[1])||isNaN(scr[2])?nextSymb=" M ":(scr[1]=Math.max(Math.min(scr[1],5E3),-5E3),scr[2]=
Math.max(Math.min(scr[2],5E3),-5E3),pStr+=nextSymb+scr[1]+" "+scr[2],nextSymb=" L ")}else if(3===el.bezierDegree)for(i=0;i<len;)scr=el.points[i].scrCoords,isNaN(scr[1])||isNaN(scr[2])?nextSymb=" M ":(pStr+=nextSymb+scr[1]+" "+scr[2]," C "===nextSymb&&(i+=1,scr=el.points[i].scrCoords,pStr+=" "+scr[1]+" "+scr[2],i+=1,scr=el.points[i].scrCoords,pStr+=" "+scr[1]+" "+scr[2]),nextSymb=" C "),i+=1;return pStr},updatePathStringBezierPrim:function(el){var j,pStr="",f=_type.default.evaluate(el.visProp.strokewidth);
var i="plot"!==_type.default.evaluate(el.visProp.curvetype);if(0>=el.numberPoints)return"";i&&el.board.options.curve.RDPsmoothing&&(el.points=_numerics.default.RamerDouglasPeucker(el.points,.5));var len=Math.min(el.points.length,el.numberPoints);for(j=1;3>j;j++){var nextSymb=" M ";for(i=0;i<len;i++){var scr=el.points[i].scrCoords;if(isNaN(scr[1])||isNaN(scr[2]))nextSymb=" M ";else{scr[1]=Math.max(Math.min(scr[1],5E3),-5E3);scr[2]=Math.max(Math.min(scr[2],5E3),-5E3);if(" M "===nextSymb)pStr+=nextSymb+
scr[1]+" "+scr[2];else{var k=2*j;pStr+=[nextSymb,lx+.333*(scr[1]-lx)+f*(k*Math.random()-j)," ",ly+.333*(scr[2]-ly)+f*(k*Math.random()-j)," ",lx+.666*(scr[1]-lx)+f*(k*Math.random()-j)," ",ly+.666*(scr[2]-ly)+f*(k*Math.random()-j)," ",scr[1]," ",scr[2]].join("")}nextSymb=" C ";var lx=scr[1];var ly=scr[2]}}}return pStr},updatePolygonPrim:function(node,el){var i,pStr="",len=el.vertices.length;node.setAttributeNS(null,"stroke","none");node.setAttributeNS(null,"fill-rule","evenodd");"polygonalchain"===
el.elType&&len++;for(i=0;i<len-1;i++){if(el.vertices[i].isReal){var scrCoords=el.vertices[i].coords.scrCoords;pStr=pStr+scrCoords[1]+","+scrCoords[2]}else{node.setAttributeNS(null,"points","");return}i<len-2&&(pStr+=" ")}-1===pStr.indexOf("NaN")&&node.setAttributeNS(null,"points",pStr)},updateRectPrim:function(node,x,y,w,h){node.setAttributeNS(null,"x",x);node.setAttributeNS(null,"y",y);node.setAttributeNS(null,"width",w);node.setAttributeNS(null,"height",h)},setPropertyPrim:function(node,key,val){"stroked"!==
key&&node.setAttributeNS(null,key,val)},display:function(el,val){el&&el.rendNode&&(el.visPropOld.visible=val,el=el.rendNode,val?(el.setAttributeNS(null,"display","inline"),el.style.visibility="inherit"):(el.setAttributeNS(null,"display","none"),el.style.visibility="hidden"))},show:function(el){_jxg.default.deprecated("Board.renderer.show()","Board.renderer.display()");this.display(el,!0)},hide:function(el){_jxg.default.deprecated("Board.renderer.hide()","Board.renderer.display()");this.display(el,
!1)},setBuffering:function(el,type){el.rendNode.setAttribute("buffered-rendering",type)},setDashStyle:function(el){var dashStyle=_type.default.evaluate(el.visProp.dash);el=el.rendNode;0<dashStyle?el.setAttributeNS(null,"stroke-dasharray",this.dashArray[dashStyle-1]):el.hasAttributeNS(null,"stroke-dasharray")&&el.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(el){var fillNode=el.rendNode;var node=_type.default.evaluate(el.visProp.gradient);if("linear"===node||"radial"===node){node=
this.createPrim(node+"Gradient",el.id+"_gradient");var node2=this.createPrim("stop",el.id+"_gradient1");var node3=this.createPrim("stop",el.id+"_gradient2");node.appendChild(node2);node.appendChild(node3);this.defs.appendChild(node);fillNode.setAttributeNS(null,"style","fill:url(#"+this.container.id+"_"+el.id+"_gradient)");el.gradNode1=node2;el.gradNode2=node3;el.gradNode=node}else fillNode.removeAttributeNS(null,"style")},updateGradientAngle:function(node,radians){var f=1,co=Math.cos(radians);radians=
Math.sin(radians);f=Math.abs(co)>Math.abs(radians)?f/Math.abs(co):f/Math.abs(radians);0<=co?(node.setAttributeNS(null,"x1",0),node.setAttributeNS(null,"x2",co*f)):(node.setAttributeNS(null,"x1",-co*f),node.setAttributeNS(null,"x2",0));0<=radians?(node.setAttributeNS(null,"y1",0),node.setAttributeNS(null,"y2",radians*f)):(node.setAttributeNS(null,"y1",-radians*f),node.setAttributeNS(null,"y2",0))},updateGradientCircle:function(node,cx,cy,r,fx,fy,fr){node.setAttributeNS(null,"cx",100*cx+"%");node.setAttributeNS(null,
"cy",100*cy+"%");node.setAttributeNS(null,"r",100*r+"%");node.setAttributeNS(null,"fx",100*fx+"%");node.setAttributeNS(null,"fy",100*fy+"%");node.setAttributeNS(null,"fr",100*fr+"%")},updateGradient:function(el){var node2=el.gradNode1,node3=el.gradNode2,ev_g=_type.default.evaluate(el.visProp.gradient);if(_type.default.exists(node2)&&_type.default.exists(node3)){var op=_type.default.evaluate(el.visProp.fillopacity);op=0<op?op:0;var col=_type.default.evaluate(el.visProp.fillcolor);node2.setAttributeNS(null,
"style","stop-color:"+col+";stop-opacity:"+op);node3.setAttributeNS(null,"style","stop-color:"+_type.default.evaluate(el.visProp.gradientsecondcolor)+";stop-opacity:"+_type.default.evaluate(el.visProp.gradientsecondopacity));node2.setAttributeNS(null,"offset",100*_type.default.evaluate(el.visProp.gradientstartoffset)+"%");node3.setAttributeNS(null,"offset",100*_type.default.evaluate(el.visProp.gradientendoffset)+"%");"linear"===ev_g?this.updateGradientAngle(el.gradNode,_type.default.evaluate(el.visProp.gradientangle)):
"radial"===ev_g&&this.updateGradientCircle(el.gradNode,_type.default.evaluate(el.visProp.gradientcx),_type.default.evaluate(el.visProp.gradientcy),_type.default.evaluate(el.visProp.gradientr),_type.default.evaluate(el.visProp.gradientfx),_type.default.evaluate(el.visProp.gradientfy),_type.default.evaluate(el.visProp.gradientfr))}},setObjectTransition:function(el,duration){var i,nodes=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];void 0===duration&&(duration=_type.default.evaluate(el.visProp.transitionduration));
if(duration!==el.visPropOld.transitionduration){var transitionStr=el.elementClass===_constants.default.OBJECT_CLASS_TEXT&&"html"===_type.default.evaluate(el.visProp.display)?" color "+duration+"ms, opacity "+duration+"ms":" fill "+duration+"ms, fill-opacity "+duration+"ms, stroke "+duration+"ms, stroke-opacity "+duration+"ms";var len=nodes.length;for(i=0;i<len;++i)if(el[nodes[i]]){var node=el[nodes[i]];node.style.transition=transitionStr}el.visPropOld.transitionduration=duration}},_setAttribute:function(setFunc,
testAttribute){""===testAttribute?setFunc():window.setTimeout(setFunc,1)},setObjectFillColor:function(el,color,opacity,rendNode){color=_type.default.evaluate(color);var o=_type.default.evaluate(opacity),grad=_type.default.evaluate(el.visProp.gradient);o=0<o?o:0;if(el.visPropOld.fillcolor!==color||el.visPropOld.fillopacity!==o||null!==grad){if(_type.default.exists(color)&&!1!==color){if(9!==color.length){var c=color;var oo=o}else opacity=_color.default.rgba2rgbo(color),c=opacity[0],oo=o*opacity[1];
var node=void 0===rendNode?el.rendNode:rendNode;"none"!==c&&this._setAttribute(function(){node.setAttributeNS(null,"fill",c)},el.visPropOld.fillcolor);el.type===_jxg.default.OBJECT_TYPE_IMAGE?this._setAttribute(function(){node.setAttributeNS(null,"opacity",oo)},el.visPropOld.fillopacity):("none"===c?(oo=0,node.setAttributeNS(null,"pointer-events","visibleStroke")):node.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){node.setAttributeNS(null,"fill-opacity",oo)},
el.visPropOld.fillopacity));"linear"!==grad&&"radial"!==grad||this.updateGradient(el)}el.visPropOld.fillcolor=color;el.visPropOld.fillopacity=o}},setObjectStrokeColor:function(el,color,opacity){color=_type.default.evaluate(color);var o=_type.default.evaluate(opacity);o=0<o?o:0;if(el.visPropOld.strokecolor!==color||el.visPropOld.strokeopacity!==o){if(_type.default.exists(color)&&!1!==color){if(9!==color.length){var c=color;var oo=o}else opacity=_color.default.rgba2rgbo(color),c=opacity[0],oo=o*opacity[1];
var node=el.rendNode;el.elementClass===_constants.default.OBJECT_CLASS_TEXT?"html"===_type.default.evaluate(el.visProp.display)?this._setAttribute(function(){node.style.color=c;node.style.opacity=oo},el.visPropOld.strokecolor):this._setAttribute(function(){node.setAttributeNS(null,"style","fill:"+c);node.setAttributeNS(null,"style","fill-opacity:"+oo)},el.visPropOld.strokecolor):this._setAttribute(function(){node.setAttributeNS(null,"stroke",c);node.setAttributeNS(null,"stroke-opacity",oo)},el.visPropOld.strokecolor);
if(el.elementClass===_constants.default.OBJECT_CLASS_CURVE||el.elementClass===_constants.default.OBJECT_CLASS_LINE)_type.default.evaluate(el.visProp.firstarrow)&&this._setArrowColor(el.rendNodeTriangleStart,c,oo,el,el.visPropCalc.typeFirst),_type.default.evaluate(el.visProp.lastarrow)&&this._setArrowColor(el.rendNodeTriangleEnd,c,oo,el,el.visPropCalc.typeLast)}el.visPropOld.strokecolor=color;el.visPropOld.strokeopacity=o}},setObjectStrokeWidth:function(el,width){var w=_type.default.evaluate(width);
isNaN(w)||el.visPropOld.strokewidth===w||(width=el.rendNode,this.setPropertyPrim(width,"stroked","true"),_type.default.exists(w)&&this.setPropertyPrim(width,"stroke-width",w+"px"),el.visPropOld.strokewidth=w)},setLineCap:function(el){var capStyle=_type.default.evaluate(el.visProp.linecap);void 0!==capStyle&&""!==capStyle&&el.visPropOld.linecap!==capStyle&&_type.default.exists(el.rendNode)&&(this.setPropertyPrim(el.rendNode,"stroke-linecap",capStyle),el.visPropOld.linecap=capStyle)},setShadow:function(el){var ev_s=
_type.default.evaluate(el.visProp.shadow);el.visPropOld.shadow!==ev_s&&(_type.default.exists(el.rendNode)&&(ev_s?el.rendNode.setAttributeNS(null,"filter","url(#"+this.container.id+"_f1)"):el.rendNode.removeAttributeNS(null,"filter")),el.visPropOld.shadow=ev_s)},suspendRedraw:function(){},unsuspendRedraw:function(){},resize:function(w,h){this.svgRoot.setAttribute("width",parseFloat(w));this.svgRoot.setAttribute("height",parseFloat(h))},createTouchpoints:function(n){var i;this.touchpoints=[];for(i=
0;i<n;i++){var na1="touchpoint1_"+i;na1=this.createPrim("path",na1);this.appendChildPrim(na1,19);na1.setAttributeNS(null,"d","M 0 0");this.touchpoints.push(na1);this.setPropertyPrim(na1,"stroked","true");this.setPropertyPrim(na1,"stroke-width","1px");na1.setAttributeNS(null,"stroke","#000000");na1.setAttributeNS(null,"stroke-opacity",1);na1.setAttributeNS(null,"display","none");na1="touchpoint2_"+i;na1=this.createPrim("ellipse",na1);this.appendChildPrim(na1,19);this.updateEllipsePrim(na1,0,0,0,0);
this.touchpoints.push(na1);this.setPropertyPrim(na1,"stroked","true");this.setPropertyPrim(na1,"stroke-width","1px");na1.setAttributeNS(null,"stroke","#000000");na1.setAttributeNS(null,"stroke-opacity",1);na1.setAttributeNS(null,"fill","#ffffff");na1.setAttributeNS(null,"fill-opacity",0);na1.setAttributeNS(null,"display","none")}},showTouchpoint:function(i){this.touchpoints&&0<=i&&2*i<this.touchpoints.length&&(this.touchpoints[2*i].setAttributeNS(null,"display","inline"),this.touchpoints[2*i+1].setAttributeNS(null,
"display","inline"))},hideTouchpoint:function(i){this.touchpoints&&0<=i&&2*i<this.touchpoints.length&&(this.touchpoints[2*i].setAttributeNS(null,"display","none"),this.touchpoints[2*i+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(i,pos){if(this.touchpoints&&0<=i&&2*i<this.touchpoints.length){var x=pos[0];var y=pos[1];this.touchpoints[2*i].setAttributeNS(null,"d","M "+(x-37)+" "+y+" L "+(x+37)+" "+y+" M "+x+" "+(y-37)+" L "+x+" "+(y+37));this.updateEllipsePrim(this.touchpoints[2*
i+1],pos[0],pos[1],25,25)}},_getValuesOfDOMElements:function(node){var values=[];if(1===node.nodeType)for(node=node.firstChild;node;)void 0!==node.id&&void 0!==node.value&&values.push([node.id,node.value]),values=values.concat(this._getValuesOfDOMElements(node)),node=node.nextSibling;return values},_getDataUri:function(url,callback){var image=new Image;image.onload=function(){var canvas=document.createElement("canvas");canvas.width=this.naturalWidth;canvas.height=this.naturalHeight;canvas.getContext("2d").drawImage(this,
0,0);callback(canvas.toDataURL("image/png"));canvas.remove()};image.src=url},_getImgDataURL:function(svgRoot){var i;svgRoot=svgRoot.getElementsByTagName("image");var len=svgRoot.length;if(0<len){var canvas=document.createElement("canvas");for(i=0;i<len;i++){svgRoot[i].setAttribute("crossorigin","anonymous");var ctx=canvas.getContext("2d");canvas.width=svgRoot[i].getAttribute("width");canvas.height=svgRoot[i].getAttribute("height");try{ctx.drawImage(svgRoot[i],0,0,canvas.width,canvas.height);var ur=
canvas.toDataURL();svgRoot[i].setAttribute("xlink:href",ur)}catch(err){console.log("CORS problem! Image can not be used",err)}}}return!0},dumpToDataURI:function(ignoreTexts){var svgRoot=this.svgRoot,btoa=window.btoa||_base.default.encode,values=[];if(this.container.hasChildNodes()&&_type.default.exists(this.foreignObjLayer))for(ignoreTexts||this.foreignObjLayer.setAttribute("display","inline");svgRoot.nextSibling;)values=values.concat(this._getValuesOfDOMElements(svgRoot.nextSibling)),this.foreignObjLayer.appendChild(svgRoot.nextSibling);
this._getImgDataURL(svgRoot);svgRoot.setAttribute("xmlns","http://www.w3.org/2000/svg");svgRoot=(new XMLSerializer).serializeToString(svgRoot);if(!0!==ignoreTexts){var len=values.length;for(ignoreTexts=0;ignoreTexts<len;ignoreTexts++)svgRoot=svgRoot.replace('id\x3d"'+values[ignoreTexts][0]+'"','id\x3d"'+values[ignoreTexts][0]+'" value\x3d"'+values[ignoreTexts][1]+'"')}1<(svgRoot.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length&&(svgRoot=svgRoot.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,
""));svgRoot=svgRoot.replace(/&nbsp;/g," ");if(_type.default.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(svgRoot)))},dumpToCanvas:function(canvasId,w,h,ignoreTexts){canvasId=this.container.ownerDocument.getElementById(canvasId);canvasId.width=canvasId.width;var ctx=
canvasId.getContext("2d");void 0!==w&&void 0!==h&&(canvasId.style.width=parseFloat(w)+"px",canvasId.style.height=parseFloat(h)+"px",canvasId.setAttribute("width",parseFloat(w)),canvasId.setAttribute("height",parseFloat(h)));var tmpImg=new Image;ignoreTexts=this.dumpToDataURI(ignoreTexts);tmpImg.src=ignoreTexts;return"Promise"in window?new Promise(function(resolve,reject){try{tmpImg.onload=function(){ctx.drawImage(tmpImg,0,0,w,h);resolve()}}catch(e){reject(e)}}):(tmpImg.onload=function(){window.setTimeout(function(){try{ctx.drawImage(tmpImg,
0,0,w,h)}catch(err){console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(board,imgId,ignoreTexts){var doc=this.container.ownerDocument,parent=this.container.parentNode,bas=board.attr.screenshot;var button=!1;if("no"===this.type)return this;board=bas.scale*this.container.getBoundingClientRect().width;var h=bas.scale*this.container.getBoundingClientRect().height;if(void 0===imgId||""===imgId){button=!0;var img=new Image;img.style.width=board+"px";img.style.height=
h+"px"}else button=!1,img=doc.getElementById(imgId);if(button){var node=doc.createElement("div");node.style.cssText=bas.css;node.style.width=board+"px";node.style.height=h+"px";node.style.zIndex=this.container.style.zIndex+120;node.style.position="absolute";node.style.top=this.container.offsetTop+"px";node.style.left=this.container.offsetLeft+"px"}var canvas=doc.createElement("canvas");imgId=Math.random().toString(36).substr(2,5);canvas.setAttribute("id",imgId);canvas.setAttribute("width",board);
canvas.setAttribute("height",h);canvas.style.width=board+"px";canvas.style.height=board+"px";canvas.style.display="none";parent.appendChild(canvas);if(button){button=doc.createElement("span");var buttonText=doc.createTextNode("âœ–");button.style.cssText=bas.cssButton;button.appendChild(buttonText);button.onclick=function(){node.parentNode.removeChild(node)};node.appendChild(img);node.appendChild(button);parent.insertBefore(node,this.container.nextSibling)}doc=doc.getElementById(this.container.id+"_navigationbar");
if(_type.default.exists(doc)){var zbarDisplay=doc.style.display;doc.style.display="none"}bas=function(){img.src=canvas.toDataURL("image/png");parent.removeChild(canvas)};"Promise"in window?this.dumpToCanvas(imgId,board,h,ignoreTexts).then(bas):(this.dumpToCanvas(imgId,board,h,ignoreTexts),window.setTimeout(bas,200));_type.default.exists(doc)&&(doc.style.display=zbarDisplay);return this}});exports.default=_jxg.default.SVGRenderer}
//# sourceMappingURL=module$node_modules$$mentatcollective$jsxgraph$src$renderer$svg.js.map
