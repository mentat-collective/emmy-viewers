shadow$provide.module$node_modules$three$src$renderers$webgl$WebGLCubeMaps=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.WebGLCubeMaps=function(renderer){function mapTextureMapping(texture,mapping){mapping===_constants.EquirectangularReflectionMapping?texture.mapping=_constants.CubeReflectionMapping:mapping===_constants.EquirectangularRefractionMapping&&(texture.mapping=_constants.CubeRefractionMapping);return texture}function onTextureDispose(event){event=
event.target;event.removeEventListener("dispose",onTextureDispose);const cubemap=cubemaps.get(event);void 0!==cubemap&&(cubemaps.delete(event),cubemap.dispose())}let cubemaps=new WeakMap;return{get:function(texture){if(texture&&texture.isTexture&&!1===texture.isRenderTargetTexture){var mapping=texture.mapping;if(mapping===_constants.EquirectangularReflectionMapping||mapping===_constants.EquirectangularRefractionMapping)return cubemaps.has(texture)?(mapping=cubemaps.get(texture).texture,mapTextureMapping(mapping,
texture.mapping)):(mapping=texture.image)&&0<mapping.height?(mapping=new _WebGLCubeRenderTarget.WebGLCubeRenderTarget(mapping.height/2),mapping.fromEquirectangularTexture(renderer,texture),cubemaps.set(texture,mapping),texture.addEventListener("dispose",onTextureDispose),mapTextureMapping(mapping.texture,texture.mapping)):null}return texture},dispose:function(){cubemaps=new WeakMap}}};var _constants=require("module$node_modules$three$src$constants"),_WebGLCubeRenderTarget=require("module$node_modules$three$src$renderers$WebGLCubeRenderTarget")}
//# sourceMappingURL=module$node_modules$three$src$renderers$webgl$WebGLCubeMaps.js.map
