{
"version":3,
"file":"module$node_modules$mathbox$build$esm$index.js",
"lineCount":11,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$index\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mathBox = exports.DOM = exports.Util = exports.Stage = exports.Shaders = exports.Render = exports.Primitives = exports.Overlay = exports.Model = exports.version = exports.Context = exports.e = exports.\u03c4 = exports.\u03c0 = void 0;\n\nrequire(\"./splash.js\");\n\nrequire(\"threestrap\");\n\nvar model = _interopRequireWildcard(require(\"./model\"));\n\nvar overlay = _interopRequireWildcard(require(\"./overlay\"));\n\nvar primitives = _interopRequireWildcard(require(\"./primitives\"));\n\nvar render = _interopRequireWildcard(require(\"./render\"));\n\nvar shaders = _interopRequireWildcard(require(\"./shaders\"));\n\nvar stage = _interopRequireWildcard(require(\"./stage\"));\n\nvar util = _interopRequireWildcard(require(\"./util\"));\n\nvar _bootstrap = require(\"threestrap/src/bootstrap.js\");\n\nvar _context = require(\"./context.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n// NOTE this import triggers the installation of all plugins as a side effect.\n// Just because\nconst \u03c0 = Math.PI;\nexports.\u03c0 = \u03c0;\nconst \u03c4 = \u03c0 * 2;\nexports.\u03c4 = \u03c4;\nconst e = Math.E;\nexports.e = e;\nconst Context = _context.Context;\nexports.Context = Context;\nconst version = _context.Context.Version;\nexports.version = version;\nconst Model = model;\nexports.Model = Model;\nconst Overlay = overlay;\nexports.Overlay = Overlay;\nconst Primitives = primitives;\nexports.Primitives = Primitives;\nconst Render = render;\nexports.Render = Render;\nconst Shaders = shaders;\nexports.Shaders = Shaders;\nconst Stage = stage;\nexports.Stage = Stage;\nconst Util = util;\nexports.Util = Util;\nconst DOM = util.VDOM;\nexports.DOM = DOM;\n\nconst mathBox = function (options) {\n  const three = new _bootstrap.Bootstrap(options);\n\n  if (!three.fallback) {\n    if (!three.Time) {\n      three.install(\"time\");\n    }\n\n    if (!three.MathBox) {\n      three.install([\"mathbox\", \"splash\"]);\n    }\n  }\n\n  return three.mathbox != null ? three.mathbox : three;\n}; // Load context and export namespace\n// TODO suspicious... how can I export??\n// for (let k in Context.Namespace) {\n//   const v = Context.Namespace[k];\n//   exports[k] = v;\n// }\n// Threestrap plugin\n\n\nexports.mathBox = mathBox;\n\n_bootstrap.Bootstrap.registerPlugin(\"mathbox\", {\n  defaults: {\n    init: true,\n    warmup: 2,\n    inspect: true,\n    splash: true\n  },\n  listen: [\"ready\", \"pre\", \"update\", \"post\", \"resize\"],\n\n  // Install meta-API\n  install(three) {\n    let inited = false;\n    this.first = true;\n    return three.MathBox = {\n      // Init the mathbox context\n      init: options => {\n        if (inited) {\n          return;\n        }\n\n        inited = true;\n        const scene = (options != null ? options.scene : undefined) || this.options.scene || three.scene;\n        const camera = (options != null ? options.camera : undefined) || this.options.camera || three.camera;\n        this.context = new Context(three.renderer, scene, camera); // Enable handy destructuring\n\n        this.context.api.three = three.three = three;\n        this.context.api.mathbox = three.mathbox = this.context.api; // v1 compatibility\n\n        this.context.api.start = () => three.Loop.start();\n\n        this.context.api.stop = () => three.Loop.stop(); // Initialize and set initial size\n\n\n        this.context.init();\n        this.context.resize(three.Size); // Set warmup mode and track pending objects\n\n        this.context.setWarmup(this.options.warmup);\n        this.pending = 0;\n        this.warm = !this.options.warmup;\n        console.log(\"MathBox\u00b2\", version);\n        three.trigger({\n          type: \"mathbox/init\",\n          version: version,\n          context: this.context\n        });\n      },\n      // Destroy the mathbox context\n      destroy: () => {\n        if (!inited) {\n          return;\n        }\n\n        inited = false;\n        three.trigger({\n          type: \"mathbox/destroy\",\n          context: this.context\n        });\n        this.context.destroy();\n        delete three.mathbox;\n        delete this.context.api.three;\n        delete this.context;\n      },\n      object: () => this.context != null ? this.context.scene.root : undefined\n    };\n  },\n\n  uninstall(three) {\n    three.MathBox.destroy();\n    delete three.MathBox;\n  },\n\n  // Ready event: right before mathbox() / THREE.bootstrap() returns\n  ready(event, three) {\n    if (this.options.init) {\n      three.MathBox.init();\n      return setTimeout(() => {\n        if (this.options.inspect && three.MathBox) {\n          return this.inspect(three);\n        }\n      });\n    }\n  },\n\n  // Log scene for inspection\n  inspect(three) {\n    this.context.api.inspect();\n\n    if (!this.options.warmup) {\n      return this.info(three);\n    }\n  },\n\n  info(three) {\n    const fmt = function (x) {\n      const out = [];\n\n      while (x >= 1000) {\n        out.unshift((\"000\" + x % 1000).slice(-3));\n        x = Math.floor(x / 1000);\n      }\n\n      out.unshift(x);\n      return out.join(\",\");\n    };\n\n    const info = three.renderer.info.render;\n    console.log(\"Geometry  \", fmt(info.triangles) + \" triangles  \", fmt(info.points) + \" points  \", fmt(info.lines) + \" lines  \", fmt(info.calls) + \" draw calls  \");\n  },\n\n  // Hook up context events\n  resize(event, three) {\n    return this.context != null ? this.context.resize(three.Size) : undefined;\n  },\n\n  pre(event, three) {\n    return this.context != null ? this.context.pre(three.Time) : undefined;\n  },\n\n  update(event, three) {\n    let camera;\n\n    if (this.context != null) {\n      this.context.update();\n    }\n\n    if ((camera = this.context != null ? this.context.camera : undefined) && camera !== three.camera) {\n      three.camera = camera;\n    }\n\n    three.Time.set({\n      speed: this.context.speed\n    });\n    this.progress(this.context.getPending(), three); // Call render here instead of on:render because it renders off screen material\n    // that needs to be available for rendering the actual frame.\n\n    return this.context != null ? this.context.render() : undefined;\n  },\n\n  post(_event, _three) {\n    return this.context != null ? this.context.post() : undefined;\n  },\n\n  // Warmup progress changed\n  progress(remain, three) {\n    if (!remain && !this.pending) {\n      return;\n    } // Latch max value until queue is emptied to get a total\n\n\n    let pending = Math.max(remain + this.options.warmup, this.pending); // Send events for external progress reporting\n\n    const current = pending - remain;\n    const total = pending;\n    three.trigger({\n      type: \"mathbox/progress\",\n      current: pending - remain,\n      total: pending\n    });\n\n    if (remain === 0) {\n      pending = 0;\n    }\n\n    this.pending = pending; // Report once when loaded\n\n    if (current === total && !this.warm) {\n      this.warm = true;\n\n      if (this.options.inspect) {\n        this.info(three);\n      }\n    }\n  }\n\n});\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","value","mathBox","DOM","Util","Stage","Shaders","Render","Primitives","Overlay","Model","version","Context","e","\u03c4","\u03c0","model","overlay","primitives","render","shaders","stage","util","_bootstrap","_context","Math","PI","E","Version","VDOM","options","three","Bootstrap","fallback","Time","install","MathBox","mathbox","registerPlugin","defaults","init","warmup","inspect","splash","listen","inited","first","context","renderer","scene","undefined","camera","api","start","this.context.api.start","Loop","stop","this.context.api.stop","resize","Size","setWarmup","pending","warm","console","log","trigger","type","destroy","object","root","uninstall","ready","event","setTimeout","info","fmt","x","out","unshift","slice","floor","join","triangles","points","lines","calls","pre","update","speed","progress","getPending","post","_event","_three","remain","max","current","total"]
}
