shadow$provide.module$node_modules$mathbox$build$esm$primitives$types$text$text=function(global,require,module,exports){function _getRequireWildcardCache(nodeInterop$jscomp$0){if("function"!==typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop$jscomp$0)}Object.defineProperty(exports,"__esModule",{value:!0});exports.Text=void 0;var UData=function(obj,
nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==typeof obj&&"function"!==typeof obj)return{default:obj};if((nodeInterop=_getRequireWildcardCache(nodeInterop))&&nodeInterop.has(obj))return nodeInterop.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor,key;for(key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;
desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj;nodeInterop&&nodeInterop.set(obj,newObj);return newObj}(require("module$node_modules$mathbox$build$esm$util$data")),_constants=require("module$node_modules$three$src$constants"),_buffer=require("module$node_modules$mathbox$build$esm$primitives$types$data$buffer");global=require("module$node_modules$mathbox$build$esm$primitives$types$data$voxel");class Text extends global.Voxel{static initClass(){this.traits=
"node buffer active data texture voxel text font".split(" ");this.defaults={minFilter:"linear",magFilter:"linear"};this.finals={channels:1}}init(){super.init();return this.atlas=null}textShader(shader){return this.atlas.shader(shader)}textIsSDF(){return 0<this.props.sdf}textHeight(){return this.props.detail}make(){let {minFilter,magFilter,type}=this.props;const {font,style,variant,weight,detail,sdf}=this.props;this.atlas=this._renderables.make("textAtlas",{font,size:detail,style,variant,weight,outline:sdf,
minFilter,magFilter,type});this.magFilter=this.minFilter=_constants.NearestFilter;this.type=_constants.FloatType;_buffer.Buffer.prototype.make.call(this);minFilter=null!=this.minFilter?this.minFilter:this.props.minFilter;magFilter=null!=this.magFilter?this.magFilter:this.props.magFilter;type=null!=this.type?this.type:this.props.type;var {width}=this.props,{height}=this.props;const {depth}=this.props,reserveX=this.props.bufferWidth,reserveY=this.props.bufferHeight,reserveZ=this.props.bufferDepth,{channels}=
this.props,{items}=this.props;width=this.spec={channels,items,width,height,depth};this.items=width.items;this.channels=width.channels;({data:height}=this.props);width=UData.getDimensions(height,width);({space:height}=this);height.width=Math.max(reserveX,width.width||1);height.height=Math.max(reserveY,width.height||1);height.depth=Math.max(reserveZ,width.depth||1);this.buffer=this._renderables.make(this.storage,{width:height.width,height:height.height,depth:height.depth,channels:4,items,minFilter,
magFilter,type});const {atlas}=this,{emit}=this.buffer.streamer;return this.buffer.streamer.emit=text=>atlas.map(text,emit)}unmake(){super.unmake();if(this.atlas)return this.atlas.dispose(),this.atlas=null}update(){this.atlas.begin();super.update();return this.atlas.end()}change(changed,touched,init){return touched.font?this.rebuild():super.change(changed,touched,init)}}exports.Text=Text;Text.initClass()}
//# sourceMappingURL=module$node_modules$mathbox$build$esm$primitives$types$text$text.js.map
