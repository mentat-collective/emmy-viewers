{
"version":3,
"file":"module$node_modules$mathbox$build$esm$primitives$types$draw$surface.js",
"lineCount":12,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/primitives/types/draw/surface.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$primitives$types$draw$surface\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Surface = void 0;\n\nvar UJS = _interopRequireWildcard(require(\"../../../util/js.js\"));\n\nvar _Color = require(\"three/src/math/Color.js\");\n\nvar _primitive = require(\"../../primitive.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nclass Surface extends _primitive.Primitive {\n  static initClass() {\n    this.traits = [\"node\", \"object\", \"visible\", \"style\", \"line\", \"mesh\", \"geometry\", \"surface\", \"position\", \"grid\", \"bind\", \"shade\"];\n    this.defaults = {\n      lineX: false,\n      lineY: false\n    };\n  }\n\n  constructor(node, context, helpers) {\n    super(node, context, helpers);\n    this.lineX = this.lineY = this.surface = null;\n  }\n\n  resize() {\n    if (this.bind.points == null) {\n      return;\n    }\n\n    const dims = this.bind.points.getActiveDimensions();\n    const {\n      width,\n      height,\n      depth,\n      items\n    } = dims;\n\n    if (this.surface) {\n      this.surface.geometry.clip(width, height, depth, items);\n    }\n\n    if (this.lineX) {\n      this.lineX.geometry.clip(width, height, depth, items);\n    }\n\n    if (this.lineY) {\n      this.lineY.geometry.clip(height, width, depth, items);\n    }\n\n    if (this.bind.map != null) {\n      const map = this.bind.map.getActiveDimensions();\n\n      if (this.surface) {\n        return this.surface.geometry.map(map.width, map.height, map.depth, map.items);\n      }\n    }\n  }\n\n  make() {\n    // Bind to attached data sources\n    let color, normal;\n\n    this._helpers.bind.make([{\n      to: \"geometry.points\",\n      trait: \"source\"\n    }, {\n      to: \"geometry.colors\",\n      trait: \"source\"\n    }, {\n      to: \"mesh.normals\",\n      trait: \"source\"\n    }, {\n      to: \"mesh.map\",\n      trait: \"source\"\n    }]);\n\n    if (this.bind.points == null) {\n      return;\n    } // Build transform chain\n\n\n    let position = this._shaders.shader(); // Fetch position and transform to view\n\n\n    position = this.bind.points.sourceShader(position);\n    position = this._helpers.position.pipeline(position); // Prepare bound uniforms\n\n    const styleUniforms = this._helpers.style.uniforms();\n\n    const wireUniforms = this._helpers.style.uniforms();\n\n    const lineUniforms = this._helpers.line.uniforms();\n\n    const surfaceUniforms = this._helpers.surface.uniforms();\n\n    const unitUniforms = this._inherit(\"unit\").getUnitUniforms(); // Darken wireframe if needed for contrast\n    // Auto z-bias wireframe over surface\n\n\n    wireUniforms.styleColor = this._attributes.make(this._types.color());\n    wireUniforms.styleZBias = this._attributes.make(this._types.number());\n    this.wireColor = wireUniforms.styleColor.value;\n    this.wireZBias = wireUniforms.styleZBias;\n    this.wireScratch = new _Color.Color(); // Fetch geometry dimensions\n\n    const dims = this.bind.points.getDimensions();\n    const {\n      width,\n      height,\n      depth,\n      items\n    } = dims; // Get display properties\n\n    const {\n      shaded,\n      fill,\n      lineX,\n      lineY,\n      closedX,\n      closedY,\n      stroke,\n      join,\n      proximity,\n      crossed\n    } = this.props;\n    const objects = [];\n    this.proximity = proximity; // Fetch normals\n\n    if (this.bind.normals != null) {\n      normal = this._shaders.shader();\n      this.bind.normals.sourceShader(normal);\n\n      this._helpers.shade.normal(normal);\n    } // Build color lookup\n\n\n    if (this.bind.colors != null) {\n      color = this._shaders.shader();\n      this.bind.colors.sourceShader(color);\n    } // Build transition mask lookup\n\n\n    const mask = this._helpers.object.mask(); // Build texture map lookup\n\n\n    const map = this._helpers.shade.map(this.bind.map != null ? this.bind.map.sourceShader(this._shaders.shader()) : undefined); // Build fragment material lookup\n\n\n    const material = this._helpers.shade.pipeline();\n\n    const faceMaterial = material || shaded;\n    const lineMaterial = material || false; // Make line and surface renderables\n\n    const {\n      swizzle,\n      swizzle2\n    } = this._helpers.position;\n    let uniforms = UJS.merge(unitUniforms, lineUniforms, styleUniforms, wireUniforms);\n    const zUnits = lineX || lineY ? -50 : 0;\n\n    if (lineX) {\n      this.lineX = this._renderables.make(\"line\", {\n        uniforms,\n        samples: width,\n        strips: height,\n        ribbons: depth,\n        layers: items,\n        position,\n        color,\n        normal,\n        zUnits: -zUnits,\n        stroke,\n        join,\n        mask,\n        material: lineMaterial,\n        proximity,\n        closed: closedX || closed\n      });\n      objects.push(this.lineX);\n    }\n\n    if (lineY) {\n      this.lineY = this._renderables.make(\"line\", {\n        uniforms,\n        samples: height,\n        strips: width,\n        ribbons: depth,\n        layers: items,\n        position: swizzle2(position, \"yxzw\", \"yxzw\"),\n        color: swizzle(color, \"yxzw\"),\n        zUnits: -zUnits,\n        stroke,\n        join,\n        mask: swizzle(mask, crossed ? \"xyzw\" : \"yxzw\"),\n        material: lineMaterial,\n        proximity,\n        closed: closedY || closed\n      });\n      objects.push(this.lineY);\n    }\n\n    if (fill) {\n      uniforms = UJS.merge(unitUniforms, surfaceUniforms, styleUniforms);\n      this.surface = this._renderables.make(\"surface\", {\n        uniforms,\n        width,\n        height,\n        surfaces: depth,\n        layers: items,\n        position,\n        color,\n        zUnits,\n        stroke,\n        material: faceMaterial,\n        mask,\n        map,\n        intUV: true,\n        closedX: closedX || closed,\n        closedY: closedY || closed\n      });\n      objects.push(this.surface);\n    }\n\n    this._helpers.visible.make();\n\n    return this._helpers.object.make(objects);\n  }\n\n  made() {\n    return this.resize();\n  }\n\n  unmake() {\n    this._helpers.bind.unmake();\n\n    this._helpers.visible.unmake();\n\n    this._helpers.object.unmake();\n\n    return this.lineX = this.lineY = this.surface = null;\n  }\n\n  _convertGammaToLinear(color, gammaFactor = 2.0) {\n    color.r = Math.pow(color.r, gammaFactor);\n    color.g = Math.pow(color.g, gammaFactor);\n    color.b = Math.pow(color.b, gammaFactor);\n    return color;\n  }\n\n  _convertLinearToGamma(color, gammaFactor = 2.0) {\n    const safeInverse = gammaFactor > 0 ? 1.0 / gammaFactor : 1.0;\n    color.r = Math.pow(color.r, safeInverse);\n    color.g = Math.pow(color.g, safeInverse);\n    color.b = Math.pow(color.b, safeInverse);\n    return color;\n  }\n\n  change(changed, touched, init) {\n    if (changed[\"geometry.points\"] || changed[\"mesh.shaded\"] || changed[\"mesh.fill\"] || changed[\"line.stroke\"] || changed[\"line.join\"] || touched[\"grid\"]) {\n      return this.rebuild();\n    }\n\n    if (changed[\"style.color\"] || changed[\"style.zBias\"] || changed[\"mesh.fill\"] || changed[\"mesh.lineBias\"] || init) {\n      const {\n        fill,\n        color,\n        zBias,\n        lineBias\n      } = this.props;\n      this.wireZBias.value = zBias + (fill ? lineBias : 0);\n      this.wireColor.copy(color);\n\n      if (fill) {\n        const c = this.wireScratch;\n        c.setRGB(color.r, color.g, color.b);\n\n        this._convertLinearToGamma(this._convertGammaToLinear(c).multiplyScalar(0.75));\n\n        this.wireColor.r = c.r;\n        this.wireColor.g = c.g;\n        this.wireColor.b = c.b;\n      }\n    }\n\n    if (changed[\"line.proximity\"]) {\n      if (this.proximity != null !== (this.props.proximity != null)) {\n        return this.rebuild();\n      }\n    }\n  }\n\n}\n\nexports.Surface = Surface;\nSurface.initClass();\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","Surface","UJS","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_Color","_primitive","Primitive","initClass","traits","defaults","lineX","lineY","constructor","node","context","helpers","surface","resize","bind","points","dims","getActiveDimensions","width","height","depth","items","geometry","clip","map","make","color","normal","_helpers","to","trait","position","_shaders","shader","sourceShader","pipeline","styleUniforms","style","uniforms","wireUniforms","lineUniforms","line","surfaceUniforms","unitUniforms","_inherit","getUnitUniforms","styleColor","_attributes","_types","styleZBias","number","wireColor","wireZBias","wireScratch","Color","getDimensions","shaded","fill","closedX","closedY","stroke","join","proximity","crossed","props","objects","normals","shade","colors","mask","object","undefined","material","faceMaterial","lineMaterial","swizzle","swizzle2","merge","zUnits","_renderables","samples","strips","ribbons","layers","closed","push","surfaces","intUV","visible","made","unmake","_convertGammaToLinear","gammaFactor","r","Math","pow","g","b","_convertLinearToGamma","safeInverse","change","changed","touched","init","rebuild","zBias","lineBias","copy","c","setRGB","multiplyScalar"]
}
