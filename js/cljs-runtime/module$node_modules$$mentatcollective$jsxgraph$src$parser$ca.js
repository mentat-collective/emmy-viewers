shadow$provide.module$node_modules$$mentatcollective$jsxgraph$src$parser$ca=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;global=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$jxg"));_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$base$constants"));_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$base$text"));
_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$math$math"));_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$math$geometry"));_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$math$statistics"));var _type=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$utils$type"));_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$utils$env"));
global.default.CA=function(node,createNode,parser){this.node=node;this.createNode=createNode;this.parser=parser};global.default.extend(global.default.CA.prototype,{findMapNode:function(mapname,node){var i;if("op_assign"===node.value&&node.children[0].value===mapname)return node.children[1];if(node.children){var len=node.children.length;for(i=0;i<len;++i){var ret=this.findMapNode(mapname,node.children[i]);if(null!==ret)return ret}}return null},setMath:function(node){var i;if("node_op"==node.type&&
("op_add"==node.value||"op_sub"==node.value||"op_mul"==node.value||"op_div"==node.value||"op_neg"==node.value||"op_execfun"==node.value||"op_exp"==node.value)||"node_var"==node.type||"node_const"==node.type)node.isMath=!0;if(node.children){var len=node.children.length;for(i=0;i<len;++i)this.setMath(node.children[i])}},deriveElementary:function(node,varname){var fun=node.children[0].value,arg=node.children[1];switch(fun){case "abs":node=this.createNode("node_op","op_div",arg[0],this.createNode("node_op",
"op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",_type.default.deepCopy(arg[0]),_type.default.deepCopy(arg[0]))]));break;case "sqrt":node=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(node.type,node.value,_type.default.deepCopy(node.children[0]),_type.default.deepCopy(node.children[1]))));break;case "sin":node=this.createNode("node_op","op_execfun",this.createNode("node_var",
"cos"),_type.default.deepCopy(arg));break;case "cos":node=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),_type.default.deepCopy(arg)));break;case "tan":node=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),_type.default.deepCopy(arg)),this.createNode("node_const",2)));break;case "cot":node=this.createNode("node_op",
"op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),_type.default.deepCopy(arg)),this.createNode("node_const",2))));break;case "exp":node=this.createNode(node.type,node.value,_type.default.deepCopy(node.children[0]),_type.default.deepCopy(node.children[1]));break;case "pow":node=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",_type.default.deepCopy(node.children[0]),
_type.default.deepCopy(node.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(node.children[1][0],varname),this.createNode("node_op","op_div",_type.default.deepCopy(node.children[1][1]),_type.default.deepCopy(node.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(node.children[1][1],varname),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[_type.default.deepCopy(node.children[1][0])]))));break;case "log":case "ln":node=
this.createNode("node_op","op_div",this.createNode("node_const",1),_type.default.deepCopy(arg[0]));break;case "log2":case "lb":case "ld":node=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),_type.default.deepCopy(arg[0])),this.createNode("node_const",1.4426950408889634));break;case "log10":case "lg":node=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),_type.default.deepCopy(arg[0])),this.createNode("node_const",
.43429448190325176));break;case "asin":node=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",_type.default.deepCopy(arg[0]),_type.default.deepCopy(arg[0])))]));break;case "acos":node=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op",
"op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",_type.default.deepCopy(arg[0]),_type.default.deepCopy(arg[0])))])));break;case "atan":node=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",_type.default.deepCopy(arg[0]),_type.default.deepCopy(arg[0]))));break;case "acot":node=this.createNode("node_op",
"op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",_type.default.deepCopy(arg[0]),_type.default.deepCopy(arg[0])))));break;case "sinh":node=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[_type.default.deepCopy(arg[0])]);break;case "cosh":node=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[_type.default.deepCopy(arg[0])]);
break;case "tanh":node=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[_type.default.deepCopy(arg[0])]),this.createNode("node_const",2)));break;case "asinh":node=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",
_type.default.deepCopy(arg[0]),_type.default.deepCopy(arg[0])),this.createNode("node_const",1))]));break;case "acosh":node=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",_type.default.deepCopy(arg[0]),_type.default.deepCopy(arg[0])),this.createNode("node_const",1))]));break;case "atanh":node=this.createNode("node_op","op_div",this.createNode("node_const",
1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",_type.default.deepCopy(arg[0]),_type.default.deepCopy(arg[0]))));break;default:throw this.createNode("node_const",0),console.log('Derivative of "'+fun+'" not yet implemented'),Error("Error("+this.line+"): ");}return node},derivative:function(node,varname){switch(node.type){case "node_op":switch(node.value){case "op_execfun":var newNode="pow"==node.children[0].value?this.deriveElementary(node,varname):
0===node.children[1].length?this.createNode("node_const",0):this.createNode("node_op","op_mul",this.deriveElementary(node,varname),this.derivative(node.children[1][0],varname));break;case "op_div":newNode=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(node.children[0],varname),_type.default.deepCopy(node.children[1])),this.createNode("node_op","op_mul",_type.default.deepCopy(node.children[0]),this.derivative(node.children[1],
varname))),this.createNode("node_op","op_mul",_type.default.deepCopy(node.children[1]),_type.default.deepCopy(node.children[1])));break;case "op_mul":newNode=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",_type.default.deepCopy(node.children[0]),this.derivative(node.children[1],varname)),this.createNode("node_op","op_mul",this.derivative(node.children[0],varname),_type.default.deepCopy(node.children[1])));break;case "op_neg":newNode=this.createNode("node_op","op_neg",this.derivative(node.children[0],
varname));break;case "op_add":case "op_sub":newNode=this.createNode("node_op",node.value,this.derivative(node.children[0],varname),this.derivative(node.children[1],varname));break;case "op_exp":newNode=this.createNode("node_op","op_mul",_type.default.deepCopy(node),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(node.children[0],varname),this.createNode("node_op","op_div",_type.default.deepCopy(node.children[1]),_type.default.deepCopy(node.children[0]))),this.createNode("node_op",
"op_mul",this.derivative(node.children[1],varname),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[_type.default.deepCopy(node.children[0])]))))}break;case "node_var":newNode=node.value===varname?this.createNode("node_const",1):this.createNode("node_const",0);break;case "node_const":newNode=this.createNode("node_const",0)}return newNode},expandDerivatives:function(node,parent,ast){var i,j;if(!node)return 0;this.line=node.line;this.col=node.col;var len=node.children.length;
for(i=0;i<len;++i)if(node.children[i]&&node.children[i].type)node.children[i]=this.expandDerivatives(node.children[i],node,ast);else if(_type.default.isArray(node.children[i]))for(j=0;j<node.children[i].length;++j)node.children[i][j]&&node.children[i][j].type&&(node.children[i][j]=this.expandDerivatives(node.children[i][j],node,ast));switch(node.type){case "node_op":switch(node.value){case "op_execfun":if(node.children[0]&&"D"===node.children[0].value){"node_var"==node.children[1][0].type?(len=node.children[1][0].value,
i=this.findMapNode(len,ast),len=i.children[0],ast=2<=node.children[1].length?node.children[1][1].value:i.children[0][0],j=i.children[1]):(j=node.children[1][0],len=["x"],ast=2<=node.children[1].length?node.children[1][1].value:"x");i=3<=node.children[1].length?node.children[1][2].value:1;if(1<=i)for(;1<=i;)j=this.derivative(j,ast),j=this.removeTrivialNodes(j),i--;parent="node_op"==parent.type&&"op_assign"==parent.value?this.createNode("node_op","op_map",len,j):j;this.setMath(parent);node.type=parent.type;
node.value=parent.value;node.children[0]=parent.children[0];node.children[1]=parent.children[1]}}}return node},removeTrivialNodes:function(node){var i;if(_type.default.isArray(node)){var len=node.length;for(i=0;i<len;++i)node[i]=this.removeTrivialNodes(node[i])}if("node_op"!=node.type||!node.children)return node;len=node.children.length;for(i=0;i<len;++i){this.mayNotBeSimplified=!1;do node.children[i]=this.removeTrivialNodes(node.children[i]);while(this.mayNotBeSimplified)}switch(node.value){case "op_map":len=
node.children[0];var n1=node.children[1];if("node_var"==n1.type)for(i=0;i<len.length;++i)if(len[i]==n1.value){n1.isMath=!0;break}break;case "op_add":len=node.children[0];n1=node.children[1];if("node_const"==len.type&&0===len.value)return n1;if("node_const"==n1.type&&0===n1.value)return len;if("node_const"==len.type&&"node_const"==n1.type)return len.value+=n1.value,len;break;case "op_mul":len=node.children[0];n1=node.children[1];if("node_const"==len.type&&1==len.value)return n1;if("node_const"==n1.type&&
1==n1.value||"node_const"==len.type&&0===len.value)return len;if("node_const"==n1.type&&0===n1.value||"node_const"==n1.type&&0===n1.value)return n1;if("node_op"==len.type&&"op_neg"==len.value&&"node_op"==n1.type&&"op_neg"==n1.value)return node.children=[len.children[0],n1.children[0]],this.mayNotBeSimplified=!0,node;if("op_neg"==len.value&&"op_neg"!=n1.value)return node.type="node_op",node.value="op_neg",node.children=[this.createNode("node_op","op_mul",len.children[0],n1)],this.mayNotBeSimplified=
!0,node;if("op_neg"!=len.value&&"op_neg"==n1.value)return node.type="node_op",node.value="op_neg",node.children=[this.createNode("node_op","op_mul",len,n1.children[0])],this.mayNotBeSimplified=!0,node;if("op_div"==len.value&&"node_const"==len.children[0].type&&1==len.children[0].value)return node.type="node_op",node.value="op_div",node.children=[n1,len.children[1]],this.mayNotBeSimplified=!0,node;if("op_div"==n1.value&&"node_const"==n1.children[0].type&&1==n1.children[0].value)return node.type="node_op",
node.value="op_div",node.children=[len,n1.children[1]],this.mayNotBeSimplified=!0,node;if("node_const"!=len.type&&"node_const"==n1.type||"node_const"!=len.type&&"node_op"==n1.type&&"op_neg"==n1.value&&"node_const"==n1.children[0].type||"node_op"==len.type&&"op_execfun"!=len.value&&("node_var"==n1.type||"node_op"==n1.type&&"op_execfun"==n1.value)||"node_op"!=len.type&&"node_op"==n1.type&&"op_neg"==n1.value&&"node_var"==n1.children[0].type)return node.children=[n1,len],this.mayNotBeSimplified=!0,node;
if("node_const"!=len.type&&"node_op"==n1.type&&("op_mul"==n1.value||"op_div"==n1.value)&&"node_const"==n1.children[0].type)return i=n1.children[0],n1.children[0]=len,node.children=[i,n1],this.mayNotBeSimplified=!0,node;if("node_const"!=n1.type&&"node_op"==len.type&&"op_mul"==len.value&&"node_const"==len.children[0].type)return node.children=[len.children[0],this.createNode("node_op","op_mul",len.children[1],n1)],this.mayNotBeSimplified=!0,node;if("node_const"==len.type&&"node_const"==n1.type)return len.value*=
n1.value,len;if("node_const"==len.type&&"node_op"==n1.type&&("op_mul"==n1.value||"op_div"==n1.value)&&"node_const"==n1.children[0].type)return n1.children[0].value*=len.value,n1;len.hash=this.parser.compile(len);n1.hash=this.parser.compile(n1);if(len.hash===n1.hash)return node.value="op_exp",node.children[1]=this.createNode("node_const",2),node;if("node_const"==len.type&&"node_op"==n1.type&&("op_mul"==n1.value||"op_div"==n1.value)&&"node_const"==n1.children[0].type)return n1.children[0].value*=len.value,
n1;if("node_op"==n1.type&&"op_exp"==n1.value&&(len.hash||(len.hash=this.parser.compile(len)),n1.children[0].hash||(n1.children[0].hash=this.parser.compile(n1.children[0])),len.hash===n1.children[0].hash))return n1.children[1]=this.createNode("node_op","op_add",n1.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,n1;if("node_op"==len.type&&"op_exp"==len.value&&"node_op"==n1.type&&"op_exp"==n1.value&&(len.children[0].hash=this.parser.compile(len.children[0]),n1.children[0].hash=
this.parser.compile(n1.children[0]),len.children[0].hash===n1.children[0].hash))return len.children[1]=this.createNode("node_op","op_add",len.children[1],n1.children[1]),this.mayNotBeSimplified=!0,len;break;case "op_sub":len=node.children[0];n1=node.children[1];if("node_const"==len.type&&0===len.value)return node.value="op_neg",node.children[0]=n1,node;if("node_const"==n1.type&&0===n1.value)return len;if("node_const"==len.type&&"node_const"==n1.type&&len.value==n1.value||"node_var"==len.type&&"node_var"==
n1.type&&len.value==n1.value)return this.createNode("node_const",0);if("node_const"==len.type&&"node_const"==n1.type)return len.value-=n1.value,len;if("node_op"==len.type&&"op_mul"==len.value&&"node_op"==n1.type&&"op_mul"==n1.value&&(len.children[1].hash=this.parser.compile(len.children[1]),n1.children[1].hash=this.parser.compile(n1.children[1]),len.children[1].hash===n1.children[1].hash))return node.value="op_mul",node.children=[this.createNode("node_op","op_sub",len.children[0],n1.children[0]),
len.children[1]],this.mayNotBeSimplified=!0,node;if("node_op"==len.type&&"op_mul"==len.value&&(len.children[1].hash=this.parser.compile(len.children[1]),n1.hash=this.parser.compile(n1),len.children[1].hash===n1.hash))return node.value="op_mul",node.children=[this.createNode("node_op","op_sub",len.children[0],this.createNode("node_const",1)),n1],this.mayNotBeSimplified=!0,node;if("node_op"==n1.type&&"op_mul"==n1.value&&(n1.children[1].hash=this.parser.compile(n1.children[1]),len.hash=this.parser.compile(len),
n1.children[1].hash===len.hash))return node.value="op_mul",node.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),n1.children[0]),len],this.mayNotBeSimplified=!0,node;break;case "op_neg":len=node.children[0];if("node_const"==len.type&&0===len.value)return len;if("node_op"==len.type&&"op_neg"==len.value)return len.children[0];break;case "op_div":len=node.children[0];n1=node.children[1];if("node_const"==len.type&&"node_const"==n1.type&&len.value==n1.value&&0!==len.value)return len.value=
1,len;if("node_const"==len.type&&0===len.value&&"node_const"==n1.type&&0!==n1.value)return len.value=0,len;if("node_const"==len.type&&0===len.value&&("node_op"==n1.type||"node_var"==n1.type))return node.type="node_const",node.value=0,node;if("node_var"==len.type&&"node_var"==n1.type&&len.value==n1.value)return this.createNode("node_const",1);if("node_const"==len.type&&0!==len.value&&"node_const"==n1.type&&0===n1.value)return len.value=0<len.value?Infinity:-Infinity,len;if("node_op"==len.type&&"op_neg"==
len.value&&"node_op"==n1.type&&"op_neg"==n1.value)return node.children=[len.children[0],n1.children[0]],this.mayNotBeSimplified=!0,node;if("op_neg"==len.value&&"op_neg"!=n1.value)return node.type="node_op",node.value="op_neg",node.children=[this.createNode("node_op","op_div",len.children[0],n1)],this.mayNotBeSimplified=!0,node;if("op_neg"!=len.value&&"op_neg"==n1.value)return node.type="node_op",node.value="op_neg",node.children=[this.createNode("node_op","op_div",len,n1.children[0])],this.mayNotBeSimplified=
!0,node;if("node_op"==len.type&&"op_exp"==len.value&&(n1.hash||(n1.hash=this.parser.compile(n1)),len.children[0].hash||(len.children[0].hash=this.parser.compile(len.children[0])),n1.hash===len.children[0].hash))return len.children[1]=this.createNode("node_op","op_sub",len.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,len;if("node_const"!=n1.type&&"node_op"==len.type&&"op_mul"==len.value&&"node_const"==len.children[0].type)return node.value="op_mul",node.children=[len.children[0],
this.createNode("node_op","op_div",len.children[1],n1)],this.mayNotBeSimplified=!0,node;if("node_op"==len.type&&"op_exp"==len.value&&"node_op"==n1.type&&"op_exp"==n1.value&&(len.children[0].hash=this.parser.compile(len.children[0]),n1.children[0].hash=this.parser.compile(n1.children[0]),len.children[0].hash===n1.children[0].hash))return len.children[1]=this.createNode("node_op","op_sub",len.children[1],n1.children[1]),this.mayNotBeSimplified=!0,len;break;case "op_exp":len=node.children[0];n1=node.children[1];
if("node_const"==n1.type&&0===n1.value)return n1.value=1,n1;if("node_const"==n1.type&&1==n1.value||"node_const"==len.type&&1==len.value||"node_const"==len.type&&0===len.value&&"node_const"==n1.type&&0!==n1.value)return len;if("node_op"==len.type&&"op_exp"==len.value)return node.children=[len.children[0],this.createNode("node_op","op_mul",len.children[1],n1)],node}switch(node.value){case "op_add":len=node.children[0];n1=node.children[1];if("node_const"==len.type&&"node_const"==n1.type&&len.value==
n1.value)return len.value+=n1.value,len;if("node_var"==len.type&&"node_var"==n1.type&&len.value==n1.value){node.children[0]=this.createNode("node_const",2);node.value="op_mul";break}if("node_op"==len.type&&"op_neg"==len.value){node.value="op_sub";node.children[0]=n1;node.children[1]=len.children[0];this.mayNotBeSimplified=!0;break}if("node_op"==n1.type&&"op_neg"==n1.value){node.value="op_sub";node.children[1]=n1.children[0];this.mayNotBeSimplified=!0;break}if("node_op"==len.type&&"op_mul"==len.value&&
"node_op"==n1.type&&"op_mul"==n1.value&&(len.children[1].hash=this.parser.compile(len.children[1]),n1.children[1].hash=this.parser.compile(n1.children[1]),len.children[1].hash===n1.children[1].hash)){node.value="op_mul";node.children=[this.createNode("node_op","op_add",len.children[0],n1.children[0]),len.children[1]];this.mayNotBeSimplified=!0;break}if("node_op"==len.type&&"op_mul"==len.value&&(len.children[1].hash=this.parser.compile(len.children[1]),n1.hash=this.parser.compile(n1),len.children[1].hash===
n1.hash)){node.value="op_mul";node.children=[this.createNode("node_op","op_add",len.children[0],this.createNode("node_const",1)),n1];this.mayNotBeSimplified=!0;break}"node_op"==n1.type&&"op_mul"==n1.value&&(n1.children[1].hash=this.parser.compile(n1.children[1]),len.hash=this.parser.compile(len),n1.children[1].hash===len.hash&&(node.value="op_mul",node.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),n1.children[0]),len],this.mayNotBeSimplified=!0));break;case "op_sub":n1=
node.children[1];"node_op"==n1.type&&"op_neg"==n1.value&&(node.value="op_add",node.children[1]=n1.children[0],this.mayNotBeSimplified=!0);break;case "op_execfun":return this.simplifyElementary(node)}return node},simplifyElementary:function(node){var arg=node.children[1];if(0==arg.length)return node;switch(node.children[0].value){case "sin":case "tan":if("node_const"==arg[0].type&&0===arg[0].value){node.type="node_const";node.value=0;break}if("node_var"==arg[0].type&&"PI"==arg[0].value){node.type=
"node_const";node.value=0;break}"node_op"==arg[0].type&&"op_mul"==arg[0].value&&"node_const"==arg[0].children[0].type&&0===arg[0].children[0].value%1&&"node_var"==arg[0].children[1].type&&"PI"==arg[0].children[1].value&&(node.type="node_const",node.value=0);break;case "cos":if("node_const"==arg[0].type&&0===arg[0].value){node.type="node_const";node.value=1;break}"node_var"==arg[0].type&&"PI"==arg[0].value&&(node.type="node_op",node.value="op_neg",node.children=[this.createNode("node_const",1)]);break;
case "exp":"node_const"==arg[0].type&&0===arg[0].value&&(node.type="node_const",node.value=1);break;case "pow":"node_const"==arg[1].type&&0===arg[1].value&&(node.type="node_const",node.value=1)}return node}});exports.default=global.default.CA}
//# sourceMappingURL=module$node_modules$$mentatcollective$jsxgraph$src$parser$ca.js.map
