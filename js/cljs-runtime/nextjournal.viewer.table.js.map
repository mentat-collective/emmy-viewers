{"version":3,"sources":["nextjournal/viewer/table.cljs"],"mappings":"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","names":["nextjournal.viewer.table/viewer","lines","with-let77527","reagent.ratom/with-let-values","temp__5757__auto__","reagent.ratom/*ratom-context*","c__62628__auto__","reagent.debug/has-console","reagent.debug/tracking","reagent.debug/track-console","js/console","init77528","cljs.core/not","res77529","current-page","reagent.core.atom","header","cljs.core/first","rest","cljs.core/rest","count","cljs.core/count","items-per-page","pages","js/Math.floor","page-count","showing","x__4339__auto__","y__4340__auto__","rows","cljs.core.take","items","cljs.core.drop","cljs.core/deref","nextjournal.viewer/html","cljs.core.map_indexed","i","val","row","cljs.core/even?","j","cljs.core._EQ_","cljs.core.swap_BANG_","cljs.core/dec","nextjournal.ui.components.icon/view","cljs.core/inc","nextjournal.viewer/register-viewer!","nextjournal.devcards/register-devcard*","cljs.core.assoc","nextjournal.viewer/inspect","nextjournal.viewer/view-as"],"sourcesContent":["(ns nextjournal.viewer.table\n  (:require [nextjournal.ui.components.icon :as icon]\n            [nextjournal.viewer :as v]\n            [reagent.core :as r]\n            [nextjournal.devcards :as dc]))\n\n(defn viewer [lines]\n  (r/with-let [current-page (r/atom 0)]\n    (let [header (first lines)\n          rest (rest lines)\n          count (count rest)\n          items-per-page 10\n          pages (js/Math.floor (/ count items-per-page))\n          page-count (inc pages)\n          showing (min count items-per-page)\n          rows (take showing rest)\n          items (take items-per-page (drop (* @current-page items-per-page) rest))]\n      (v/html\n       [:div.monospace.rounded.border.border-color-black-10.relative\n        {:style {:font-size 13 :padding-bottom 24}}\n        [:div.overflow-auto (when (< 1 page-count) {:style {:min-height 265}})\n         [:table.nj-viewer-table\n          {:cell-padding 0 :cell-spacing 0 :style {:min-width \"100%\" :font-size 13}}\n          [:thead\n           [:tr\n            (map-indexed (fn [i val]\n                           ^{:key (str \"header-\" i)}\n                           [:th.text-left.whitespace-no-wrap.px-2.border-b.border-solid.border-color-black-05\n                            {:style {:height 24 :line-height \"24px\"}\n                             :class (when-not (zero? i) \"border-l\")}\n                            val])\n                         header)]]\n          [:tbody\n           (map-indexed (fn [i row]\n                          ^{:key (str \"row-\" i)}\n                          [:tr\n                           {:class (str (when (even? i) \"bg-near-white \")\n                                        \"hover-bg-light-silver\")}\n                           (map-indexed (fn [j val]\n                                          ^{:key (str \"datum-\" i \"-\" j)}\n                                          [:td.px-2.text-left.whitespace-no-wrap.border-color-black-05\n                                           {:style {:height 24 :line-height \"14px\"}\n                                            :class (str (when-not (= i (dec showing)) \"border-b \")\n                                                        (when-not (zero? j) \"border-l\"))}\n                                           val])\n                                        row)])\n                        items)]]]\n        [:div.flex.items-center.justify-between.absolute.left-0.bottom-0.w-full.px-2.border-t.border-solid.border-color-black-05.bg-white\n         {:style {:height 24 :line-height \"24px\" :font-size 10 :border-bottom-left-radius 3 :border-top-right-radius 3}}\n         [:div.black-40\n          (str count \" items\")]\n         (when (> count items-per-page)\n           [:div.flex.items-center\n            [:span.black-40.mr-3 \"showing page \" (inc @current-page) \"/\" page-count]\n            [:button.nj-button--unstyled.flex.items-center.cursor-pointer\n             {:style {:padding \"0 4px\"}\n              :disabled (zero? @current-page)\n              :on-click #(swap! current-page dec)}\n             [icon/view \"ChevronLeft\" {:size 16 :class \"fill-teal dim\"}]]\n            [:button.nj-button--unstyled.flex.items-center.cursor-pointer\n             {:style {:padding \"0 0 0 4px\"}\n              :disabled (= @current-page pages)\n              :on-click #(swap! current-page inc)}\n             [icon/view \"ChevronRight\" {:size 16 :class \"fill-teal dim\"}]]])]]))))\n\n(v/register-viewer! :table viewer)\n\n(dc/defcard table-2\n  [v/inspect (v/view-as :table [{:a 1 :b 2 :c 3}\n                                {:a 1 :b 2 :c 3}])])\n"]}