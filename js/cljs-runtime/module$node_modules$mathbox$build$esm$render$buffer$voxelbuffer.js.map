{
"version":3,
"file":"module$node_modules$mathbox$build$esm$render$buffer$voxelbuffer.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/render/buffer/voxelbuffer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$render$buffer$voxelbuffer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VoxelBuffer = void 0;\n\nvar UData = _interopRequireWildcard(require(\"../../util/data.js\"));\n\nvar _databuffer = require(\"./databuffer.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n//\n// 3D array\n//\nclass VoxelBuffer extends _databuffer.DataBuffer {\n  build(_options) {\n    super.build();\n    this.pad = {\n      x: 0,\n      y: 0,\n      z: 0\n    };\n    return this.streamer = this.generate(this.data);\n  }\n\n  setActive(i, j, k) {\n    let ref;\n    return [this.pad.x, this.pad.y, this.pad.z] = Array.from(ref = [Math.max(0, this.width - i), Math.max(0, this.height - j), Math.max(0, this.depth - k)]), ref;\n  }\n\n  fill() {\n    let j, k, l, repeat;\n    const {\n      callback\n    } = this;\n\n    if (typeof callback.reset === \"function\") {\n      callback.reset();\n    }\n\n    const {\n      emit,\n      skip,\n      count,\n      done,\n      reset\n    } = this.streamer;\n    reset();\n    const n = this.width;\n    const m = this.height;\n    const padX = this.pad.x;\n    const padY = this.pad.y;\n    const limit = this.samples - this.pad.z * n * m;\n    let i = j = k = l = 0;\n\n    if (padX > 0 || padY > 0) {\n      while (!done() && l < limit) {\n        l++;\n        repeat = callback(emit, i, j, k);\n\n        if (++i === n - padX) {\n          skip(padX);\n          l += padX;\n          i = 0;\n\n          if (++j === m - padY) {\n            skip(n * padY);\n            l += n * padY;\n            j = 0;\n            k++;\n          }\n        }\n\n        if (repeat === false) {\n          break;\n        }\n      }\n    } else {\n      while (!done() && l < limit) {\n        l++;\n        repeat = callback(emit, i, j, k);\n\n        if (++i === n) {\n          i = 0;\n\n          if (++j === m) {\n            j = 0;\n            k++;\n          }\n        }\n\n        if (repeat === false) {\n          break;\n        }\n      }\n    }\n\n    return Math.floor(count() / this.items);\n  }\n\n  through(callback, target) {\n    // must be identical sized buffers w/ identical active areas\n    let dst, j, k, src;\n    const {\n      consume,\n      done,\n      skip\n    } = src = this.streamer;\n    const {\n      emit\n    } = dst = target.streamer;\n    let i = j = k = 0;\n\n    let pipe = () => consume((x, y, z, w) => callback(emit, x, y, z, w, i, j, k));\n\n    pipe = UData.repeatCall(pipe, this.items);\n    return () => {\n      let l;\n      src.reset();\n      dst.reset();\n      const n = this.width;\n      const m = this.height;\n      const padX = this.pad.x;\n      const padY = this.pad.y;\n      const limit = this.samples - this.pad.z * n * m;\n      i = j = k = l = 0;\n\n      if (padX > 0 || padY > 0) {\n        while (!done() && l < limit) {\n          l++;\n          pipe();\n\n          if (++i === n - padX) {\n            skip(padX);\n            i = 0;\n\n            if (++j === m - padY) {\n              skip(n * padY);\n              j = 0;\n              k++;\n            }\n          }\n        }\n      } else {\n        while (!done() && l < limit) {\n          l++;\n          pipe();\n\n          if (++i === n) {\n            i = 0;\n\n            if (++j === m) {\n              j = 0;\n              k++;\n            }\n          }\n        }\n      }\n\n      return src.count();\n    };\n  }\n\n}\n\nexports.VoxelBuffer = VoxelBuffer;\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","VoxelBuffer","UData","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_databuffer","DataBuffer","build","_options","pad","x","y","z","streamer","generate","data","setActive","i","j","k","ref","Array","from","Math","max","width","height","depth","fill","l","repeat","callback","reset","emit","skip","count","done","n","m","padX","padY","limit","samples","floor","items","through","target","dst","src","consume","pipe","w","repeatCall"]
}
