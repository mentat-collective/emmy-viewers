shadow$provide.module$node_modules$$motionone$dom$dist$gestures$scroll$index_cjs=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var tslib=require("module$node_modules$tslib$tslib"),index=require("module$node_modules$$motionone$dom$dist$gestures$resize$index_cjs"),info=require("module$node_modules$$motionone$dom$dist$gestures$scroll$info_cjs"),onScrollHandler=require("module$node_modules$$motionone$dom$dist$gestures$scroll$on_scroll_handler_cjs");const scrollListeners=
new WeakMap,resizeListeners=new WeakMap,onScrollHandlers=new WeakMap;exports.scroll=function(onScroll,_a$jscomp$0={}){var {container=document.documentElement}=_a$jscomp$0;_a$jscomp$0=tslib.__rest(_a$jscomp$0,["container"]);let containerHandlers=onScrollHandlers.get(container);containerHandlers||(containerHandlers=new Set,onScrollHandlers.set(container,containerHandlers));var info$1=info.createScrollInfo();const containerHandler=onScrollHandler.createOnScrollHandler(container,onScroll,info$1,_a$jscomp$0);
containerHandlers.add(containerHandler);scrollListeners.has(container)||(_a$jscomp$0=()=>{const time=performance.now();for(const handler of containerHandlers)handler.measure();for(const handler of containerHandlers)handler.update(time);for(const handler of containerHandlers)handler.notify()},scrollListeners.set(container,_a$jscomp$0),info$1=container===document.documentElement?window:container,window.addEventListener("resize",_a$jscomp$0,{passive:!0}),container!==document.documentElement&&resizeListeners.set(container,
index.resize(container,_a$jscomp$0)),info$1.addEventListener("scroll",_a$jscomp$0,{passive:!0}));_a$jscomp$0=scrollListeners.get(container);const onLoadProcesss=requestAnimationFrame(_a$jscomp$0);return()=>{var _a;"function"!==typeof onScroll&&onScroll.stop();cancelAnimationFrame(onLoadProcesss);var containerHandlers=onScrollHandlers.get(container);containerHandlers&&(containerHandlers.delete(containerHandler),containerHandlers.size||(containerHandlers=scrollListeners.get(container),scrollListeners.delete(container),
containerHandlers&&((container===document.documentElement?window:container).removeEventListener("scroll",containerHandlers),null===(_a=resizeListeners.get(container))||void 0===_a?void 0:_a(),window.removeEventListener("resize",containerHandlers))))}}}
//# sourceMappingURL=module$node_modules$$motionone$dom$dist$gestures$scroll$index_cjs.js.map
