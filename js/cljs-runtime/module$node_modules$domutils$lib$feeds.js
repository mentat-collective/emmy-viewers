shadow$provide.module$node_modules$domutils$lib$feeds=function(global,require,module,exports){function getAtomFeed(feedRoot){var _a$jscomp$0;feedRoot=feedRoot.children;var feed={type:"atom",items:(0,legacy_1.getElementsByTagName)("entry",feedRoot).map(function(item){var _a,children=item.children;item={media:getMediaElements(children)};addConditionally(item,"id","id",children);addConditionally(item,"title","title",children);var href=null===(_a=getOneElement("link",children))||void 0===_a?void 0:_a.attribs.href;
href&&(item.link=href);if(_a=fetch("summary",children)||fetch("content",children))item.description=_a;if(_a=fetch("updated",children))item.pubDate=new Date(_a);return item})};addConditionally(feed,"id","id",feedRoot);addConditionally(feed,"title","title",feedRoot);var href$jscomp$0=null===(_a$jscomp$0=getOneElement("link",feedRoot))||void 0===_a$jscomp$0?void 0:_a$jscomp$0.attribs.href;href$jscomp$0&&(feed.link=href$jscomp$0);addConditionally(feed,"description","subtitle",feedRoot);if(_a$jscomp$0=
fetch("updated",feedRoot))feed.updated=new Date(_a$jscomp$0);addConditionally(feed,"author","email",feedRoot,!0);return feed}function getRssFeed(feedRoot){var _a,_b,childs=null!==(_b=null===(_a=getOneElement("channel",feedRoot.children))||void 0===_a?void 0:_a.children)&&void 0!==_b?_b:[];feedRoot={type:feedRoot.name.substr(0,3),id:"",items:(0,legacy_1.getElementsByTagName)("item",feedRoot.children).map(function(item){var children=item.children;item={media:getMediaElements(children)};addConditionally(item,
"id","guid",children);addConditionally(item,"title","title",children);addConditionally(item,"link","link",children);addConditionally(item,"description","description",children);if(children=fetch("pubDate",children))item.pubDate=new Date(children);return item})};addConditionally(feedRoot,"title","title",childs);addConditionally(feedRoot,"link","link",childs);addConditionally(feedRoot,"description","description",childs);if(_a=fetch("lastBuildDate",childs))feedRoot.updated=new Date(_a);addConditionally(feedRoot,
"author","managingEditor",childs,!0);return feedRoot}function getMediaElements(where){return(0,legacy_1.getElementsByTagName)("media:content",where).map(function(elem){elem=elem.attribs;for(var media={medium:elem.medium,isDefault:!!elem.isDefault},_i=0,MEDIA_KEYS_STRING_1=MEDIA_KEYS_STRING;_i<MEDIA_KEYS_STRING_1.length;_i++){var attrib=MEDIA_KEYS_STRING_1[_i];elem[attrib]&&(media[attrib]=elem[attrib])}_i=0;for(MEDIA_KEYS_STRING_1=MEDIA_KEYS_INT;_i<MEDIA_KEYS_STRING_1.length;_i++)attrib=MEDIA_KEYS_STRING_1[_i],
elem[attrib]&&(media[attrib]=parseInt(elem[attrib],10));elem.expression&&(media.expression=elem.expression);return media})}function getOneElement(tagName,node){return(0,legacy_1.getElementsByTagName)(tagName,node,!0,1)[0]}function fetch(tagName,where,recurse){void 0===recurse&&(recurse=!1);return(0,stringify_1.textContent)((0,legacy_1.getElementsByTagName)(tagName,where,recurse,1)).trim()}function addConditionally(obj,prop,tagName,where,recurse){void 0===recurse&&(recurse=!1);(tagName=fetch(tagName,
where,recurse))&&(obj[prop]=tagName)}function isValidFeed(value){return"rss"===value||"feed"===value||"rdf:RDF"===value}Object.defineProperty(exports,"__esModule",{value:!0});exports.getFeed=void 0;var stringify_1=require("module$node_modules$domutils$lib$stringify"),legacy_1=require("module$node_modules$domutils$lib$legacy");exports.getFeed=function(doc){return(doc=getOneElement(isValidFeed,doc))?"feed"===doc.name?getAtomFeed(doc):getRssFeed(doc):null};var MEDIA_KEYS_STRING=["url","type","lang"],
MEDIA_KEYS_INT="fileSize bitrate framerate samplingrate channels duration height width".split(" ")}
//# sourceMappingURL=module$node_modules$domutils$lib$feeds.js.map
