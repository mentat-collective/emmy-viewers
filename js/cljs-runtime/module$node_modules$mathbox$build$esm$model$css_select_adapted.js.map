{
"version":3,
"file":"module$node_modules$mathbox$build$esm$model$css_select_adapted.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/model/css-select-adapted.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$model$css_select_adapted\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compile = exports.selectAll = void 0;\n\nvar CSSselect = _interopRequireWildcard(require(\"css-select\"));\n\nvar _cssSelectAdapter = _interopRequireDefault(require(\"./css-select-adapter.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/**\n * Returns a filtered array of elements which are contained in context.\n */\nconst filter = (nodes, context) => {\n  const out = [];\n  const contextNodes = Array.isArray(context) ? context : [context];\n  const contextSet = new Set(contextNodes);\n\n  for (const node of Array.from(nodes)) {\n    let ancestor = node;\n\n    while (ancestor != null) {\n      if (contextSet.has(ancestor)) {\n        out.push(node);\n        break;\n      }\n\n      ancestor = _cssSelectAdapter.default.getParent(ancestor);\n    }\n  }\n\n  return out;\n};\n\nconst getRoot = element => {\n  let ancestor = element;\n\n  while (_cssSelectAdapter.default.getParent(ancestor) !== null) {\n    ancestor = _cssSelectAdapter.default.getParent(ancestor);\n  }\n\n  return ancestor;\n};\n/**\n * Finds elements in the given context matching the given css-selector.\n *\n * Does NOT throw if css query is invalid.\n *\n * @param {string} query A css selector\n * @param {*} context Element or array of elements\n * @returns All elements in context matching query\n */\n\n\nconst selectAll = (query, context) => {\n  try {\n    /**\n     * Try/catch to tolerate invalid css queries.\n     * See https://gitgud.io/unconed/mathbox/-/issues/23\n     */\n    CSSselect.compile(query);\n  } catch (err) {\n    return [];\n  }\n  /**\n   * Delegate to css-select, except always make queries relative to root and\n   * filter matches outside of context ourselves. css-select does not currently\n   * handle contextualized queries relative to root correctly.\n   *\n   * See https://github.com/fb55/css-select/issues/709\n   */\n\n\n  const isArray = Array.isArray(context);\n  if (isArray && context.length === 0) return [];\n  const root = getRoot(isArray ? context[0] : context);\n  const matches = CSSselect.selectAll(query, root, {\n    adapter: _cssSelectAdapter.default\n  });\n  if (context) return filter(matches, context);\n  return matches;\n};\n\nexports.selectAll = selectAll;\n\nconst compile = query => {\n  try {\n    /**\n     * Try/catch to tolerate invalid css queries.\n     * See https://gitgud.io/unconed/mathbox/-/issues/23\n     */\n    return CSSselect.compile(query, {\n      adapter: _cssSelectAdapter.default\n    });\n  } catch (err) {\n    return () => false;\n  }\n};\n\nexports.compile = compile;\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","compile","selectAll","CSSselect","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_cssSelectAdapter","_interopRequireDefault","query","context","err","isArray","Array","length","ancestor","element","getParent","matches","adapter","out","contextNodes","contextSet","Set","node","from","push"]
}
