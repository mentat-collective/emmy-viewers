{
"version":3,
"file":"module$node_modules$shadergraph$src$block$callback.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/shadergraph/src/block/callback.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$shadergraph$src$block$callback\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Callback = void 0;\n\nvar _graph = require(\"../graph\");\n\nvar _block = require(\"./block\");\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\n/*\n  Re-use a subgraph as a callback\n*/\nclass Callback extends _block.Block {\n  constructor(graph) {\n    super(true);\n    this.graph = graph;\n    this.construct();\n  }\n\n  refresh() {\n    super.refresh();\n    return delete this.subroutine;\n  }\n\n  clone() {\n    return new Callback(this.graph);\n  }\n\n  makeOutlets() {\n    let outlet;\n    this.make();\n    const outlets = [];\n    let ins = [];\n    let outs = []; // Pass-through existing callbacks\n    // Collect open inputs/outputs\n\n    const handle = (outlet, list) => {\n      if (outlet.meta.callback) {\n        if (outlet.inout === _graph.Graph.IN) {\n          // Dupe outlet and create two-way link between cloned outlets\n          const dupe = outlet.dupe();\n\n          if (dupe.meta.child == null) {\n            dupe.meta.child = outlet;\n          }\n\n          outlet.meta.parent = dupe;\n          return outlets.push(dupe);\n        }\n      } else {\n        return list.push(outlet.type);\n      }\n    };\n\n    for (outlet of Array.from(this.graph.inputs())) {\n      handle(outlet, ins);\n    }\n\n    for (outlet of Array.from(this.graph.outputs())) {\n      handle(outlet, outs);\n    } // Merge inputs/outputs into new callback signature\n\n\n    ins = ins.join(\",\");\n    outs = outs.join(\",\");\n    const type = `(${ins})(${outs})`;\n    outlets.push({\n      name: \"callback\",\n      type,\n      inout: _graph.Graph.OUT,\n      meta: {\n        callback: true,\n        def: this.subroutine.main\n      }\n    });\n    return outlets;\n  }\n\n  make() {\n    return this.subroutine = this.graph.compile(this.namespace);\n  }\n\n  export(layout, depth) {\n    if (!layout.visit(this.namespace, depth)) {\n      return;\n    }\n\n    this._link(this.subroutine, layout, depth);\n\n    return this.graph.export(layout, depth);\n  }\n\n  call(program, depth) {\n    return this._require(this.subroutine, program, depth);\n  }\n\n  callback(layout, depth, name, external, outlet) {\n    this._include(this.subroutine, layout, depth);\n\n    return this._callback(this.subroutine, layout, depth, name, external, outlet);\n  }\n\n}\n\nexports.Callback = Callback;\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","Callback","_graph","_block","Block","constructor","graph","construct","refresh","subroutine","clone","makeOutlets","outlet","make","outlets","ins","outs","handle","list","meta","callback","inout","Graph","IN","dupe","child","parent","push","type","Array","from","inputs","outputs","join","name","OUT","def","main","compile","namespace","export","layout","depth","visit","_link","call","program","_require","external","_include","_callback"]
}
