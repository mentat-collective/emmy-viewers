{
"version":3,
"file":"module$node_modules$mathbox$build$esm$render$buffer$texture$rendertarget.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/render/buffer/texture/rendertarget.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$render$buffer$texture$rendertarget\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RenderTarget = void 0;\n\nvar _constants = require(\"three/src/constants.js\");\n\nvar _Vector = require(\"three/src/math/Vector2.js\");\n\nvar _WebGLRenderTarget = require(\"three/src/renderers/WebGLRenderTarget.js\");\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS202: Simplify dynamic range loops\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\n/*\nVirtual RenderTarget that cycles through multiple frames\nProvides easy access to past rendered frames\n@reads[] and @write contain WebGLRenderTargets whose internal pointers are rotated automatically\n*/\nclass RenderTarget {\n  constructor(gl, width, height, frames, options) {\n    this.gl = gl;\n\n    if (options == null) {\n      options = {};\n    }\n\n    if (options.minFilter == null) {\n      options.minFilter = _constants.NearestFilter;\n    }\n\n    if (options.magFilter == null) {\n      options.magFilter = _constants.NearestFilter;\n    }\n\n    if (options.format == null) {\n      options.format = _constants.RGBAFormat;\n    }\n\n    if (options.type == null) {\n      options.type = _constants.UnsignedByteType;\n    }\n\n    this.options = options;\n    this.width = width || 1;\n    this.height = height || 1;\n    this.frames = frames || 1;\n    this.buffers = this.frames + 1;\n    this.build();\n  }\n\n  build() {\n    let i;\n\n    const make = () => new _WebGLRenderTarget.WebGLRenderTarget(this.width, this.height, this.options);\n\n    this.targets = (() => {\n      let asc, end;\n      const result = [];\n\n      for (i = 0, end = this.buffers, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n        result.push(make());\n      }\n\n      return result;\n    })();\n\n    const acc = [];\n    this.targets.forEach(target => acc.push(target.texture));\n    this.reads = acc;\n    this.write = this.targets[this.buffers - 1]; // Texture access uniforms\n\n    this.uniforms = {\n      dataResolution: {\n        type: \"v2\",\n        value: new _Vector.Vector2(1 / this.width, 1 / this.height)\n      },\n      dataTexture: {\n        type: \"t\",\n        value: this.reads[0]\n      },\n      dataTextures: {\n        type: \"tv\",\n        value: this.reads\n      }\n    };\n  }\n\n  cycle() {\n    this.targets.unshift(this.targets.pop());\n    this.write = this.targets[this.buffers - 1];\n    this.reads.unshift(this.reads.pop());\n    this.uniforms.dataTexture.value = this.reads[0];\n  }\n\n  warmup(callback) {\n    return (() => {\n      const result = [];\n\n      for (let i = 0, end = this.buffers, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n        callback(this.write);\n        result.push(this.cycle());\n      }\n\n      return result;\n    })();\n  }\n\n  dispose() {\n    for (const target of Array.from(this.targets)) {\n      target.dispose();\n    }\n\n    return this.targets = this.reads = this.write = null;\n  }\n\n}\n\nexports.RenderTarget = RenderTarget;\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","RenderTarget","_constants","_Vector","_WebGLRenderTarget","constructor","gl","width","height","frames","options","minFilter","NearestFilter","magFilter","format","RGBAFormat","type","UnsignedByteType","buffers","build","i","make","WebGLRenderTarget","targets","asc","end","result","push","acc","forEach","target","texture","reads","write","uniforms","dataResolution","Vector2","dataTexture","dataTextures","cycle","unshift","pop","warmup","callback","dispose","Array","from"]
}
