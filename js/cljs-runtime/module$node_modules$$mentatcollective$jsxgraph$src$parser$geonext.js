shadow$provide.module$node_modules$$mentatcollective$jsxgraph$src$parser$geonext=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;global=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$jxg"));var _constants=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$base$constants")),_type=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$utils$type"));
global.default.GeonextParser={replacePow:function(te){var pos,previousIndex;te=te.replace(/(\s*)\^(\s*)/g,"^");var leftop=te.indexOf("^");for(previousIndex=-1;0<=leftop&&leftop<te.length-1;){if(previousIndex===leftop)throw Error("JSXGraph: Error while parsing expression '"+te+"'");previousIndex=leftop;var rightop=te.slice(0,leftop);var right=te.slice(leftop+1);if(")"===rightop.charAt(rightop.length-1)){var count=1;for(pos=rightop.length-2;0<=pos&&0<count;){var c=rightop.charAt(pos);")"===c?count++:
"("===c&&--count;--pos}if(0===count){leftop="";count=rightop.substring(0,pos+1);for(c=pos;0<=c&&count.substr(c,1).match(/([\w.]+)/);)leftop=RegExp.$1+leftop,--c;leftop+=rightop.substring(pos+1,rightop.length);leftop=leftop.replace(/([()+*%^\-/\][])/g,"\\$1")}else throw Error("JSXGraph: Missing '(' in expression");}else leftop="[\\w\\.]+";if(right.match(/^([\w.]*\()/)){count=1;for(pos=RegExp.$1.length;pos<right.length&&0<count;)c=right.charAt(pos),")"===c?--count:"("===c&&(count+=1),pos+=1;if(0===
count)rightop=right.substring(0,pos),rightop=rightop.replace(/([()+*%^\-/[\]])/g,"\\$1");else throw Error("JSXGraph: Missing ')' in expression");}else rightop="[\\w\\.]+";leftop=new RegExp("("+leftop+")\\^("+rightop+")");te=te.replace(leftop,"pow($1,$2)");leftop=te.indexOf("^")}return te},replaceIf:function(te){var s="";var i=te.indexOf("If(");if(0>i)return te;for(te=te.replace(/""/g,"0");0<=i;){var left=te.slice(0,i);var right=te.slice(i+3);var count=1;var pos=0;for(te=i=-1;pos<right.length&&0<count;){var c=
right.charAt(pos);")"===c?--count:"("===c?count+=1:","===c&&1===count&&(0>i?i=pos:te=pos);pos+=1}count=right.slice(0,pos-1);right=right.slice(pos);if(0>i||0>te)return"";pos=count.slice(0,i);i=count.slice(i+1,te);te=count.slice(te+1);pos=this.replaceIf(pos);i=this.replaceIf(i);te=this.replaceIf(te);s+=left+"(("+pos+")?("+i+"):("+te+"))";te=right;i=te.indexOf("If(")}return s+right},replaceNameById:function(term,board,jc){var i,pos=0,funcs=["X","Y","L","V"],printId=function(id){return jc?"$('"+id+"')":
id};for(i=0;i<funcs.length;i++)for(pos=term.indexOf(funcs[i]+"(");0<=pos;){if(0<=pos){var end=term.indexOf(")",pos+2);if(0<=end){var elName=term.slice(pos+2,end);elName=elName.replace(/\\(['"])?/g,"$1");(elName=board.elementsByName[elName])&&(term=term.slice(0,pos+2)+(jc?"$('":"")+printId(elName.id)+term.slice(end))}}end=term.indexOf(")",pos+2);pos=term.indexOf(funcs[i]+"(",end)}for(pos=term.indexOf("Dist(");0<=pos;)0<=pos&&(end=term.indexOf(",",pos+5),0<=end&&(elName=term.slice(pos+5,end),elName=
elName.replace(/\\(['"])?/g,"$1"),(elName=board.elementsByName[elName])&&(term=term.slice(0,pos+5)+printId(elName.id)+term.slice(end)))),end=term.indexOf(",",pos+5),pos=term.indexOf(",",end),end=term.indexOf(")",pos+1),0<=end&&(elName=term.slice(pos+1,end),elName=elName.replace(/\\(['"])?/g,"$1"),(elName=board.elementsByName[elName])&&(term=term.slice(0,pos+1)+printId(elName.id)+term.slice(end))),end=term.indexOf(")",pos+1),pos=term.indexOf("Dist(",end);funcs=["Deg","Rad"];for(i=0;i<funcs.length;i++)for(pos=
term.indexOf(funcs[i]+"(");0<=pos;)0<=pos&&(end=term.indexOf(",",pos+4),0<=end&&(elName=term.slice(pos+4,end),elName=elName.replace(/\\(['"])?/g,"$1"),(elName=board.elementsByName[elName])&&(term=term.slice(0,pos+4)+printId(elName.id)+term.slice(end)))),end=term.indexOf(",",pos+4),pos=term.indexOf(",",end),end=term.indexOf(",",pos+1),0<=end&&(elName=term.slice(pos+1,end),elName=elName.replace(/\\(['"])?/g,"$1"),(elName=board.elementsByName[elName])&&(term=term.slice(0,pos+1)+printId(elName.id)+term.slice(end))),
end=term.indexOf(",",pos+1),pos=term.indexOf(",",end),end=term.indexOf(")",pos+1),0<=end&&(elName=term.slice(pos+1,end),elName=elName.replace(/\\(['"])?/g,"$1"),(elName=board.elementsByName[elName])&&(term=term.slice(0,pos+1)+printId(elName.id)+term.slice(end))),end=term.indexOf(")",pos+1),pos=term.indexOf(funcs[i]+"(",end);return term},replaceIdByObj:function(term){var expr=/(X|Y|L)\(([\w_]+)\)/g;term=term.replace(expr,"$('$2').$1()");expr=/(V)\(([\w_]+)\)/g;term=term.replace(expr,"$('$2').Value()");
expr=/(Dist)\(([\w_]+),([\w_]+)\)/g;term=term.replace(expr,"dist($('$2'), $('$3'))");expr=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g;term=term.replace(expr,"deg($('$2'),$('$3'),$('$4'))");expr=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g;term=term.replace(expr,"rad($('$1'),$('$2'),$('$3'))");expr=/N\((.+)\)/g;return term=term.replace(expr,"($1)")},geonext2JS:function(term,board){var i,from="Abs ACos ASin ATan Ceil Cos Exp Factorial Floor Log Max Min Random Round Sin Sqrt Tan Trunc".split(" "),to="abs acos asin atan ceil cos exp factorial floor log max min random round sin sqrt tan ceil".split(" ");
term=term.replace(/&lt;/g,"\x3c");term=term.replace(/&gt;/g,"\x3e");term=term.replace(/&amp;/g,"\x26");board=this.replaceNameById(term,board);board=this.replaceIf(board);board=this.replacePow(board);board=this.replaceIdByObj(board);for(i=0;i<from.length;i++)term=new RegExp(["(\\W|^)(",from[i],")"].join(""),"ig"),board=board.replace(term,["$1",to[i]].join(""));board=board.replace(/True/g,"true");board=board.replace(/False/g,"false");board=board.replace(/fasle/g,"false");board=board.replace(/Pi/g,"PI");
return board=board.replace(/"/g,"'")},findDependencies:function(me,term,board){var el;_type.default.exists(board)||(board=me.board);board=board.elementsByName;for(el in board)if(board.hasOwnProperty(el)&&el!==me.name)if(board[el].elementClass===_constants.default.OBJECT_CLASS_TEXT){if(!_type.default.evaluate(board[el].visProp.islabel)){var expr=el.replace(/\[/g,"\\[");expr=expr.replace(/\]/g,"\\]");expr=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+expr+")(,[\\w\\[\\]'_ ]+)*\\)","g");0<=term.search(expr)&&
board[el].addChild(me)}}else expr=el.replace(/\[/g,"\\["),expr=expr.replace(/\]/g,"\\]"),expr=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+expr+")(,[\\w\\[\\]'_ ]+)*\\)","g"),0<=term.search(expr)&&board[el].addChild(me)},gxt2jc:function(term,board){term=term.replace(/&lt;/g,"\x3c");term=term.replace(/&gt;/g,"\x3e");term=term.replace(/&amp;/g,"\x26");term=this.replaceNameById(term,board,!0);term=term.replace(/True/g,"true");term=term.replace(/False/g,"false");return term=term.replace(/fasle/g,"false")}};exports.default=
global.default.GeonextParser}
//# sourceMappingURL=module$node_modules$$mentatcollective$jsxgraph$src$parser$geonext.js.map
