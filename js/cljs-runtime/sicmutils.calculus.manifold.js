goog.provide('sicmutils.calculus.manifold');
/**
 * Generates a manifold family (a template for building manifolds) from the
 *   supplied `name-format`.
 * 
 *   Generated manifolds locally resemble Euclidean space (Rn) by default. You can
 *   optionally pass `'Complex` or `'Quaternion` to `over` to customize the field
 *   of the vector space that the manifold locally resembles at each point.
 * 
 *   NOTE: only `'Real` does anything as of 3.15.2021.
 */
sicmutils.calculus.manifold.make_manifold_family = (function sicmutils$calculus$manifold$make_manifold_family(var_args){
var G__81770 = arguments.length;
switch (G__81770) {
case 1:
return sicmutils.calculus.manifold.make_manifold_family.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
case 2:
return sicmutils.calculus.manifold.make_manifold_family.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(sicmutils.calculus.manifold.make_manifold_family.cljs$core$IFn$_invoke$arity$1 = (function (name_format){
return sicmutils.calculus.manifold.make_manifold_family.cljs$core$IFn$_invoke$arity$2(name_format,new cljs.core.Symbol(null,"Real","Real",374292741,null));
}));

(sicmutils.calculus.manifold.make_manifold_family.cljs$core$IFn$_invoke$arity$2 = (function (name_format,over){
if(cljs.core.contains_QMARK_(new cljs.core.PersistentHashSet(null, new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Symbol(null,"Real","Real",374292741,null),null,new cljs.core.Symbol(null,"Complex","Complex",1443317787,null),null,new cljs.core.Symbol(null,"Quaternion","Quaternion",-1494551228,null),null], null), null),over)){
} else {
throw (new Error("Assert failed: (contains? #{(quote Real) (quote Complex) (quote Quaternion)} over)"));
}

return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"over","over",192553051),over,new cljs.core.Keyword(null,"name-format","name-format",1974377103),name_format,new cljs.core.Keyword(null,"patch-templates","patch-templates",836059143),cljs.core.PersistentArrayMap.EMPTY,new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword("sicmutils.calculus.manifold","manifold-family","sicmutils.calculus.manifold/manifold-family",2052241438)], null);
}));

(sicmutils.calculus.manifold.make_manifold_family.cljs$lang$maxFixedArity = 2);

/**
 * Returns `true` if `m` is a dictionary representing a manifold family, false
 *   otherwise.
 */
sicmutils.calculus.manifold.manifold_family_QMARK_ = (function sicmutils$calculus$manifold$manifold_family_QMARK_(m){
return cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.value.kind(m),new cljs.core.Keyword("sicmutils.calculus.manifold","manifold-family","sicmutils.calculus.manifold/manifold-family",2052241438));
});
/**
 * Returns a concrete manifold generated by specializing the supplied manifold
 *   `family` into a concrete manifold of dimension `n`. `n` must be a positive
 *   integer.
 * 
 *   Optionally takes an `embedding-dimension`; this must be >= the value of `n`.
 *   Use this in cases like an n-sphere embedded in a euclidean space of dimension
 *   n+1.
 * 
 *   A [manifold](https://en.wikipedia.org/wiki/Manifold) is a topological space
 *   that locally resembles Euclidean space near each point.
 */
sicmutils.calculus.manifold.make_manifold = (function sicmutils$calculus$manifold$make_manifold(var_args){
var G__81776 = arguments.length;
switch (G__81776) {
case 2:
return sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
case 3:
return sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$3((arguments[(0)]),(arguments[(1)]),(arguments[(2)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2 = (function (family,n){
return sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$3(family,n,n);
}));

(sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$3 = (function (family,n,embedding_dimension){
if(cljs.core.integer_QMARK_(n)){
} else {
throw (new Error("Assert failed: (integer? n)"));
}

if((n > (0))){
} else {
throw (new Error("Assert failed: (> n 0)"));
}

if((embedding_dimension >= n)){
} else {
throw (new Error("Assert failed: (>= embedding-dimension n)"));
}

return new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"family","family",-1313145692),family,new cljs.core.Keyword(null,"name","name",1843675177),goog.string.format(new cljs.core.Keyword(null,"name-format","name-format",1974377103).cljs$core$IFn$_invoke$arity$1(family),n),new cljs.core.Keyword(null,"dimension","dimension",543254198),n,new cljs.core.Keyword(null,"embedding-dimension","embedding-dimension",1369585967),embedding_dimension,new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830)], null);
}));

(sicmutils.calculus.manifold.make_manifold.cljs$lang$maxFixedArity = 3);

/**
 * Returns `true` if `m` is a dictionary representing a manifold, false
 *   otherwise.
 */
sicmutils.calculus.manifold.manifold_QMARK_ = (function sicmutils$calculus$manifold$manifold_QMARK_(m){
return cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.value.kind(m),new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830));
});
/**
 * The supplied manifold `m` locally resembles some vector space; this function
 *   returns the field over which that vector space was specified.
 */
sicmutils.calculus.manifold.manifold_type = (function sicmutils$calculus$manifold$manifold_type(manifold){
return cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(manifold,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"family","family",-1313145692),new cljs.core.Keyword(null,"over","over",192553051)], null));
});
/**
 * If `m` is a manifold, acts as identity. Else, if given some structure
 *   associated with a manifold (like a coordinate system), returns the associated
 *   manifold.
 */
sicmutils.calculus.manifold.manifold = (function sicmutils$calculus$manifold$manifold(m){
if(sicmutils.calculus.manifold.manifold_QMARK_(m)){
return m;
} else {
return new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830).cljs$core$IFn$_invoke$arity$1(cljs.core.meta(m));
}
});
/**
 * Returns a bare `patch` with no manifold attached.
 */
sicmutils.calculus.manifold.make_patch = (function sicmutils$calculus$manifold$make_patch(name){
return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"name","name",1843675177),name,new cljs.core.Keyword(null,"coordinate-systems","coordinate-systems",-642340545),cljs.core.PersistentArrayMap.EMPTY], null);
});
/**
 * Takes a manifold `family` and attaches a patch template with the supplied
 *   `patch-name`. Returns a new manifold family.
 * 
 *   All manifolds generated from the returned family will have this coordinate
 *   patch attached.
 */
sicmutils.calculus.manifold.attach_patch = (function sicmutils$calculus$manifold$attach_patch(family,patch_name){
var patch = sicmutils.calculus.manifold.make_patch(patch_name);
return cljs.core.assoc_in(family,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"patch-templates","patch-templates",836059143),patch_name], null),patch);
});
/**
 * Returns a set of patch names registered in the supplied manifold.
 */
sicmutils.calculus.manifold.patch_names = (function sicmutils$calculus$manifold$patch_names(manifold){
return sicmutils.util.keyset(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(manifold,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"family","family",-1313145692),new cljs.core.Keyword(null,"patch-templates","patch-templates",836059143)], null)));
});
/**
 * Returns the patch named by `patch-name` within the supplied `manifold` if
 *   registered. Throws otherwise.
 * 
 *   NOTE that the returned patch will keep a reference to the supplied `manifold`
 *   under a `:manifold` key.
 * 
 *   A coordinate patch is a simply-connected open set around a point in the
 *   manifold. A manifold might have many patches. Coordinate systems are defined
 *   on patches; these allow the parameterization of any point on the patch in
 *   terms of a tuple of real numbers (the coordinates).
 */
sicmutils.calculus.manifold.get_patch = (function sicmutils$calculus$manifold$get_patch(manifold,patch_name){
var temp__5751__auto__ = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(manifold,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"family","family",-1313145692),new cljs.core.Keyword(null,"patch-templates","patch-templates",836059143),patch_name], null));
if(cljs.core.truth_(temp__5751__auto__)){
var gen = temp__5751__auto__;
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(gen,new cljs.core.Keyword(null,"manifold","manifold",-1940328209),manifold);
} else {
throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Unknown patch.",new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"patch-name","patch-name",-1206801829),patch_name,new cljs.core.Keyword(null,"manifold","manifold",-1940328209),manifold], null));
}
});
/**
 * Returns a new manifold family generated by attaching the supplied coordinate
 *   system constructor to `family`, indexed by the supplied patch and coordinate
 *   system names.
 */
sicmutils.calculus.manifold.attach_coordinate_system = (function sicmutils$calculus$manifold$attach_coordinate_system(family,coordinate_system_name,patch_name,coordinate_system_ctor){
var ks = new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"patch-templates","patch-templates",836059143),patch_name,new cljs.core.Keyword(null,"coordinate-systems","coordinate-systems",-642340545),coordinate_system_name], null);
var v = coordinate_system_ctor;
return cljs.core.assoc_in(family,ks,v);
});
/**
 * Returns a set of names of all coordinate system constructors registered in the
 *   supplied patch.
 */
sicmutils.calculus.manifold.coordinate_system_names = (function sicmutils$calculus$manifold$coordinate_system_names(patch){
return sicmutils.util.keyset(new cljs.core.Keyword(null,"coordinate-systems","coordinate-systems",-642340545).cljs$core$IFn$_invoke$arity$1(patch));
});
/**
 * If a coordinate system constructor registered at `system-name` exists in the
 *   supplied `patch`, return it. Else, error.
 * 
 *   NOTE for FDG-goers: This is called `coordinate-system` in scmutils.
 */
sicmutils.calculus.manifold.get_coordinate_system = (function sicmutils$calculus$manifold$get_coordinate_system(patch,system_name){
var or__4253__auto__ = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(patch,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"coordinate-systems","coordinate-systems",-642340545),system_name], null));
if(cljs.core.truth_(or__4253__auto__)){
return or__4253__auto__;
} else {
throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Unknown coordinate system.",new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"coordinate-system-name","coordinate-system-name",-2088953179),system_name,new cljs.core.Keyword(null,"patch","patch",380775109),patch], null));
}
});
/**
 * Returns an [[ICoordinateSystem]] instance specialized to the patch named
 *   `patch-name` on `manifold`.
 */
sicmutils.calculus.manifold.coordinate_system_at = (function sicmutils$calculus$manifold$coordinate_system_at(manifold,coordinate_system_name,patch_name){
var patch = sicmutils.calculus.manifold.get_patch(manifold,patch_name);
var ctor = sicmutils.calculus.manifold.get_coordinate_system(patch,coordinate_system_name);
return (ctor.cljs$core$IFn$_invoke$arity$1 ? ctor.cljs$core$IFn$_invoke$arity$1(manifold) : ctor.call(null,manifold));
});
/**
 * Returns a point in `manifold` specified by its Euclidean coordinates `spec`.
 * 
 *   Mathematically, a point is defined in the manifold in a coordinate-free way.
 *   To compute with the point, you'll need to get it into a coordinate
 *   representation using `((chart coord-system) point)`.
 * 
 *   Optionally, you can pass a `coordinate-system` and a
 *   representation (`coordinate-rep`) of the point in that coordinate system. The
 *   returned point keeps a mutable cache of its coordinate representations, keyed
 *   by `:coordinate-representations`; passing these values will seed the cache.
 */
sicmutils.calculus.manifold.make_manifold_point = (function sicmutils$calculus$manifold$make_manifold_point(var_args){
var G__81811 = arguments.length;
switch (G__81811) {
case 2:
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
case 4:
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4((arguments[(0)]),(arguments[(1)]),(arguments[(2)]),(arguments[(3)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$2 = (function (spec,manifold){
return new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword("sicmutils.calculus.manifold","manifold-point","sicmutils.calculus.manifold/manifold-point",-371034074),new cljs.core.Keyword(null,"spec","spec",347520401),spec,new cljs.core.Keyword(null,"manifold","manifold",-1940328209),manifold,new cljs.core.Keyword(null,"coordinate-representations","coordinate-representations",-676047034),cljs.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY)], null);
}));

(sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4 = (function (spec,manifold,coordinate_system,coordinate_rep){
var point = sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$2(spec,manifold);
var reps = new cljs.core.Keyword(null,"coordinate-representations","coordinate-representations",-676047034).cljs$core$IFn$_invoke$arity$1(point);
cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(reps,cljs.core.assoc,(sicmutils.calculus.manifold.uuid.cljs$core$IFn$_invoke$arity$1 ? sicmutils.calculus.manifold.uuid.cljs$core$IFn$_invoke$arity$1(coordinate_system) : sicmutils.calculus.manifold.uuid.call(null,coordinate_system)),coordinate_rep);

return point;
}));

(sicmutils.calculus.manifold.make_manifold_point.cljs$lang$maxFixedArity = 4);

/**
 * Returns the backing Euclidean space representation of the supplied manifold
 *   point.
 */
sicmutils.calculus.manifold.manifold_point_representation = (function sicmutils$calculus$manifold$manifold_point_representation(point){
return new cljs.core.Keyword(null,"spec","spec",347520401).cljs$core$IFn$_invoke$arity$1(point);
});
/**
 * Return the manifold upon which this `point` was defined.
 */
sicmutils.calculus.manifold.point__GT_manifold = (function sicmutils$calculus$manifold$point__GT_manifold(point){
return new cljs.core.Keyword(null,"manifold","manifold",-1940328209).cljs$core$IFn$_invoke$arity$1(point);
});
/**
 * Returns true if `p` is a manifold point, false otherwise.
 */
sicmutils.calculus.manifold.manifold_point_QMARK_ = (function sicmutils$calculus$manifold$manifold_point_QMARK_(p){
return cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.value.kind(p),new cljs.core.Keyword("sicmutils.calculus.manifold","manifold-point","sicmutils.calculus.manifold/manifold-point",-371034074));
});
/**
 * Returns true if `point` was created under the aegis of `manifold`, false
 *   otherwise.
 */
sicmutils.calculus.manifold.my_manifold_point_QMARK_ = (function sicmutils$calculus$manifold$my_manifold_point_QMARK_(point,manifold){
return ((sicmutils.calculus.manifold.manifold_point_QMARK_(point)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.point__GT_manifold(point),manifold)));
});
/**
 * Returns the representation of `manifold-point` in `coordinate-system`.
 * 
 *   If an entry for the given `coordinate-system` is not found, `thunk` is called
 *   to produce the representation. The representation is cached in the point.
 */
sicmutils.calculus.manifold.get_coordinates = (function sicmutils$calculus$manifold$get_coordinates(manifold_point,coordinate_system,thunk){
var reps = new cljs.core.Keyword(null,"coordinate-representations","coordinate-representations",-676047034).cljs$core$IFn$_invoke$arity$1(manifold_point);
var coordsys_id = (sicmutils.calculus.manifold.uuid.cljs$core$IFn$_invoke$arity$1 ? sicmutils.calculus.manifold.uuid.cljs$core$IFn$_invoke$arity$1(coordinate_system) : sicmutils.calculus.manifold.uuid.call(null,coordinate_system));
var or__4253__auto__ = (function (){var fexpr__81821 = cljs.core.deref(reps);
return (fexpr__81821.cljs$core$IFn$_invoke$arity$1 ? fexpr__81821.cljs$core$IFn$_invoke$arity$1(coordsys_id) : fexpr__81821.call(null,coordsys_id));
})();
if(cljs.core.truth_(or__4253__auto__)){
return or__4253__auto__;
} else {
var rep = sicmutils.structure.mapr.cljs$core$IFn$_invoke$arity$variadic(sicmutils.abstract$.number.simplify_numerical_expression,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(thunk.cljs$core$IFn$_invoke$arity$0 ? thunk.cljs$core$IFn$_invoke$arity$0() : thunk.call(null))], 0));
cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(reps,cljs.core.assoc,coordsys_id,rep);

return rep;
}
});

/**
 * @interface
 */
sicmutils.calculus.manifold.ICoordinateSystem = function(){};

var sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$dyn_81992 = (function (this$,coords){
var x__4550__auto__ = (((this$ == null))?null:this$);
var m__4551__auto__ = (sicmutils.calculus.manifold.check_coordinates[goog.typeOf(x__4550__auto__)]);
if((!((m__4551__auto__ == null)))){
return (m__4551__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$2(this$,coords) : m__4551__auto__.call(null,this$,coords));
} else {
var m__4549__auto__ = (sicmutils.calculus.manifold.check_coordinates["_"]);
if((!((m__4549__auto__ == null)))){
return (m__4549__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$2(this$,coords) : m__4549__auto__.call(null,this$,coords));
} else {
throw cljs.core.missing_protocol("ICoordinateSystem.check-coordinates",this$);
}
}
});
/**
 * Returns true if the supplied coordinates `coords` can be converted into a
 *  point by this [[ICoordinateSystem]], false otherwise.
 */
sicmutils.calculus.manifold.check_coordinates = (function sicmutils$calculus$manifold$check_coordinates(this$,coords){
if((((!((this$ == null)))) && ((!((this$.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 == null)))))){
return this$.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(this$,coords);
} else {
return sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$dyn_81992(this$,coords);
}
});

var sicmutils$calculus$manifold$ICoordinateSystem$check_point$dyn_81993 = (function (this$,point){
var x__4550__auto__ = (((this$ == null))?null:this$);
var m__4551__auto__ = (sicmutils.calculus.manifold.check_point[goog.typeOf(x__4550__auto__)]);
if((!((m__4551__auto__ == null)))){
return (m__4551__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$2(this$,point) : m__4551__auto__.call(null,this$,point));
} else {
var m__4549__auto__ = (sicmutils.calculus.manifold.check_point["_"]);
if((!((m__4549__auto__ == null)))){
return (m__4549__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$2(this$,point) : m__4549__auto__.call(null,this$,point));
} else {
throw cljs.core.missing_protocol("ICoordinateSystem.check-point",this$);
}
}
});
/**
 * Returns true if the supplied `point` can be converted into coordinates by
 *  this [[ICoordinateSystem]], false otherwise.
 */
sicmutils.calculus.manifold.check_point = (function sicmutils$calculus$manifold$check_point(this$,point){
if((((!((this$ == null)))) && ((!((this$.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 == null)))))){
return this$.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(this$,point);
} else {
return sicmutils$calculus$manifold$ICoordinateSystem$check_point$dyn_81993(this$,point);
}
});

var sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$dyn_81994 = (function (this$,coords){
var x__4550__auto__ = (((this$ == null))?null:this$);
var m__4551__auto__ = (sicmutils.calculus.manifold.coords__GT_point[goog.typeOf(x__4550__auto__)]);
if((!((m__4551__auto__ == null)))){
return (m__4551__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$2(this$,coords) : m__4551__auto__.call(null,this$,coords));
} else {
var m__4549__auto__ = (sicmutils.calculus.manifold.coords__GT_point["_"]);
if((!((m__4549__auto__ == null)))){
return (m__4549__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$2(this$,coords) : m__4549__auto__.call(null,this$,coords));
} else {
throw cljs.core.missing_protocol("ICoordinateSystem.coords->point",this$);
}
}
});
/**
 * Returns the manifold point on this [[ICoordinateSystem]]'s manifold
 *  corresponding to the supplied `coords`.
 */
sicmutils.calculus.manifold.coords__GT_point = (function sicmutils$calculus$manifold$coords__GT_point(this$,coords){
if((((!((this$ == null)))) && ((!((this$.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 == null)))))){
return this$.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2(this$,coords);
} else {
return sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$dyn_81994(this$,coords);
}
});

var sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$dyn_81995 = (function (this$,point){
var x__4550__auto__ = (((this$ == null))?null:this$);
var m__4551__auto__ = (sicmutils.calculus.manifold.point__GT_coords[goog.typeOf(x__4550__auto__)]);
if((!((m__4551__auto__ == null)))){
return (m__4551__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$2(this$,point) : m__4551__auto__.call(null,this$,point));
} else {
var m__4549__auto__ = (sicmutils.calculus.manifold.point__GT_coords["_"]);
if((!((m__4549__auto__ == null)))){
return (m__4549__auto__.cljs$core$IFn$_invoke$arity$2 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$2(this$,point) : m__4549__auto__.call(null,this$,point));
} else {
throw cljs.core.missing_protocol("ICoordinateSystem.point->coords",this$);
}
}
});
/**
 * Returns a coordinate representation of the supplied manifold point `point`,
 *  as specified by this [[ICoordinateSystem]].
 */
sicmutils.calculus.manifold.point__GT_coords = (function sicmutils$calculus$manifold$point__GT_coords(this$,point){
if((((!((this$ == null)))) && ((!((this$.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 == null)))))){
return this$.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2(this$,point);
} else {
return sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$dyn_81995(this$,point);
}
});

var sicmutils$calculus$manifold$ICoordinateSystem$uuid$dyn_81996 = (function (this$){
var x__4550__auto__ = (((this$ == null))?null:this$);
var m__4551__auto__ = (sicmutils.calculus.manifold.uuid[goog.typeOf(x__4550__auto__)]);
if((!((m__4551__auto__ == null)))){
return (m__4551__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4551__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4551__auto__.call(null,this$));
} else {
var m__4549__auto__ = (sicmutils.calculus.manifold.uuid["_"]);
if((!((m__4549__auto__ == null)))){
return (m__4549__auto__.cljs$core$IFn$_invoke$arity$1 ? m__4549__auto__.cljs$core$IFn$_invoke$arity$1(this$) : m__4549__auto__.call(null,this$));
} else {
throw cljs.core.missing_protocol("ICoordinateSystem.uuid",this$);
}
}
});
/**
 * Returns a unique identifier for this instance of [[ICoordinateSystem]].
 * 
 *  (This is an internal implementation detail to allow us to attach coordinate
 *  prototypes and other items as metadata to an [[ICoordinateSystem]] without
 *  affecting equality.)
 */
sicmutils.calculus.manifold.uuid = (function sicmutils$calculus$manifold$uuid(this$){
if((((!((this$ == null)))) && ((!((this$.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 == null)))))){
return this$.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1(this$);
} else {
return sicmutils$calculus$manifold$ICoordinateSystem$uuid$dyn_81996(this$);
}
});

/**
 * Returns true if `x` implements [[ICoordinateSystem]], false otherwise.
 */
sicmutils.calculus.manifold.coordinate_system_QMARK_ = (function sicmutils$calculus$manifold$coordinate_system_QMARK_(x){
if((!((x == null)))){
if(((false) || ((cljs.core.PROTOCOL_SENTINEL === x.sicmutils$calculus$manifold$ICoordinateSystem$)))){
return true;
} else {
if((!x.cljs$lang$protocol_mask$partition$)){
return cljs.core.native_satisfies_QMARK_(sicmutils.calculus.manifold.ICoordinateSystem,x);
} else {
return false;
}
}
} else {
return cljs.core.native_satisfies_QMARK_(sicmutils.calculus.manifold.ICoordinateSystem,x);
}
});
/**
 * Returns the symbolic coordinate prototype associated with `coordsys`. This is
 * a structure of the correct dimension for this coordinate system, with all
 * symbolic entries.
 * 
 *   Returns nil for non-valid inputs.
 */
sicmutils.calculus.manifold.coordinate_prototype = (function sicmutils$calculus$manifold$coordinate_prototype(coordsys){
return new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942).cljs$core$IFn$_invoke$arity$1(cljs.core.meta(coordsys));
});
/**
 * Returns an identical `coordsys` with the new `coordinate-prototype` installed.
 */
sicmutils.calculus.manifold.with_coordinate_prototype = (function sicmutils$calculus$manifold$with_coordinate_prototype(coordsys,prototype){
var current_proto = sicmutils.calculus.manifold.coordinate_prototype(coordsys);
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(current_proto,prototype)){
return coordsys;
} else {
return cljs.core.vary_meta.cljs$core$IFn$_invoke$arity$4(coordsys,cljs.core.assoc,new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),prototype);
}
});
/**
 * Given an [[ICoordinateSystem]], returns a function from a point on the
 *   coordinate system's manifold to the coordinate representation specified by the
 *   supplied `coordinate-system`.
 */
sicmutils.calculus.manifold.chart = (function sicmutils$calculus$manifold$chart(coordinate_system){
if(sicmutils.calculus.frame.frame_QMARK_(coordinate_system)){
return (function (event){
return sicmutils.calculus.frame.event__GT_coords(coordinate_system,event);
});
} else {
return (function (point){
return sicmutils.calculus.manifold.point__GT_coords(coordinate_system,point);
});
}
});
/**
 * Given an [[ICoordinateSystem]], returns a function from coordinates in
 *   `coordinate-system`'s repesentation to the matching point on the manifold
 *   associated with `coordinate-system`.
 */
sicmutils.calculus.manifold.point = (function sicmutils$calculus$manifold$point(coordinate_system){
if(sicmutils.calculus.frame.frame_QMARK_(coordinate_system)){
return (function (coords){
return sicmutils.calculus.frame.coords__GT_event(coordinate_system,coords);
});
} else {
return (function (coords){
return sicmutils.calculus.manifold.coords__GT_point(coordinate_system,coords);
});
}
});
/**
 * Given an [[ICoordinateSystem]], returns a structure that matches
 *   the [[coordinate-prototype]] of `coordinate-system`, with all unique,
 *   gensym-ed entries.
 * 
 *   Use [[typical-coords]] if you require a unique symbolic coordinate
 *   representation compatible with `coordinate-system`.
 * 
 *   See [[typical-point]] for a coordinate-free version of this function.
 */
sicmutils.calculus.manifold.typical_coords = (function sicmutils$calculus$manifold$typical_coords(coordinate_system){
return sicmutils.structure.mapr.cljs$core$IFn$_invoke$arity$variadic(cljs.core.gensym,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.calculus.manifold.coordinate_prototype(coordinate_system)], 0));
});
/**
 * Given an [[ICoordinateSystem]], returns a unique, symbolically-represented
 *   point on the manifold associated with `coordinate-system`.
 * 
 *   See [[typical-coords]] for a coordinate-based version of this function.
 */
sicmutils.calculus.manifold.typical_point = (function sicmutils$calculus$manifold$typical_point(coordinate_system){
var coords = sicmutils.calculus.manifold.typical_coords(coordinate_system);
return sicmutils.calculus.manifold.coords__GT_point(coordinate_system,coords);
});
/**
 * Returns a function that takes a single manifold `point` embedded in the
 *   manifold `embedded` and transfers the point to the supplied `embedding`
 *   manifold.
 * 
 *   The embedding dimension must be the same for both manifolds.
 * 
 *   NOTE that `embedded` and `embedding` can be either manifolds, or instances
 *   of [[ICoordinateSystem]]. In the latter case `embedded` and `embedding` will
 *   bind to the manifold associated with the supplied [[ICoordinateSystem]].
 */
sicmutils.calculus.manifold.transfer_point = (function sicmutils$calculus$manifold$transfer_point(embedded,embedding){
var embedded_m = sicmutils.calculus.manifold.manifold(embedded);
var embedding_m = sicmutils.calculus.manifold.manifold(embedding);
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,"embedding-dimension","embedding-dimension",1369585967).cljs$core$IFn$_invoke$arity$1(embedded_m),new cljs.core.Keyword(null,"embedding-dimension","embedding-dimension",1369585967).cljs$core$IFn$_invoke$arity$1(embedding_m))){
} else {
throw (new Error("Assert failed: (= (:embedding-dimension embedded-m) (:embedding-dimension embedding-m))"));
}

return (function (point){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(embedded_m,sicmutils.calculus.manifold.point__GT_manifold(point))){
} else {
throw (new Error("Assert failed: (= embedded-m (point->manifold point))"));
}

return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.manifold_point_representation(point),embedding_m);
});
});
/**
 * Takes a coordinate representation `coords` of a manifold point with all
 *   symbolic entries, and returns a structure of the same shape with `v:`
 *   prepended to all symbols.
 * 
 *   This structure is appropriate for representing the velocities associated with
 *   each coordinate.
 */
sicmutils.calculus.manifold.corresponding_velocities = (function sicmutils$calculus$manifold$corresponding_velocities(coords){
return sicmutils.structure.mapr.cljs$core$IFn$_invoke$arity$variadic((function (x){
return cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(["v:",cljs.core.str.cljs$core$IFn$_invoke$arity$1(x)].join(''));
}),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([coords], 0));
});
/**
 * Given a symbolic name `sym` and an [[ICoordinateSystem]], returns a literal
 *   function that maps coordinate-free manifold points to a scalar output.
 * 
 *   Also aliased as [[literal-manifold-function]].
 */
sicmutils.calculus.manifold.literal_manifold_function = (function sicmutils$calculus$manifold$literal_manifold_function(sym,coordinate_system){
var n = new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(sicmutils.calculus.manifold.manifold(coordinate_system));
var domain = sicmutils.structure.up_STAR_(cljs.core.repeat.cljs$core$IFn$_invoke$arity$2(n,(0)));
var range = (0);
return cljs.core.vary_meta.cljs$core$IFn$_invoke$arity$variadic(sicmutils.function$.compose.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.abstract$.function$.literal_function.cljs$core$IFn$_invoke$arity$3(sym,domain,range),sicmutils.calculus.manifold.chart(coordinate_system)], 0)),cljs.core.assoc,new cljs.core.Keyword(null,"name","name",1843675177),cljs.core.name,new cljs.core.Keyword(null,"coordinate-system","coordinate-system",-1298347271),coordinate_system,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"type","type",1174270348),new cljs.core.Keyword("sicmutils.calculus.manifold","manifold-function","sicmutils.calculus.manifold/manifold-function",240475034)], 0));
});
/**
 * Alias for [[literal-manifold-function]], present for scmutils
 * codebase compatibility.
 */
sicmutils.calculus.manifold.literal_scalar_field = sicmutils.calculus.manifold.literal_manifold_function;
/**
 * Manifold function that maps every input manifold `point` to the scalar value 0.
 */
sicmutils.calculus.manifold.zero_manifold_function = (function sicmutils$calculus$manifold$zero_manifold_function(point){
if(sicmutils.calculus.manifold.manifold_point_QMARK_(point)){
} else {
throw (new Error("Assert failed: (manifold-point? point)"));
}

return (0);
});
/**
 * Manifold function that maps every input manifold `point` to the scalar value 1.
 */
sicmutils.calculus.manifold.one_manifold_function = (function sicmutils$calculus$manifold$one_manifold_function(point){
if(sicmutils.calculus.manifold.manifold_point_QMARK_(point)){
} else {
throw (new Error("Assert failed: (manifold-point? point)"));
}

return (1);
});
/**
 * Takes some constant `c` and returns a manifold function that maps every input
 *   manifold `point` to `c.`
 */
sicmutils.calculus.manifold.constant_manifold_function = (function sicmutils$calculus$manifold$constant_manifold_function(c){
return (function (point){
if(sicmutils.calculus.manifold.manifold_point_QMARK_(point)){
} else {
throw (new Error("Assert failed: (manifold-point? point)"));
}

return c;
});
});
/**
 * Generates a coordinate structure of the supplied dimension `n`, and
 *   `orientation` using the supplied function `f` for entries. See the very
 *   similar [[sicmutils.structure/generate]] for more details.
 * 
 *   NOTE from GJS: this is a kludge introduced only to allow a coordinate of
 *   dimension 1 to automatically unwrap itself.
 */
sicmutils.calculus.manifold.c_COLON_generate = (function sicmutils$calculus$manifold$c_COLON_generate(n,orientation,f){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(n,(1))){
return (f.cljs$core$IFn$_invoke$arity$1 ? f.cljs$core$IFn$_invoke$arity$1((0)) : f.call(null,(0)));
} else {
return sicmutils.structure.generate(n,orientation,f);
}
});
/**
 * Takes a `manifold` and returns a [[sicmutils.structure/up]] instance of the
 *   same dimension as `manifold`, with symbolic entries in each position. 
 */
sicmutils.calculus.manifold.default_coordinate_prototype = (function sicmutils$calculus$manifold$default_coordinate_prototype(manifold){
var k = new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(manifold);
return sicmutils.calculus.manifold.c_COLON_generate(k,new cljs.core.Keyword("sicmutils.structure","up","sicmutils.structure/up",-2138938939),(function (i){
return cljs.core.symbol.cljs$core$IFn$_invoke$arity$1(["x",cljs.core.str.cljs$core$IFn$_invoke$arity$1(i)].join(''));
}));
});
/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points in Rn (where `n` is the dimension of `manifold`) to an explicit Rn
 *   structure.
 * 
 *   This is as close to an identity coordinate transformation as the system gets!
 */
sicmutils.calculus.manifold.__GT_Rectangular = (function sicmutils$calculus$manifold$__GT_Rectangular(var_args){
var G__81905 = arguments.length;
switch (G__81905) {
case 1:
return sicmutils.calculus.manifold.__GT_Rectangular.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
case 2:
return sicmutils.calculus.manifold.__GT_Rectangular.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(sicmutils.calculus.manifold.__GT_Rectangular.cljs$core$IFn$_invoke$arity$1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils.calculus.manifold.__GT_Rectangular.cljs$core$IFn$_invoke$arity$2(manifold,proto);
}));

(sicmutils.calculus.manifold.__GT_Rectangular.cljs$core$IFn$_invoke$arity$2 = (function (manifold,coordinate_prototype){
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906 = (function (manifold,coordinate_prototype,id,meta81907){
this.manifold = manifold;
this.coordinate_prototype = coordinate_prototype;
this.id = id;
this.meta81907 = meta81907;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81908,meta81907__$1){
var self__ = this;
var _81908__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906(self__.manifold,self__.coordinate_prototype,self__.id,meta81907__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81908){
var self__ = this;
var _81908__$1 = this;
return self__.meta81907;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
return cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.structure.dimension(coords),new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(self__.manifold));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(coords,self__.manifold,this$__$1,coords);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var rep = sicmutils.calculus.manifold.manifold_point_representation(point);
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.structure.dimension(rep),new cljs.core.Keyword(null,"embedding-dimension","embedding-dimension",1369585967).cljs$core$IFn$_invoke$arity$1(self__.manifold))){
} else {
throw (new Error("Assert failed: (= (s/dimension rep) (:embedding-dimension manifold))"));
}

return rep;
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.getBasis = (function (){
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"meta81907","meta81907",-379846792,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81906");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81906");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81906.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81906 = (function sicmutils$calculus$manifold$__GT_t_sicmutils$calculus$manifold81906(manifold__$1,coordinate_prototype__$1,id__$1,meta81907){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906(manifold__$1,coordinate_prototype__$1,id__$1,meta81907));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81906(manifold,coordinate_prototype,id,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
}));

(sicmutils.calculus.manifold.__GT_Rectangular.cljs$lang$maxFixedArity = 2);

/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points in Rn (where `n` is the dimension of `manifold`) to [cylindrical
 *   coordinates](https://en.wikipedia.org/wiki/Cylindrical_coordinate_system).
 * 
 *   The first two Rn coordinates in the manifold point become `r` and `theta`, and
 *   all other points are untouched.
 */
sicmutils.calculus.manifold.__GT_PolarCylindrical = (function sicmutils$calculus$manifold$__GT_PolarCylindrical(var_args){
var G__81910 = arguments.length;
switch (G__81910) {
case 1:
return sicmutils.calculus.manifold.__GT_PolarCylindrical.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
case 2:
return sicmutils.calculus.manifold.__GT_PolarCylindrical.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(sicmutils.calculus.manifold.__GT_PolarCylindrical.cljs$core$IFn$_invoke$arity$1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils.calculus.manifold.__GT_PolarCylindrical.cljs$core$IFn$_invoke$arity$2(manifold,proto);
}));

(sicmutils.calculus.manifold.__GT_PolarCylindrical.cljs$core$IFn$_invoke$arity$2 = (function (manifold,coordinate_prototype){
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911 = (function (manifold,coordinate_prototype,id,meta81912){
this.manifold = manifold;
this.coordinate_prototype = coordinate_prototype;
this.id = id;
this.meta81912 = meta81912;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81913,meta81912__$1){
var self__ = this;
var _81913__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911(self__.manifold,self__.coordinate_prototype,self__.id,meta81912__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81913){
var self__ = this;
var _81913__$1 = this;
return self__.meta81912;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
var and__4251__auto__ = sicmutils.structure.up_QMARK_(coords);
if(and__4251__auto__){
var and__4251__auto____$1 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.structure.dimension(coords),new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(self__.manifold));
if(and__4251__auto____$1){
var and__4251__auto____$2 = (sicmutils.structure.dimension(coords) > (1));
if(and__4251__auto____$2){
var c0 = cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords,(0));
return (((!(sicmutils.value.number_QMARK_(c0)))) || ((c0 >= (0))));
} else {
return and__4251__auto____$2;
}
} else {
return and__4251__auto____$1;
}
} else {
return and__4251__auto__;
}
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

var vec__81914 = coords;
var r = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81914,(0),null);
var theta = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81914,(1),null);
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(coords,(0),sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(r,sicmutils.generic.cos.cljs$core$IFn$_invoke$arity$1(theta))),(1),sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(r,sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(theta))),self__.manifold,this$__$1,coords);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var rep = sicmutils.calculus.manifold.manifold_point_representation(point);
if(((sicmutils.structure.up_QMARK_(rep)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.structure.dimension(rep),new cljs.core.Keyword(null,"embedding-dimension","embedding-dimension",1369585967).cljs$core$IFn$_invoke$arity$1(self__.manifold))))){
} else {
sicmutils.util.illegal("PolarCylindrical bad point");
}

var vec__81917 = rep;
var x = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81917,(0),null);
var y = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81917,(1),null);
var rsq = sicmutils.generic._PLUS_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(x),sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(y));
if(sicmutils.value.zero_QMARK_(rsq)){
sicmutils.util.illegal_state("PolarCylindrical singular");
} else {
}

return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(rep,(0),sicmutils.generic.sqrt.cljs$core$IFn$_invoke$arity$1(rsq)),(1),sicmutils.generic.atan.cljs$core$IFn$_invoke$arity$2(y,x));
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.getBasis = (function (){
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"meta81912","meta81912",1135322494,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81911");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81911");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81911.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81911 = (function sicmutils$calculus$manifold$__GT_t_sicmutils$calculus$manifold81911(manifold__$1,coordinate_prototype__$1,id__$1,meta81912){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911(manifold__$1,coordinate_prototype__$1,id__$1,meta81912));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81911(manifold,coordinate_prototype,id,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
}));

(sicmutils.calculus.manifold.__GT_PolarCylindrical.cljs$lang$maxFixedArity = 2);

/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points in Rn (where `n` is the dimension of `manifold`) to
 *   generalized [spherical
 *   coordinates](https://en.wikipedia.org/wiki/Spherical_coordinate_system).
 * 
 *   The first three Rn coordinates in the manifold point become `r` and `theta`,
 *   `phi` (radius, colatitude and longitude) and all other points are untouched.
 *   This last bit allows us to use spherical coordinates for manifolds with higher
 *   than three dimensions.
 */
sicmutils.calculus.manifold.__GT_SphericalCylindrical = (function sicmutils$calculus$manifold$__GT_SphericalCylindrical(var_args){
var G__81921 = arguments.length;
switch (G__81921) {
case 1:
return sicmutils.calculus.manifold.__GT_SphericalCylindrical.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
case 2:
return sicmutils.calculus.manifold.__GT_SphericalCylindrical.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(sicmutils.calculus.manifold.__GT_SphericalCylindrical.cljs$core$IFn$_invoke$arity$1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils.calculus.manifold.__GT_SphericalCylindrical.cljs$core$IFn$_invoke$arity$2(manifold,proto);
}));

(sicmutils.calculus.manifold.__GT_SphericalCylindrical.cljs$core$IFn$_invoke$arity$2 = (function (manifold,coordinate_prototype){
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922 = (function (manifold,coordinate_prototype,id,meta81923){
this.manifold = manifold;
this.coordinate_prototype = coordinate_prototype;
this.id = id;
this.meta81923 = meta81923;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81924,meta81923__$1){
var self__ = this;
var _81924__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922(self__.manifold,self__.coordinate_prototype,self__.id,meta81923__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81924){
var self__ = this;
var _81924__$1 = this;
return self__.meta81923;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
return ((sicmutils.structure.up_QMARK_(coords)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords),new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(self__.manifold))) && ((((!(sicmutils.value.number_QMARK_(coords)))) || ((cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords,(0)) >= (0))))))));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

var vec__81925 = coords;
var r = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81925,(0),null);
var theta = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81925,(1),null);
var phi = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81925,(2),null);
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(coords,(0),sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$variadic(r,sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(theta),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.generic.cos.cljs$core$IFn$_invoke$arity$1(phi)], 0))),(1),sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$variadic(r,sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(theta),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(phi)], 0))),(2),sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(r,sicmutils.generic.cos.cljs$core$IFn$_invoke$arity$1(theta))),self__.manifold,this$__$1,coords);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var rep = sicmutils.calculus.manifold.manifold_point_representation(point);
if(((sicmutils.structure.up_QMARK_(rep)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(rep),new cljs.core.Keyword(null,"embedding-dimension","embedding-dimension",1369585967).cljs$core$IFn$_invoke$arity$1(self__.manifold))))){
} else {
sicmutils.util.illegal("SphericalCylindrical bad point");
}

var vec__81928 = rep;
var x = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81928,(0),null);
var y = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81928,(1),null);
var z = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81928,(2),null);
var r = sicmutils.generic.sqrt.cljs$core$IFn$_invoke$arity$1(sicmutils.generic._PLUS_.cljs$core$IFn$_invoke$arity$variadic(sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(x),sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(y),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(z)], 0)));
if(sicmutils.value.zero_QMARK_(r)){
sicmutils.util.illegal_state("SphericalCylindrical singular");
} else {
}

return cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(rep,(0),r),(1),sicmutils.generic.acos.cljs$core$IFn$_invoke$arity$1((sicmutils.generic.divide.cljs$core$IFn$_invoke$arity$2 ? sicmutils.generic.divide.cljs$core$IFn$_invoke$arity$2(z,r) : sicmutils.generic.divide.call(null,z,r)))),(2),sicmutils.generic.atan.cljs$core$IFn$_invoke$arity$2(y,x));
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.getBasis = (function (){
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"meta81923","meta81923",-1377505100,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81922");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81922");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81922.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81922 = (function sicmutils$calculus$manifold$__GT_t_sicmutils$calculus$manifold81922(manifold__$1,coordinate_prototype__$1,id__$1,meta81923){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922(manifold__$1,coordinate_prototype__$1,id__$1,meta81923));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81922(manifold,coordinate_prototype,id,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
}));

(sicmutils.calculus.manifold.__GT_SphericalCylindrical.cljs$lang$maxFixedArity = 2);

/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points in R4 to 'spacetime spherical coordinates'. The first coordinate is
 *   time, and the remaining three coordinates are [spherical spatial
 *   coordinates](https://en.wikipedia.org/wiki/Spherical_coordinate_system).
 * 
 *   The spatial coordinates are `r` and `theta`, `phi` (radius, colatitude and
 *   longitude).
 */
sicmutils.calculus.manifold.__GT_SpacetimeSpherical = (function sicmutils$calculus$manifold$__GT_SpacetimeSpherical(var_args){
var G__81932 = arguments.length;
switch (G__81932) {
case 1:
return sicmutils.calculus.manifold.__GT_SpacetimeSpherical.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
case 2:
return sicmutils.calculus.manifold.__GT_SpacetimeSpherical.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(sicmutils.calculus.manifold.__GT_SpacetimeSpherical.cljs$core$IFn$_invoke$arity$1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils.calculus.manifold.__GT_SpacetimeSpherical.cljs$core$IFn$_invoke$arity$2(manifold,proto);
}));

(sicmutils.calculus.manifold.__GT_SpacetimeSpherical.cljs$core$IFn$_invoke$arity$2 = (function (manifold,coordinate_prototype){
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933 = (function (manifold,coordinate_prototype,id,meta81934){
this.manifold = manifold;
this.coordinate_prototype = coordinate_prototype;
this.id = id;
this.meta81934 = meta81934;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81935,meta81934__$1){
var self__ = this;
var _81935__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933(self__.manifold,self__.coordinate_prototype,self__.id,meta81934__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81935){
var self__ = this;
var _81935__$1 = this;
return self__.meta81934;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
return ((sicmutils.structure.up_QMARK_(coords)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords),(4))));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

var vec__81936 = coords;
var t = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81936,(0),null);
var r = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81936,(1),null);
var theta = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81936,(2),null);
var phi = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81936,(3),null);
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([t,sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$variadic(r,sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(theta),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.generic.cos.cljs$core$IFn$_invoke$arity$1(phi)], 0)),sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$variadic(r,sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(theta),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(phi)], 0)),sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(r,sicmutils.generic.cos.cljs$core$IFn$_invoke$arity$1(theta))], 0)),self__.manifold,this$__$1,coords);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var rep = sicmutils.calculus.manifold.manifold_point_representation(point);
if(cljs.core.not(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,rep))){
throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("bad ->SpacetimeSpherical point: ",new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"point","point",1813198264),point,new cljs.core.Keyword(null,"coordinate-system","coordinate-system",-1298347271),this$__$1], null));
} else {
var vec__81939 = rep;
var t = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81939,(0),null);
var x = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81939,(1),null);
var y = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81939,(2),null);
var z = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81939,(3),null);
var r = sicmutils.generic.sqrt.cljs$core$IFn$_invoke$arity$1(sicmutils.generic._PLUS_.cljs$core$IFn$_invoke$arity$variadic(sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(x),sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(y),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(z)], 0)));
if(((sicmutils.value.number_QMARK_(r)) && (sicmutils.value.zero_QMARK_(r)))){
throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("->SpacetimeSpherical singular: ",new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"point","point",1813198264),point,new cljs.core.Keyword(null,"coordinate-system","coordinate-system",-1298347271),this$__$1], null));
} else {
}

return sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([t,r,sicmutils.generic.acos.cljs$core$IFn$_invoke$arity$1(sicmutils.generic._SLASH_.cljs$core$IFn$_invoke$arity$2(z,r)),sicmutils.generic.atan.cljs$core$IFn$_invoke$arity$2(y,x)], 0));
}
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.getBasis = (function (){
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"meta81934","meta81934",-96109929,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81933");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81933");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81933.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81933 = (function sicmutils$calculus$manifold$__GT_t_sicmutils$calculus$manifold81933(manifold__$1,coordinate_prototype__$1,id__$1,meta81934){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933(manifold__$1,coordinate_prototype__$1,id__$1,meta81934));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81933(manifold,coordinate_prototype,id,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
}));

(sicmutils.calculus.manifold.__GT_SpacetimeSpherical.cljs$lang$maxFixedArity = 2);

/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points and colatitude-longitude coordinates for the surface of the sphere
 *   S(2).
 * 
 *   Also accepts a unitary `orientation` matrix (2-tensor, technically, a down of
 *   ups, dimension 3 each, since S(2) is embedded in 3-space) used to reposition
 *   the north pole of the spherical coordinate system.
 * 
 *   See [n-sphere: Spherical
 *   Coordinates](https://en.wikipedia.org/wiki/N-sphere#Spherical_coordinates) for
 *   notes about the generalized versions of these coordinates, for S(n).
 */
sicmutils.calculus.manifold.__GT_S2_coordinates = (function sicmutils$calculus$manifold$__GT_S2_coordinates(orientation){
var inverse_orientation = sicmutils.generic.invert.cljs$core$IFn$_invoke$arity$1(orientation);
return (function() {
var sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor = null;
var sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor__1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor.cljs$core$IFn$_invoke$arity$2(manifold,proto);
});
var sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor__2 = (function (manifold,coordinate_prototype){
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942 = (function (orientation,inverse_orientation,ctor,manifold,coordinate_prototype,id,meta81943){
this.orientation = orientation;
this.inverse_orientation = inverse_orientation;
this.ctor = ctor;
this.manifold = manifold;
this.coordinate_prototype = coordinate_prototype;
this.id = id;
this.meta81943 = meta81943;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81944,meta81943__$1){
var self__ = this;
var _81944__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942(self__.orientation,self__.inverse_orientation,self__.ctor,self__.manifold,self__.coordinate_prototype,self__.id,meta81943__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81944){
var self__ = this;
var _81944__$1 = this;
return self__.meta81943;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
return ((sicmutils.structure.up_QMARK_(coords)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords),(2))) && ((((!(sicmutils.value.number_QMARK_(coords)))) || ((cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords,(0)) >= (0))))))));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

var vec__81945 = coords;
var colatitude = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81945,(0),null);
var longitude = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81945,(1),null);
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(self__.orientation,sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(colatitude),sicmutils.generic.cos.cljs$core$IFn$_invoke$arity$1(longitude)),sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(colatitude),sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(longitude)),sicmutils.generic.cos.cljs$core$IFn$_invoke$arity$1(colatitude)], 0))),self__.manifold,this$__$1,coords);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var rep = sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(self__.inverse_orientation,sicmutils.calculus.manifold.manifold_point_representation(point));
if(((sicmutils.structure.up_QMARK_(rep)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(rep),new cljs.core.Keyword(null,"embedding-dimension","embedding-dimension",1369585967).cljs$core$IFn$_invoke$arity$1(self__.manifold))))){
var vec__81948 = rep;
var x = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81948,(0),null);
var y = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81948,(1),null);
var z = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81948,(2),null);
return sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.generic.acos.cljs$core$IFn$_invoke$arity$1(z),sicmutils.generic.atan.cljs$core$IFn$_invoke$arity$2(y,x)], 0));
} else {
return sicmutils.util.illegal("S2-coordinates bad point");
}
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.getBasis = (function (){
return new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"orientation","orientation",-2030878190,null),new cljs.core.Symbol(null,"inverse-orientation","inverse-orientation",338347381,null),new cljs.core.Symbol(null,"ctor","ctor",-903570967,null),new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"meta81943","meta81943",-1430007686,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81942");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81942");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81942.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81942 = (function sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor_$___GT_t_sicmutils$calculus$manifold81942(orientation__$1,inverse_orientation__$1,ctor__$1,manifold__$1,coordinate_prototype__$1,id__$1,meta81943){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942(orientation__$1,inverse_orientation__$1,ctor__$1,manifold__$1,coordinate_prototype__$1,id__$1,meta81943));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81942(orientation,inverse_orientation,sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor,manifold,coordinate_prototype,id,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
});
sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor = function(manifold,coordinate_prototype){
switch(arguments.length){
case 1:
return sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor__1.call(this,manifold);
case 2:
return sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor__2.call(this,manifold,coordinate_prototype);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor.cljs$core$IFn$_invoke$arity$1 = sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor__1;
sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor.cljs$core$IFn$_invoke$arity$2 = sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor__2;
return sicmutils$calculus$manifold$__GT_S2_coordinates_$_ctor;
})()
});
/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points and spherical on the
 *   unit [n-sphere](https://en.wikipedia.org/wiki/N-sphere#Spherical_coordinates),
 *   ie, S(n). The sphere is embedded in a space of dimension n+1.
 * 
 *   Also accepts an `orientation-function` from dimension `(+ n 1)` to a unitary
 *   `orientation` matrix (2-tensor, technically, a down of ups, dimension `n+1`
 *   each, since S(n) is embedded in n+1 dimensional-space). This 2-tensor is used
 *   to reposition the north pole of the spherical coordinate system.
 * 
 *   See [n-sphere: Spherical
 *   Coordinates](https://en.wikipedia.org/wiki/N-sphere#Spherical_coordinates) for
 *   notes about these coordinates.
 */
sicmutils.calculus.manifold.__GT_Sn_coordinates = (function sicmutils$calculus$manifold$__GT_Sn_coordinates(orientation_function){
var rotate_left = (function sicmutils$calculus$manifold$__GT_Sn_coordinates_$_rotate_left(l){
return cljs.core.concat.cljs$core$IFn$_invoke$arity$2((new cljs.core.LazySeq(null,(function (){
return cljs.core.rest(l);
}),null,null)),(new cljs.core.LazySeq(null,(function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.first(l)], null);
}),null,null)));
});
return (function() {
var sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor = null;
var sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor__1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor.cljs$core$IFn$_invoke$arity$2(manifold,proto);
});
var sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor__2 = (function (manifold,coordinate_prototype){
var n = new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(manifold);
var orientation_matrix = (function (){var G__81951 = (n + (1));
return (orientation_function.cljs$core$IFn$_invoke$arity$1 ? orientation_function.cljs$core$IFn$_invoke$arity$1(G__81951) : orientation_function.call(null,G__81951));
})();
var orientation_inverse_matrix = sicmutils.generic.invert.cljs$core$IFn$_invoke$arity$1(orientation_matrix);
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952 = (function (rotate_left,ctor,orientation_function,n,manifold,id,orientation_inverse_matrix,orientation_matrix,coordinate_prototype,meta81953){
this.rotate_left = rotate_left;
this.ctor = ctor;
this.orientation_function = orientation_function;
this.n = n;
this.manifold = manifold;
this.id = id;
this.orientation_inverse_matrix = orientation_inverse_matrix;
this.orientation_matrix = orientation_matrix;
this.coordinate_prototype = coordinate_prototype;
this.meta81953 = meta81953;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81954,meta81953__$1){
var self__ = this;
var _81954__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952(self__.rotate_left,self__.ctor,self__.orientation_function,self__.n,self__.manifold,self__.id,self__.orientation_inverse_matrix,self__.orientation_matrix,self__.coordinate_prototype,meta81953__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81954){
var self__ = this;
var _81954__$1 = this;
return self__.meta81953;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
var dim = sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords);
return ((((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(self__.n,(1))) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(dim,(1))))) || (((sicmutils.structure.up_QMARK_(coords)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(dim,self__.n)) && (cljs.core.every_QMARK_(cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$1((function (i,coord){
return ((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2((i + (1)),self__.n)) || ((((!(sicmutils.value.number_QMARK_(coord)))) || (cljs.core.not(sicmutils.generic.negative_QMARK_.cljs$core$IFn$_invoke$arity$1(coord))))));
})),coords)))))));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(self__.n,(1))){
var pt = sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.generic.cos.cljs$core$IFn$_invoke$arity$1(coords),sicmutils.generic.sin.cljs$core$IFn$_invoke$arity$1(coords)], 0));
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(self__.orientation_matrix,pt),self__.manifold,this$__$1,coords);
} else {
var sines = cljs.core.map.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.sin,coords);
var cosines = cljs.core.map.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.cos,coords);
var pt = sicmutils.structure.up_STAR_((function (){var G__81955 = cljs.core.map.cljs$core$IFn$_invoke$arity$2((function (i){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(i,self__.n)){
return cljs.core.apply.cljs$core$IFn$_invoke$arity$2(sicmutils.generic._STAR_,sines);
} else {
return cljs.core.apply.cljs$core$IFn$_invoke$arity$2(sicmutils.generic._STAR_,cljs.core.cons(cljs.core.nth.cljs$core$IFn$_invoke$arity$2(cosines,i),cljs.core.take.cljs$core$IFn$_invoke$arity$2(i,sines)));
}
}),cljs.core.range.cljs$core$IFn$_invoke$arity$1((self__.n + (1))));
return (self__.rotate_left.cljs$core$IFn$_invoke$arity$1 ? self__.rotate_left.cljs$core$IFn$_invoke$arity$1(G__81955) : self__.rotate_left.call(null,G__81955));
})());
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(self__.orientation_matrix,pt),self__.manifold,this$__$1,coords);
}
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var safe_atan = (function sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor_$_safe_atan(y,x){
if(((typeof y === 'number') && (((typeof x === 'number') && (((sicmutils.value.zero_QMARK_(y)) && (sicmutils.value.zero_QMARK_(x)))))))){
taoensso.timbre._log_BANG_.cljs$core$IFn$_invoke$arity$11(taoensso.timbre._STAR_config_STAR_,new cljs.core.Keyword(null,"warn","warn",-436710552),"sicmutils.calculus.manifold",null,863,new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.Keyword(null,"auto","auto",-566279492),(new cljs.core.Delay((function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, ["Sn-coordinates singular!"], null);
}),null)),null,1377055117,null);
} else {
}

return sicmutils.generic.atan.cljs$core$IFn$_invoke$arity$2(y,x);
});
var pt = (function (){var G__81956 = cljs.core.reverse(sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(self__.orientation_inverse_matrix,sicmutils.calculus.manifold.manifold_point_representation(point)));
return (self__.rotate_left.cljs$core$IFn$_invoke$arity$1 ? self__.rotate_left.cljs$core$IFn$_invoke$arity$1(G__81956) : self__.rotate_left.call(null,G__81956));
})();
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(self__.n,(1))){
return safe_atan(cljs.core.nth.cljs$core$IFn$_invoke$arity$2(pt,(1)),cljs.core.nth.cljs$core$IFn$_invoke$arity$2(pt,(0)));
} else {
var r = cljs.core.first(pt);
var more = cljs.core.rest(pt);
var ans = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [safe_atan(cljs.core.first(pt),cljs.core.second(pt))], null);
while(true){
if(cljs.core.not(cljs.core.next(more))){
return sicmutils.structure.up_STAR_(ans);
} else {
var r_SINGLEQUOTE_ = sicmutils.generic.sqrt.cljs$core$IFn$_invoke$arity$1(sicmutils.generic._PLUS_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(cljs.core.first(more)),sicmutils.generic.square.cljs$core$IFn$_invoke$arity$1(r)));
var G__82001 = r_SINGLEQUOTE_;
var G__82002 = cljs.core.rest(more);
var G__82003 = cljs.core.cons(safe_atan(r_SINGLEQUOTE_,cljs.core.second(more)),ans);
r = G__82001;
more = G__82002;
ans = G__82003;
continue;
}
break;
}
}
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.getBasis = (function (){
return new cljs.core.PersistentVector(null, 10, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"rotate-left","rotate-left",-1088090459,null),new cljs.core.Symbol(null,"ctor","ctor",-903570967,null),new cljs.core.Symbol(null,"orientation-function","orientation-function",-1851559379,null),new cljs.core.Symbol(null,"n","n",-2092305744,null),new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"orientation-inverse-matrix","orientation-inverse-matrix",1827755966,null),new cljs.core.Symbol(null,"orientation-matrix","orientation-matrix",-591482625,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"meta81953","meta81953",-2107100332,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81952");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81952");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81952.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81952 = (function sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor_$___GT_t_sicmutils$calculus$manifold81952(rotate_left__$1,ctor__$1,orientation_function__$1,n__$1,manifold__$1,id__$1,orientation_inverse_matrix__$1,orientation_matrix__$1,coordinate_prototype__$1,meta81953){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952(rotate_left__$1,ctor__$1,orientation_function__$1,n__$1,manifold__$1,id__$1,orientation_inverse_matrix__$1,orientation_matrix__$1,coordinate_prototype__$1,meta81953));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81952(rotate_left,sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor,orientation_function,n,manifold,id,orientation_inverse_matrix,orientation_matrix,coordinate_prototype,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
});
sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor = function(manifold,coordinate_prototype){
switch(arguments.length){
case 1:
return sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor__1.call(this,manifold);
case 2:
return sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor__2.call(this,manifold,coordinate_prototype);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor.cljs$core$IFn$_invoke$arity$1 = sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor__1;
sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor.cljs$core$IFn$_invoke$arity$2 = sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor__2;
return sicmutils$calculus$manifold$__GT_Sn_coordinates_$_ctor;
})()
});
/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points and a [stereographic
 *   projection]((https://en.wikipedia.org/wiki/N-sphere#Stereographic_projection))
 *   of the
 *   unit [n-sphere](https://en.wikipedia.org/wiki/N-sphere#Stereographic_projection)
 *   S(n) from the final coordinate.
 * 
 *   Also accepts an `orientation-function` from dimension `(+ n 1)` to a unitary
 *   `orientation` matrix (2-tensor, technically, a down of ups, dimension `n+1`
 *   each, since S(n) is embedded in n+1 dimensional-space). This 2-tensor is used
 *   to reposition the north pole of the spherical coordinate system.
 * 
 *   Notes from scmutils:
 * 
 *   The `orientation-function` should return an orthogonal (n+1)-by-(n+1) matrix.
 *   It can be interpreted as moving the pole / plane of projection and possibly
 *   reflecting.
 * 
 *   The default pole is (0 0 ... 1).
 *   We fire a ray through m = (m_0 ... m_n)
 * 
 *   x(t) = p + t(m - p)
 *   x(0) = p, x(1) = m
 *   x_n(t) = 1-t(1+m_n), 0 = x_n(1/(1+m_n))
 */
sicmutils.calculus.manifold.__GT_Sn_stereographic = (function sicmutils$calculus$manifold$__GT_Sn_stereographic(orientation_function){
return (function() {
var sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor = null;
var sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor__1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor.cljs$core$IFn$_invoke$arity$2(manifold,proto);
});
var sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor__2 = (function (manifold,coordinate_prototype){
var n = new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(manifold);
var orientation_matrix = (function (){var G__81959 = (n + (1));
return (orientation_function.cljs$core$IFn$_invoke$arity$1 ? orientation_function.cljs$core$IFn$_invoke$arity$1(G__81959) : orientation_function.call(null,G__81959));
})();
var orientation_inverse_matrix = sicmutils.generic.invert.cljs$core$IFn$_invoke$arity$1(orientation_matrix);
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960 = (function (orientation_function,ctor,manifold,coordinate_prototype,n,orientation_matrix,orientation_inverse_matrix,id,meta81961){
this.orientation_function = orientation_function;
this.ctor = ctor;
this.manifold = manifold;
this.coordinate_prototype = coordinate_prototype;
this.n = n;
this.orientation_matrix = orientation_matrix;
this.orientation_inverse_matrix = orientation_inverse_matrix;
this.id = id;
this.meta81961 = meta81961;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81962,meta81961__$1){
var self__ = this;
var _81962__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960(self__.orientation_function,self__.ctor,self__.manifold,self__.coordinate_prototype,self__.n,self__.orientation_matrix,self__.orientation_inverse_matrix,self__.id,meta81961__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81962){
var self__ = this;
var _81962__$1 = this;
return self__.meta81961;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
return ((((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(self__.n,(1))) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords),(1))))) || (((sicmutils.structure.up_QMARK_(coords)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords),self__.n)))));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

var coords_SINGLEQUOTE_ = ((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(self__.n,(1)))?sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([coords], 0)):coords);
var delta = sicmutils.generic.dot_product.cljs$core$IFn$_invoke$arity$2(coords_SINGLEQUOTE_,coords_SINGLEQUOTE_);
var xn = (function (){var G__81963 = sicmutils.generic._.cljs$core$IFn$_invoke$arity$2(delta,(1));
var G__81964 = sicmutils.generic._PLUS_.cljs$core$IFn$_invoke$arity$2((1),delta);
return (sicmutils.generic.divide.cljs$core$IFn$_invoke$arity$2 ? sicmutils.generic.divide.cljs$core$IFn$_invoke$arity$2(G__81963,G__81964) : sicmutils.generic.divide.call(null,G__81963,G__81964));
})();
var pt = sicmutils.structure.generate((self__.n + (1)),new cljs.core.Keyword("sicmutils.structure","up","sicmutils.structure/up",-2138938939),(function (p1__81957_SHARP_){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(p1__81957_SHARP_,self__.n)){
return xn;
} else {
var G__81965 = sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2((2),cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords_SINGLEQUOTE_,p1__81957_SHARP_));
var G__81966 = sicmutils.generic._PLUS_.cljs$core$IFn$_invoke$arity$2((1),delta);
return (sicmutils.generic.divide.cljs$core$IFn$_invoke$arity$2 ? sicmutils.generic.divide.cljs$core$IFn$_invoke$arity$2(G__81965,G__81966) : sicmutils.generic.divide.call(null,G__81965,G__81966));
}
}));
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(self__.orientation_matrix,pt),self__.manifold,this$__$1,coords);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var pt = sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(self__.orientation_inverse_matrix,sicmutils.calculus.manifold.manifold_point_representation(point));
if(((sicmutils.value.number_QMARK_(cljs.core.nth.cljs$core$IFn$_invoke$arity$2(pt,self__.n))) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(cljs.core.nth.cljs$core$IFn$_invoke$arity$2(pt,self__.n),(1))))){
sicmutils.util.illegal_state("S^n stereographic singular");
} else {
}

var coords = sicmutils.structure.generate(self__.n,new cljs.core.Keyword("sicmutils.structure","up","sicmutils.structure/up",-2138938939),(function (p1__81958_SHARP_){
var G__81967 = cljs.core.nth.cljs$core$IFn$_invoke$arity$2(pt,p1__81958_SHARP_);
var G__81968 = sicmutils.generic._.cljs$core$IFn$_invoke$arity$2((1),cljs.core.nth.cljs$core$IFn$_invoke$arity$2(pt,self__.n));
return (sicmutils.generic.divide.cljs$core$IFn$_invoke$arity$2 ? sicmutils.generic.divide.cljs$core$IFn$_invoke$arity$2(G__81967,G__81968) : sicmutils.generic.divide.call(null,G__81967,G__81968));
}));
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(self__.n,(1))){
return cljs.core.first(coords);
} else {
return coords;
}
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.getBasis = (function (){
return new cljs.core.PersistentVector(null, 9, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"orientation-function","orientation-function",-1851559379,null),new cljs.core.Symbol(null,"ctor","ctor",-903570967,null),new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"n","n",-2092305744,null),new cljs.core.Symbol(null,"orientation-matrix","orientation-matrix",-591482625,null),new cljs.core.Symbol(null,"orientation-inverse-matrix","orientation-inverse-matrix",1827755966,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"meta81961","meta81961",-1459911403,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81960");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81960");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81960.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81960 = (function sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor_$___GT_t_sicmutils$calculus$manifold81960(orientation_function__$1,ctor__$1,manifold__$1,coordinate_prototype__$1,n__$1,orientation_matrix__$1,orientation_inverse_matrix__$1,id__$1,meta81961){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960(orientation_function__$1,ctor__$1,manifold__$1,coordinate_prototype__$1,n__$1,orientation_matrix__$1,orientation_inverse_matrix__$1,id__$1,meta81961));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81960(orientation_function,sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor,manifold,coordinate_prototype,n,orientation_matrix,orientation_inverse_matrix,id,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
});
sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor = function(manifold,coordinate_prototype){
switch(arguments.length){
case 1:
return sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor__1.call(this,manifold);
case 2:
return sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor__2.call(this,manifold,coordinate_prototype);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor.cljs$core$IFn$_invoke$arity$1 = sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor__1;
sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor.cljs$core$IFn$_invoke$arity$2 = sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor__2;
return sicmutils$calculus$manifold$__GT_Sn_stereographic_$_ctor;
})()
});
/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points and a [Gnomonic
 *   Projection](https://en.wikipedia.org/wiki/Gnomonic_projection) of the [unit
 *   n-sphere](https://en.wikipedia.org/wiki/N-sphere).
 * 
 * 
 * We map the nothern hemisphere to the plane by firing a ray from the origin.
 * The coordinates are given by the intersection with the z = 1 plane.
 * x(t) = t*m
 * x_n(t) = t*m_n, 1 = x_n(1/m_n)
 * 
 *   `orientation-function` should should return an n+1-by-n+1 orthogonal matrix.
 *   It can be interpreted as moving the plane of projection, and point mapped to
 *   the origin, as well as possibly reflecting.
 * 
 * Given the coordinates x we have
 * 
 * <x,x> = (1-m_n^2)/m_n^2
 * 1 + <x,x> = (m_n^2 + 1 - m_n^2)/m_n^2
 * m_n = sqrt(1/(1+<x,x>))
 * 
 * where positive square root is sufficient for the northern hemisphere.
 */
sicmutils.calculus.manifold.__GT_Sn_gnomonic = (function sicmutils$calculus$manifold$__GT_Sn_gnomonic(orientation_function){
return (function() {
var sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor = null;
var sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor__1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor.cljs$core$IFn$_invoke$arity$2(manifold,proto);
});
var sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor__2 = (function (manifold,coordinate_prototype){
var n = new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(manifold);
var orientation_matrix = (function (){var G__81969 = (n + (1));
return (orientation_function.cljs$core$IFn$_invoke$arity$1 ? orientation_function.cljs$core$IFn$_invoke$arity$1(G__81969) : orientation_function.call(null,G__81969));
})();
var orientation_inverse_matrix = sicmutils.generic.invert.cljs$core$IFn$_invoke$arity$1(orientation_matrix);
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970 = (function (orientation_function,ctor,manifold,coordinate_prototype,n,orientation_matrix,orientation_inverse_matrix,id,meta81971){
this.orientation_function = orientation_function;
this.ctor = ctor;
this.manifold = manifold;
this.coordinate_prototype = coordinate_prototype;
this.n = n;
this.orientation_matrix = orientation_matrix;
this.orientation_inverse_matrix = orientation_inverse_matrix;
this.id = id;
this.meta81971 = meta81971;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81972,meta81971__$1){
var self__ = this;
var _81972__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970(self__.orientation_function,self__.ctor,self__.manifold,self__.coordinate_prototype,self__.n,self__.orientation_matrix,self__.orientation_inverse_matrix,self__.id,meta81971__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81972){
var self__ = this;
var _81972__$1 = this;
return self__.meta81971;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
return ((((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(self__.n,(1))) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords),(1))))) || (((sicmutils.structure.up_QMARK_(coords)) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords),self__.n)))));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

var coords__$1 = ((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(self__.n,(1)))?sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([coords], 0)):coords);
var delta = sicmutils.generic.dot_product.cljs$core$IFn$_invoke$arity$2(coords__$1,coords__$1);
var d = sicmutils.generic.sqrt.cljs$core$IFn$_invoke$arity$1(sicmutils.generic._PLUS_.cljs$core$IFn$_invoke$arity$2((1),delta));
var xn = sicmutils.generic._SLASH_.cljs$core$IFn$_invoke$arity$2((1),d);
var pt = sicmutils.structure.generate(sicmutils.generic._PLUS_.cljs$core$IFn$_invoke$arity$2(self__.n,(1)),new cljs.core.Keyword("sicmutils.structure","up","sicmutils.structure/up",-2138938939),(function (i){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(i,self__.n)){
return xn;
} else {
return sicmutils.generic._SLASH_.cljs$core$IFn$_invoke$arity$2(cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords__$1,i),d);
}
}));
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(self__.orientation_matrix,pt),self__.manifold,this$__$1,coords__$1);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var pt = sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$2(self__.orientation_inverse_matrix,sicmutils.calculus.manifold.manifold_point_representation(point));
var final_coord = cljs.core.nth.cljs$core$IFn$_invoke$arity$2(pt,self__.n);
if(cljs.core.truth_((function (){var and__4251__auto__ = sicmutils.value.number_QMARK_(final_coord);
if(and__4251__auto__){
var or__4253__auto__ = sicmutils.generic.negative_QMARK_.cljs$core$IFn$_invoke$arity$1(final_coord);
if(cljs.core.truth_(or__4253__auto__)){
return or__4253__auto__;
} else {
return sicmutils.value.zero_QMARK_(final_coord);
}
} else {
return and__4251__auto__;
}
})())){
throw cljs.core.ex_info.cljs$core$IFn$_invoke$arity$2("Point not covered by S^n-gnomic coordinate patch.",new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"point","point",1813198264),point,new cljs.core.Keyword(null,"coordinate-system","coordinate-system",-1298347271),this$__$1], null));
} else {
}

var coords = sicmutils.structure.generate(self__.n,new cljs.core.Keyword("sicmutils.structure","up","sicmutils.structure/up",-2138938939),(function (i){
return sicmutils.generic._SLASH_.cljs$core$IFn$_invoke$arity$2(cljs.core.nth.cljs$core$IFn$_invoke$arity$2(pt,i),final_coord);
}));
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(self__.n,(1))){
return cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords,(0));
} else {
return coords;
}
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.getBasis = (function (){
return new cljs.core.PersistentVector(null, 9, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"orientation-function","orientation-function",-1851559379,null),new cljs.core.Symbol(null,"ctor","ctor",-903570967,null),new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"n","n",-2092305744,null),new cljs.core.Symbol(null,"orientation-matrix","orientation-matrix",-591482625,null),new cljs.core.Symbol(null,"orientation-inverse-matrix","orientation-inverse-matrix",1827755966,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"meta81971","meta81971",-1167114643,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81970");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81970");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81970.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81970 = (function sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor_$___GT_t_sicmutils$calculus$manifold81970(orientation_function__$1,ctor__$1,manifold__$1,coordinate_prototype__$1,n__$1,orientation_matrix__$1,orientation_inverse_matrix__$1,id__$1,meta81971){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970(orientation_function__$1,ctor__$1,manifold__$1,coordinate_prototype__$1,n__$1,orientation_matrix__$1,orientation_inverse_matrix__$1,id__$1,meta81971));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81970(orientation_function,sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor,manifold,coordinate_prototype,n,orientation_matrix,orientation_inverse_matrix,id,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
});
sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor = function(manifold,coordinate_prototype){
switch(arguments.length){
case 1:
return sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor__1.call(this,manifold);
case 2:
return sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor__2.call(this,manifold,coordinate_prototype);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor.cljs$core$IFn$_invoke$arity$1 = sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor__1;
sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor.cljs$core$IFn$_invoke$arity$2 = sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor__2;
return sicmutils$calculus$manifold$__GT_Sn_gnomonic_$_ctor;
})()
});
/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points and the [Euler angles](https://en.wikipedia.org/wiki/Euler_angles) for
 *   SO(3).
 */
sicmutils.calculus.manifold.__GT_Euler_chart = (function sicmutils$calculus$manifold$__GT_Euler_chart(var_args){
var G__81974 = arguments.length;
switch (G__81974) {
case 1:
return sicmutils.calculus.manifold.__GT_Euler_chart.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
case 2:
return sicmutils.calculus.manifold.__GT_Euler_chart.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(sicmutils.calculus.manifold.__GT_Euler_chart.cljs$core$IFn$_invoke$arity$1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils.calculus.manifold.__GT_Euler_chart.cljs$core$IFn$_invoke$arity$2(manifold,proto);
}));

(sicmutils.calculus.manifold.__GT_Euler_chart.cljs$core$IFn$_invoke$arity$2 = (function (manifold,coordinate_prototype){
var n = new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(manifold);
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975 = (function (manifold,coordinate_prototype,n,id,meta81976){
this.manifold = manifold;
this.coordinate_prototype = coordinate_prototype;
this.n = n;
this.id = id;
this.meta81976 = meta81976;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81977,meta81976__$1){
var self__ = this;
var _81977__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975(self__.manifold,self__.coordinate_prototype,self__.n,self__.id,meta81976__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81977){
var self__ = this;
var _81977__$1 = this;
return self__.meta81976;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
var and__4251__auto__ = sicmutils.structure.up_QMARK_(coords);
if(and__4251__auto__){
var and__4251__auto____$1 = cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords),self__.n);
if(and__4251__auto____$1){
var c0 = cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords,(0));
return (((!(sicmutils.value.number_QMARK_(c0)))) || ((!(sicmutils.value.zero_QMARK_(c0)))));
} else {
return and__4251__auto____$1;
}
} else {
return and__4251__auto__;
}
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

var vec__81978 = coords;
var theta = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81978,(0),null);
var phi = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81978,(1),null);
var psi = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81978,(2),null);
var Mx_theta = sicmutils.mechanics.rotation.rotate_x_matrix(theta);
var Mz_phi = sicmutils.mechanics.rotation.rotate_z_matrix(phi);
var Mz_psi = sicmutils.mechanics.rotation.rotate_z_matrix(psi);
var M = sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$variadic(Mz_phi,Mx_theta,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([Mz_psi], 0));
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(M,self__.manifold,this$__$1,coords);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var M = sicmutils.calculus.manifold.manifold_point_representation(point);
var theta = sicmutils.generic.acos.cljs$core$IFn$_invoke$arity$1(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(2),(2)], null)));
var phi = sicmutils.generic.atan.cljs$core$IFn$_invoke$arity$2(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(0),(2)], null)),sicmutils.generic.negate.cljs$core$IFn$_invoke$arity$1(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(1),(2)], null))));
var psi = sicmutils.generic.atan.cljs$core$IFn$_invoke$arity$2(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(2),(0)], null)),cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(2),(1)], null)));
return sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([theta,phi,psi], 0));
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.getBasis = (function (){
return new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"n","n",-2092305744,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"meta81976","meta81976",97111159,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81975");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81975");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81975.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81975 = (function sicmutils$calculus$manifold$__GT_t_sicmutils$calculus$manifold81975(manifold__$1,coordinate_prototype__$1,n__$1,id__$1,meta81976){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975(manifold__$1,coordinate_prototype__$1,n__$1,id__$1,meta81976));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81975(manifold,coordinate_prototype,n,id,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
}));

(sicmutils.calculus.manifold.__GT_Euler_chart.cljs$lang$maxFixedArity = 2);

/**
 * Returns an [[ICoordinateSystem]] instance that converts between `manifold`
 *   points and the alternate angles for SO(3).
 * 
 *   NOTE: Please add docs about what these are!
 */
sicmutils.calculus.manifold.__GT_Alternate_chart = (function sicmutils$calculus$manifold$__GT_Alternate_chart(var_args){
var G__81982 = arguments.length;
switch (G__81982) {
case 1:
return sicmutils.calculus.manifold.__GT_Alternate_chart.cljs$core$IFn$_invoke$arity$1((arguments[(0)]));

break;
case 2:
return sicmutils.calculus.manifold.__GT_Alternate_chart.cljs$core$IFn$_invoke$arity$2((arguments[(0)]),(arguments[(1)]));

break;
default:
throw (new Error(["Invalid arity: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(arguments.length)].join('')));

}
});

(sicmutils.calculus.manifold.__GT_Alternate_chart.cljs$core$IFn$_invoke$arity$1 = (function (manifold){
var proto = sicmutils.calculus.manifold.default_coordinate_prototype(manifold);
return sicmutils.calculus.manifold.__GT_Alternate_chart.cljs$core$IFn$_invoke$arity$2(manifold,proto);
}));

(sicmutils.calculus.manifold.__GT_Alternate_chart.cljs$core$IFn$_invoke$arity$2 = (function (manifold,coordinate_prototype){
var n = new cljs.core.Keyword(null,"dimension","dimension",543254198).cljs$core$IFn$_invoke$arity$1(manifold);
var id = sicmutils.util.uuid();
return cljs.core.with_meta((function (){
if((typeof sicmutils !== 'undefined') && (typeof sicmutils.calculus !== 'undefined') && (typeof sicmutils.calculus.manifold !== 'undefined') && (typeof sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {sicmutils.calculus.manifold.ICoordinateSystem}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.core.IWithMeta}
*/
sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983 = (function (manifold,coordinate_prototype,n,id,meta81984){
this.manifold = manifold;
this.coordinate_prototype = coordinate_prototype;
this.n = n;
this.id = id;
this.meta81984 = meta81984;
this.cljs$lang$protocol_mask$partition0$ = 393216;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_81985,meta81984__$1){
var self__ = this;
var _81985__$1 = this;
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983(self__.manifold,self__.coordinate_prototype,self__.n,self__.id,meta81984__$1));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_81985){
var self__ = this;
var _81985__$1 = this;
return self__.meta81984;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.prototype.sicmutils$calculus$manifold$ICoordinateSystem$ = cljs.core.PROTOCOL_SENTINEL);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2 = (function (_,coords){
var self__ = this;
var ___$1 = this;
return ((sicmutils.structure.up_QMARK_(coords)) && (((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.dimension.cljs$core$IFn$_invoke$arity$1(coords),self__.n)) && ((((!(sicmutils.value.number_QMARK_(cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords,(0)))))) || (((((Math.PI / (-2)) < cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords,(0)))) && ((cljs.core.nth.cljs$core$IFn$_invoke$arity$2(coords,(0)) < (Math.PI / (2)))))))))));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.prototype.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2 = (function (_,point){
var self__ = this;
var ___$1 = this;
return sicmutils.calculus.manifold.my_manifold_point_QMARK_(point,self__.manifold);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.prototype.sicmutils$calculus$manifold$ICoordinateSystem$coords__GT_point$arity$2 = (function (this$,coords){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_coordinates$arity$2(null,coords))){
} else {
throw (new Error("Assert failed: (check-coordinates this coords)"));
}

var vec__81986 = coords;
var theta = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81986,(0),null);
var phi = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81986,(1),null);
var psi = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__81986,(2),null);
var Mx_theta = sicmutils.mechanics.rotation.rotate_x_matrix(theta);
var Mz_phi = sicmutils.mechanics.rotation.rotate_z_matrix(phi);
var My_psi = sicmutils.mechanics.rotation.rotate_y_matrix(psi);
var pt = sicmutils.generic._STAR_.cljs$core$IFn$_invoke$arity$variadic(Mz_phi,Mx_theta,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([My_psi], 0));
return sicmutils.calculus.manifold.make_manifold_point.cljs$core$IFn$_invoke$arity$4(pt,self__.manifold,this$__$1,coords);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.prototype.sicmutils$calculus$manifold$ICoordinateSystem$point__GT_coords$arity$2 = (function (this$,point){
var self__ = this;
var this$__$1 = this;
if(cljs.core.truth_(this$__$1.sicmutils$calculus$manifold$ICoordinateSystem$check_point$arity$2(null,point))){
} else {
throw (new Error("Assert failed: (check-point this point)"));
}

return sicmutils.calculus.manifold.get_coordinates(point,this$__$1,(function (){
var M = sicmutils.calculus.manifold.manifold_point_representation(point);
var theta = sicmutils.generic.asin.cljs$core$IFn$_invoke$arity$1(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(2),(1)], null)));
var phi = sicmutils.generic.atan.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.negate.cljs$core$IFn$_invoke$arity$1(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(0),(1)], null))),cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(1),(1)], null)));
var psi = sicmutils.generic.atan.cljs$core$IFn$_invoke$arity$2(sicmutils.generic.negate.cljs$core$IFn$_invoke$arity$1(cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(2),(0)], null))),cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(M,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(2),(2)], null)));
return sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([theta,phi,psi], 0));
}));
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.prototype.sicmutils$calculus$manifold$ICoordinateSystem$uuid$arity$1 = (function (_){
var self__ = this;
var ___$1 = this;
return self__.id;
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.getBasis = (function (){
return new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"manifold","manifold",-299796682,null),new cljs.core.Symbol(null,"coordinate-prototype","coordinate-prototype",-1149174049,null),new cljs.core.Symbol(null,"n","n",-2092305744,null),new cljs.core.Symbol(null,"id","id",252129435,null),new cljs.core.Symbol(null,"meta81984","meta81984",-537486185,null)], null);
}));

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.cljs$lang$type = true);

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.cljs$lang$ctorStr = "sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81983");

(sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983.cljs$lang$ctorPrWriter = (function (this__4491__auto__,writer__4492__auto__,opt__4493__auto__){
return cljs.core._write(writer__4492__auto__,"sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81983");
}));

/**
 * Positional factory function for sicmutils.calculus.manifold/t_sicmutils$calculus$manifold81983.
 */
sicmutils.calculus.manifold.__GT_t_sicmutils$calculus$manifold81983 = (function sicmutils$calculus$manifold$__GT_t_sicmutils$calculus$manifold81983(manifold__$1,coordinate_prototype__$1,n__$1,id__$1,meta81984){
return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983(manifold__$1,coordinate_prototype__$1,n__$1,id__$1,meta81984));
});

}

return (new sicmutils.calculus.manifold.t_sicmutils$calculus$manifold81983(manifold,coordinate_prototype,n,id,cljs.core.PersistentArrayMap.EMPTY));
})()
,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword("sicmutils.calculus.manifold","coord-prototype","sicmutils.calculus.manifold/coord-prototype",1610656942),coordinate_prototype,new cljs.core.Keyword("sicmutils.calculus.manifold","manifold","sicmutils.calculus.manifold/manifold",-1883493830),manifold], null));
}));

(sicmutils.calculus.manifold.__GT_Alternate_chart.cljs$lang$maxFixedArity = 2);

sicmutils.calculus.manifold.Rn = sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_patch(sicmutils.calculus.manifold.make_manifold_family.cljs$core$IFn$_invoke$arity$1("R(%d)"),new cljs.core.Keyword(null,"origin","origin",1037372088)),new cljs.core.Keyword(null,"rectangular","rectangular",193204560),new cljs.core.Keyword(null,"origin","origin",1037372088),sicmutils.calculus.manifold.__GT_Rectangular),new cljs.core.Keyword(null,"polar-cylindrical","polar-cylindrical",-803036371),new cljs.core.Keyword(null,"origin","origin",1037372088),sicmutils.calculus.manifold.__GT_PolarCylindrical),new cljs.core.Keyword(null,"spherical-cylindrical","spherical-cylindrical",-1256191895),new cljs.core.Keyword(null,"origin","origin",1037372088),sicmutils.calculus.manifold.__GT_SphericalCylindrical);
sicmutils.calculus.manifold.R1 = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.Rn,(1));
sicmutils.calculus.manifold.R1_rect = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.R1,new cljs.core.Keyword(null,"rectangular","rectangular",193204560),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.the_real_line = sicmutils.calculus.manifold.R1_rect;
sicmutils.calculus.manifold.R2 = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.Rn,(2));
sicmutils.calculus.manifold.R2_rect = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.R2,new cljs.core.Keyword(null,"rectangular","rectangular",193204560),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.R2_polar = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.R2,new cljs.core.Keyword(null,"polar-cylindrical","polar-cylindrical",-803036371),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.R3 = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.Rn,(3));
sicmutils.calculus.manifold.R3_rect = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.R3,new cljs.core.Keyword(null,"rectangular","rectangular",193204560),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.R3_cyl = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.R3,new cljs.core.Keyword(null,"polar-cylindrical","polar-cylindrical",-803036371),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.R3_spherical = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.R3,new cljs.core.Keyword(null,"spherical-cylindrical","spherical-cylindrical",-1256191895),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.R4 = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.Rn,(4));
sicmutils.calculus.manifold.R4_rect = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.R4,new cljs.core.Keyword(null,"rectangular","rectangular",193204560),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.R4_cyl = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.R4,new cljs.core.Keyword(null,"polar-cylindrical","polar-cylindrical",-803036371),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.spacetime = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.Rn,new cljs.core.Keyword(null,"spacetime-spherical","spacetime-spherical",-751929014),new cljs.core.Keyword(null,"origin","origin",1037372088),sicmutils.calculus.manifold.__GT_SpacetimeSpherical),(4));
sicmutils.calculus.manifold.spacetime_rect = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.spacetime,new cljs.core.Keyword(null,"rectangular","rectangular",193204560),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.spacetime_sphere = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.spacetime,new cljs.core.Keyword(null,"spacetime-spherical","spacetime-spherical",-751929014),new cljs.core.Keyword(null,"origin","origin",1037372088));
sicmutils.calculus.manifold.S2_type = sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_patch(sicmutils.calculus.manifold.attach_patch(sicmutils.calculus.manifold.attach_patch(sicmutils.calculus.manifold.make_manifold_family.cljs$core$IFn$_invoke$arity$1("S2"),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402)),new cljs.core.Keyword(null,"south-pole","south-pole",-663994324)),new cljs.core.Keyword(null,"tilted","tilted",-1077184052)),new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402),sicmutils.calculus.manifold.__GT_S2_coordinates(sicmutils.structure.down.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(1),(0),(0)], 0)),sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(0),(1),(0)], 0)),sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(0),(0),(1)], 0))], 0)))),new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"tilted","tilted",-1077184052),sicmutils.calculus.manifold.__GT_S2_coordinates(sicmutils.structure.down.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(1),(0),(0)], 0)),sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(0),(0),(1)], 0)),sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(0),(-1),(0)], 0))], 0)))),new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"south-pole","south-pole",-663994324),sicmutils.calculus.manifold.__GT_S2_coordinates(sicmutils.structure.down.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(1),(0),(0)], 0)),sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(0),(1),(0)], 0)),sicmutils.structure.up.cljs$core$IFn$_invoke$arity$variadic(cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([(0),(0),(-1)], 0))], 0)))),new cljs.core.Keyword(null,"stereographic","stereographic",-1557537208),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402),sicmutils.calculus.manifold.__GT_Sn_stereographic(sicmutils.matrix.I)),new cljs.core.Keyword(null,"stereographic","stereographic",-1557537208),new cljs.core.Keyword(null,"south-pole","south-pole",-663994324),sicmutils.calculus.manifold.__GT_Sn_stereographic((function (n){
return sicmutils.matrix.generate.cljs$core$IFn$_invoke$arity$3(n,n,(function (i,j){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(i,j)){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(j,n)){
return (-1);
} else {
return (1);
}
} else {
return (0);
}
}));
}))),new cljs.core.Keyword(null,"gnomonic","gnomonic",-1350375895),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402),sicmutils.calculus.manifold.__GT_Sn_gnomonic(sicmutils.matrix.I)),new cljs.core.Keyword(null,"gnomonic","gnomonic",-1350375895),new cljs.core.Keyword(null,"south-pole","south-pole",-663994324),sicmutils.calculus.manifold.__GT_Sn_gnomonic((function (n){
return sicmutils.matrix.generate.cljs$core$IFn$_invoke$arity$3(n,n,(function (i,j){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(i,j)){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(j,n)){
return (-1);
} else {
return (1);
}
} else {
return (0);
}
}));
})));
sicmutils.calculus.manifold.S2 = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$3(sicmutils.calculus.manifold.S2_type,(2),(3));
sicmutils.calculus.manifold.S2_spherical = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S2,new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
/**
 * Similar to the [[S2-spherical]] coordinate system, with the north
 *   pole rotated 90 degrees and lying along the positive y axis.
 */
sicmutils.calculus.manifold.S2_tilted = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S2,new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"tilted","tilted",-1077184052));
sicmutils.calculus.manifold.S2_stereographic = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S2,new cljs.core.Keyword(null,"stereographic","stereographic",-1557537208),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.S2_Riemann = sicmutils.calculus.manifold.S2_stereographic;
sicmutils.calculus.manifold.S2_gnomonic = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S2,new cljs.core.Keyword(null,"gnomonic","gnomonic",-1350375895),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.Sn = sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_patch(sicmutils.calculus.manifold.attach_patch(sicmutils.calculus.manifold.attach_patch(sicmutils.calculus.manifold.make_manifold_family.cljs$core$IFn$_invoke$arity$1("S(%d)"),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402)),new cljs.core.Keyword(null,"south-pole","south-pole",-663994324)),new cljs.core.Keyword(null,"tilted","tilted",-1077184052)),new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402),sicmutils.calculus.manifold.__GT_Sn_coordinates(sicmutils.matrix.I)),new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"south-pole","south-pole",-663994324),sicmutils.calculus.manifold.__GT_Sn_coordinates((function (n){
return sicmutils.matrix.generate.cljs$core$IFn$_invoke$arity$3(n,n,(function (i,j){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(i,j)){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(j,n)){
return (-1);
} else {
return (1);
}
} else {
return (0);
}
}));
}))),new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"tilted","tilted",-1077184052),sicmutils.calculus.manifold.__GT_Sn_coordinates((function (n){
return sicmutils.structure.generate(n,new cljs.core.Keyword("sicmutils.structure","down","sicmutils.structure/down",-1499865924),(function (col){
return sicmutils.structure.generate(n,new cljs.core.Keyword("sicmutils.structure","up","sicmutils.structure/up",-2138938939),(function (row){
if(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(row,(n - (2)))) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(col,(n - (1)))))){
return (-1);
} else {
if(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(row,(n - (1)))) && (cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(col,(n - (2)))))){
return (1);
} else {
if(((cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(row,col)) && ((row < (n - (2)))))){
return (1);
} else {
return (0);

}
}
}
}));
}));
}))),new cljs.core.Keyword(null,"gnomonic","gnomonic",-1350375895),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402),sicmutils.calculus.manifold.__GT_Sn_gnomonic(sicmutils.matrix.I)),new cljs.core.Keyword(null,"gnomonic","gnomonic",-1350375895),new cljs.core.Keyword(null,"south-pole","south-pole",-663994324),sicmutils.calculus.manifold.__GT_Sn_gnomonic((function (n){
return sicmutils.matrix.generate.cljs$core$IFn$_invoke$arity$3(n,n,(function (i,j){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(i,j)){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(j,n)){
return (-1);
} else {
return (1);
}
} else {
return (0);
}
}));
}))),new cljs.core.Keyword(null,"stereographic","stereographic",-1557537208),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402),sicmutils.calculus.manifold.__GT_Sn_stereographic(sicmutils.matrix.I)),new cljs.core.Keyword(null,"stereographic","stereographic",-1557537208),new cljs.core.Keyword(null,"south-pole","south-pole",-663994324),sicmutils.calculus.manifold.__GT_Sn_stereographic((function (n){
return sicmutils.matrix.generate.cljs$core$IFn$_invoke$arity$3(n,n,(function (i,j){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(i,j)){
if(cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(j,n)){
return (-1);
} else {
return (1);
}
} else {
return (0);
}
}));
})));
sicmutils.calculus.manifold.S1 = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.Sn,(1));
sicmutils.calculus.manifold.S1_circular = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S1,new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.S1_tilted = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S1,new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"tilted","tilted",-1077184052));
sicmutils.calculus.manifold.S1_slope = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S1,new cljs.core.Keyword(null,"stereographic","stereographic",-1557537208),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.S1_gnomonic = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S1,new cljs.core.Keyword(null,"gnomonic","gnomonic",-1350375895),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.S2p = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.Sn,(2));
sicmutils.calculus.manifold.S2p_spherical = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S2p,new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.S2p_tilted = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S2p,new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"tilted","tilted",-1077184052));
sicmutils.calculus.manifold.S2p_stereographic = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S2p,new cljs.core.Keyword(null,"stereographic","stereographic",-1557537208),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.S2p_Riemann = sicmutils.calculus.manifold.S2p_stereographic;
sicmutils.calculus.manifold.S2p_gnomonic = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S2p,new cljs.core.Keyword(null,"gnomonic","gnomonic",-1350375895),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.S3 = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.Sn,(3));
sicmutils.calculus.manifold.S3_spherical = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S3,new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.S3_tilted = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S3,new cljs.core.Keyword(null,"spherical","spherical",556747504),new cljs.core.Keyword(null,"tilted","tilted",-1077184052));
sicmutils.calculus.manifold.S3_gnomonic = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S3,new cljs.core.Keyword(null,"gnomonic","gnomonic",-1350375895),new cljs.core.Keyword(null,"north-pole","north-pole",-1543616402));
sicmutils.calculus.manifold.S3_stereographic = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.S3,new cljs.core.Keyword(null,"stereographic","stereographic",-1557537208),new cljs.core.Keyword(null,"south-pole","south-pole",-663994324));
sicmutils.calculus.manifold.SO3_type = sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_coordinate_system(sicmutils.calculus.manifold.attach_patch(sicmutils.calculus.manifold.attach_patch(sicmutils.calculus.manifold.make_manifold_family.cljs$core$IFn$_invoke$arity$1("SO3"),new cljs.core.Keyword(null,"Euler-patch","Euler-patch",-700594077)),new cljs.core.Keyword(null,"alternate-patch","alternate-patch",1191317178)),new cljs.core.Keyword(null,"Euler","Euler",-773634476),new cljs.core.Keyword(null,"Euler-patch","Euler-patch",-700594077),sicmutils.calculus.manifold.__GT_Euler_chart),new cljs.core.Keyword(null,"alternate","alternate",-931038644),new cljs.core.Keyword(null,"alternate-patch","alternate-patch",1191317178),sicmutils.calculus.manifold.__GT_Alternate_chart);
sicmutils.calculus.manifold.SO3 = sicmutils.calculus.manifold.make_manifold.cljs$core$IFn$_invoke$arity$2(sicmutils.calculus.manifold.SO3_type,(3));
sicmutils.calculus.manifold.Euler_angles = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.SO3,new cljs.core.Keyword(null,"Euler","Euler",-773634476),new cljs.core.Keyword(null,"Euler-patch","Euler-patch",-700594077));
sicmutils.calculus.manifold.alternate_angles = sicmutils.calculus.manifold.coordinate_system_at(sicmutils.calculus.manifold.SO3,new cljs.core.Keyword(null,"alternate","alternate",-931038644),new cljs.core.Keyword(null,"alternate-patch","alternate-patch",1191317178));

//# sourceMappingURL=sicmutils.calculus.manifold.js.map
