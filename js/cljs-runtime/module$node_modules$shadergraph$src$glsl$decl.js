shadow$provide.module$node_modules$shadergraph$src$glsl$decl=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.decl=void 0;global=require("module$node_modules$three$src$math$Vector2");module=require("module$node_modules$three$src$math$Vector3");var _Vector3=require("module$node_modules$three$src$math$Vector4"),_Matrix=require("module$node_modules$three$src$math$Matrix3");require=require("module$node_modules$three$src$math$Matrix4");const decl={};
exports.decl=decl;decl.in=0;decl.out=1;decl.inout=2;decl.node=function(node){if("function"===(null!=node.children[5]?node.children[5].type:void 0))return decl.function(node);if("keyword"===(null!=node.token?node.token.type:void 0))return decl.external(node)};decl.external=function(node){node=node.children;let storage=node[1].token.data;const type=node[4].token.data,list=node[5];["attribute","uniform","varying"].includes(storage)||(storage="global");const out=[];for(let i=0;i<list.children.length;i++)if(node=
list.children[i],"ident"===node.type){var next=list.children[i+1];next="quantifier"===(null!=next?next.type:void 0);out.push({decl:"external",storage,type,ident:node.token.data,quant:!!next,count:next})}return out};decl.function=function(node){var c=node.children;node=c[1].token.data;const type=c[4].token.data;var func=c[5];c=func.children[0].token.data;const body=func.children[2];func=Array.from(func.children[1].children).map(child=>decl.argument(child));return[{decl:"function",storage:node,type,
ident:c,body:!!body,args:func}]};decl.argument=function(node){node=node.children;const list=node[5],quant=list.children[1];return{decl:"argument",storage:node[1].token.data,inout:node[2].token.data,type:node[4].token.data,ident:list.children[0].token.data,quant:!!quant,count:quant?quant.children[0].token.data:void 0}};decl.param=function(dir$jscomp$0,storage,spec,quant,count){let prefix=[];null!=storage&&prefix.push(storage);null!=spec&&prefix.push(spec);prefix.push("");prefix=prefix.join(" ");const suffix=
quant?"["+count+"]":"";""!==dir$jscomp$0&&(dir$jscomp$0+=" ");const f=(name,long)=>(long?dir$jscomp$0:"")+`${prefix}${name}${suffix}`;f.split=dir=>decl.param(dir,storage,spec,quant,count);return f};exports="undefined"!==typeof window&&!!window.THREE;const defaults={int:0,float:0,vec2:exports?global.Vector2:null,vec3:exports?module.Vector3:null,vec4:exports?_Vector3.Vector4:null,mat2:null,mat3:exports?_Matrix.Matrix3:null,mat4:exports?require.Matrix4:null,sampler2D:0,samplerCube:0},three={int:"i",
float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat2:"m2",mat3:"m3",mat4:"m4",sampler2D:"t",samplerCube:"t"};decl.type=function(name,spec,quant,count,dir,storage){var dirs={in:decl.in,out:decl.out,inout:decl.inout};let type=three[spec];quant&&(type+="v");let value=defaults[spec];null!=value&&value.call&&(value=new value);quant&&(value=[value]);dirs=null!=dirs[dir]?dirs[dir]:dirs.in;storage={const:"const"}[storage];quant=decl.param(dir,storage,spec,quant,count);return new Definition(name,type,spec,quant,value,
dirs)};class Definition{constructor(name,type,spec,param,value,inout,meta){this.name=name;this.type=type;this.spec=spec;this.param=param;this.value=value;this.inout=inout;this.meta=meta}split(){var isIn=null!=this.meta.shadowed;const inout=isIn?decl.in:decl.out;isIn=this.param.split(isIn?"in":"out");return new Definition(this.name,this.type,this.spec,isIn,this.value,inout)}copy(name,meta){return new Definition(null!=name?name:this.name,this.type,this.spec,this.param,this.value,this.inout,meta)}}}
//# sourceMappingURL=module$node_modules$shadergraph$src$glsl$decl.js.map
