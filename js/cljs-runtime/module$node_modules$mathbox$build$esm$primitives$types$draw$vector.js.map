{
"version":3,
"file":"module$node_modules$mathbox$build$esm$primitives$types$draw$vector.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/primitives/types/draw/vector.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$primitives$types$draw$vector\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Vector = void 0;\n\nvar UJS = _interopRequireWildcard(require(\"../../../util/js.js\"));\n\nvar _primitive = require(\"../../primitive.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nclass Vector extends _primitive.Primitive {\n  static initClass() {\n    this.traits = [\"node\", \"object\", \"visible\", \"style\", \"line\", \"arrow\", \"geometry\", \"position\", \"bind\", \"shade\"];\n  }\n\n  constructor(node, context, helpers) {\n    super(node, context, helpers);\n    this.line = this.arrows = null;\n  }\n\n  resize() {\n    if (this.bind.points == null) {\n      return;\n    }\n\n    const dims = this.bind.points.getActiveDimensions();\n    const samples = dims.items;\n    const strips = dims.width;\n    const ribbons = dims.height;\n    const layers = dims.depth;\n    this.line.geometry.clip(samples, strips, ribbons, layers);\n    return Array.from(this.arrows).map(arrow => arrow.geometry.clip(samples, strips, ribbons, layers));\n  }\n\n  make() {\n    // Bind to attached data sources\n    let color;\n\n    this._helpers.bind.make([{\n      to: \"geometry.points\",\n      trait: \"source\"\n    }, {\n      to: \"geometry.colors\",\n      trait: \"source\"\n    }]);\n\n    if (this.bind.points == null) {\n      return;\n    } // Build transform chain\n\n\n    let position = this._shaders.shader(); // Fetch position\n\n\n    this.bind.points.sourceShader(position); // Transform position to view\n\n    this._helpers.position.pipeline(position); // Prepare bound uniforms\n\n\n    const styleUniforms = this._helpers.style.uniforms();\n\n    const lineUniforms = this._helpers.line.uniforms();\n\n    const arrowUniforms = this._helpers.arrow.uniforms();\n\n    const unitUniforms = this._inherit(\"unit\").getUnitUniforms(); // Clip start/end for terminating arrow\n\n\n    const {\n      start,\n      end\n    } = this.props; // Stroke style\n\n    const {\n      stroke,\n      join,\n      proximity,\n      closed\n    } = this.props;\n    this.proximity = proximity; // Fetch geometry dimensions\n\n    const dims = this.bind.points.getDimensions();\n    const samples = dims.items;\n    const strips = dims.width;\n    const ribbons = dims.height;\n    const layers = dims.depth; // Build color lookup\n\n    if (this.bind.colors) {\n      color = this._shaders.shader();\n      this.bind.colors.sourceShader(color);\n    } // Build transition mask lookup\n\n\n    let mask = this._helpers.object.mask(); // Build fragment material lookup\n\n\n    let material = this._helpers.shade.pipeline() || false; // Swizzle vector to line\n\n    const {\n      swizzle,\n      swizzle2\n    } = this._helpers.position;\n    position = swizzle2(position, \"yzwx\", \"yzwx\");\n    color = swizzle(color, \"yzwx\");\n    mask = swizzle(mask, \"yzwx\");\n    material = swizzle(material, \"yzwx\"); // Make line renderable\n\n    const uniforms = UJS.merge(arrowUniforms, lineUniforms, styleUniforms, unitUniforms);\n    this.line = this._renderables.make(\"line\", {\n      uniforms,\n      samples,\n      ribbons,\n      strips,\n      layers,\n      position,\n      color,\n      clip: start || end,\n      stroke,\n      join,\n      proximity,\n      closed,\n      mask,\n      material\n    }); // Make arrow renderables\n\n    this.arrows = [];\n\n    if (start) {\n      this.arrows.push(this._renderables.make(\"arrow\", {\n        uniforms,\n        flip: true,\n        samples,\n        ribbons,\n        strips,\n        layers,\n        position,\n        color,\n        closed,\n        mask,\n        material\n      }));\n    }\n\n    if (end) {\n      this.arrows.push(this._renderables.make(\"arrow\", {\n        uniforms,\n        samples,\n        ribbons,\n        strips,\n        layers,\n        position,\n        color,\n        closed,\n        mask,\n        material\n      }));\n    }\n\n    this._helpers.visible.make();\n\n    return this._helpers.object.make(this.arrows.concat([this.line]));\n  }\n\n  made() {\n    return this.resize();\n  }\n\n  unmake() {\n    this._helpers.bind.unmake();\n\n    this._helpers.visible.unmake();\n\n    this._helpers.object.unmake();\n\n    return this.line = this.arrows = null;\n  }\n\n  change(changed, _touched, _init) {\n    if (changed[\"geometry.points\"] || changed[\"line.stroke\"] || changed[\"line.join\"] || changed[\"arrow.start\"] || changed[\"arrow.end\"]) {\n      return this.rebuild();\n    }\n\n    if (changed[\"line.proximity\"]) {\n      if (this.proximity != null !== (this.props.proximity != null)) {\n        return this.rebuild();\n      }\n    }\n  }\n\n}\n\nexports.Vector = Vector;\nVector.initClass();\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","Vector","UJS","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_primitive","Primitive","initClass","traits","constructor","node","context","helpers","line","arrows","resize","bind","points","dims","getActiveDimensions","samples","items","strips","width","ribbons","height","layers","depth","geometry","clip","Array","from","map","arrow","make","color","_helpers","to","trait","position","_shaders","shader","sourceShader","pipeline","styleUniforms","style","uniforms","lineUniforms","arrowUniforms","unitUniforms","_inherit","getUnitUniforms","start","end","props","stroke","join","proximity","closed","getDimensions","colors","mask","object","material","shade","swizzle","swizzle2","merge","_renderables","push","flip","visible","concat","made","unmake","change","changed","_touched","_init","rebuild"]
}
