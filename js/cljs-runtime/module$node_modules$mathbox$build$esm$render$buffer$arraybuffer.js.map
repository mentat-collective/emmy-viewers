{
"version":3,
"file":"module$node_modules$mathbox$build$esm$render$buffer$arraybuffer.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/render/buffer/arraybuffer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$render$buffer$arraybuffer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ArrayBuffer_ = void 0;\n\nvar UData = _interopRequireWildcard(require(\"../../util/data.js\"));\n\nvar _databuffer = require(\"./databuffer.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\n/*\n * 1D + history array\n */\nclass ArrayBuffer_ extends _databuffer.DataBuffer {\n  constructor(renderer, shaders, options) {\n    const width = options.width || 1;\n    const history = options.history || 1;\n    options.width = width;\n    options.height = history;\n    options.depth = 1;\n    super(renderer, shaders, options, false);\n    this.width = width;\n    this.history = history;\n    this.samples = width;\n    this.wrap = history > 1;\n    this.build(options);\n  }\n\n  build(_options) {\n    super.build();\n    this.index = 0;\n    this.pad = 0;\n    return this.streamer = this.generate(this.data);\n  }\n\n  setActive(i) {\n    return this.pad = Math.max(0, this.width - i);\n  }\n\n  fill() {\n    const {\n      callback\n    } = this;\n\n    if (typeof callback.reset === \"function\") {\n      callback.reset();\n    }\n\n    const {\n      emit,\n      count,\n      done,\n      reset\n    } = this.streamer;\n    reset();\n    const limit = this.samples - this.pad;\n    let i = 0;\n\n    while (!done() && i < limit && callback(emit, i++) !== false) {\n      true;\n    }\n\n    return Math.floor(count() / this.items);\n  }\n\n  write(n) {\n    if (n == null) {\n      n = this.samples;\n    }\n\n    n *= this.items;\n    this.texture.write(this.data, 0, this.index, n, 1);\n    this.dataPointer.set(0.5, this.index + 0.5);\n    this.index = (this.index + this.history - 1) % this.history;\n    return this.filled = Math.min(this.history, this.filled + 1);\n  }\n\n  through(callback, target) {\n    let dst, src;\n    const {\n      consume,\n      done\n    } = src = this.streamer;\n    const {\n      emit\n    } = dst = target.streamer;\n    let i = 0;\n\n    let pipe = () => consume((x, y, z, w) => callback(emit, x, y, z, w, i));\n\n    pipe = UData.repeatCall(pipe, this.items);\n    return () => {\n      src.reset();\n      dst.reset();\n      const limit = this.samples - this.pad;\n      i = 0;\n\n      while (!done() && i < limit) {\n        pipe();\n        i++;\n      }\n\n      return src.count();\n    };\n  }\n\n}\n\nexports.ArrayBuffer_ = ArrayBuffer_;\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","ArrayBuffer_","UData","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_databuffer","DataBuffer","constructor","renderer","shaders","options","width","history","height","depth","samples","wrap","build","_options","pad","index","streamer","generate","data","setActive","i","Math","max","fill","callback","reset","emit","count","done","limit","floor","items","write","n","texture","dataPointer","filled","min","through","target","dst","src","consume","pipe","x","y","z","w","repeatCall"]
}
