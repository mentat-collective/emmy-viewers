shadow$provide.module$node_modules$$mentatcollective$jsxgraph$src$base$image=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _jxg=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$jxg")),_constants=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$base$constants")),_coords=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$base$coords"));
global=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$base$element"));var _math=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$math$math")),_type=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$utils$type")),_coordselement=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$base$coordselement"));_jxg.default.Image=function(board,coords,attributes,url,size){this.constructor(board,
attributes,_constants.default.OBJECT_TYPE_IMAGE,_constants.default.OBJECT_CLASS_OTHER);this.element=this.board.select(attributes.anchor);this.coordsConstructor(coords);this.W=_type.default.createFunction(size[0],this.board,"");this.H=_type.default.createFunction(size[1],this.board,"");this.usrSize=[this.W(),this.H()];this.size=[Math.abs(this.usrSize[0]*board.unitX),Math.abs(this.usrSize[1]*board.unitY)];this.url=url;this.elType="image";this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],
this.W(),0],[this.coords.usrCoords[0],0,this.H()]];this.id=this.board.setId(this,"Im");this.board.renderer.drawImage(this);this.board.finalizeAdding(this);this.methodMap=_jxg.default.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})};_jxg.default.Image.prototype=new global.default;_type.default.copyPrototypeMethods(_jxg.default.Image,_coordselement.default,"coordsConstructor");_jxg.default.extend(_jxg.default.Image.prototype,{hasPoint:function(x,y){var len=this.transformations.length;
if(_type.default.isObject(_type.default.evaluate(this.visProp.precision))){var r=this.board._inputDevice;r=_type.default.evaluate(this.visProp.precision[r])}else r=this.board.options.precision.hasPoint;if(0===len)return x-=this.coords.scrCoords[1],y=this.coords.scrCoords[2]-y,x>=-r&&x-this.size[0]<=r&&y>=-r&&y-this.size[1]<=r;y=new _coords.default(_constants.default.COORDS_BY_SCREEN,[x,y],this.board);y=y.usrCoords;y=[y[0]-this.span[0][0],y[1]-this.span[0][1],y[2]-this.span[0][2]];x=_math.default.innerProduct;
r=x(y,this.span[1]);return 0<=r&&r<=x(this.span[1],this.span[1])&&(r=x(y,this.span[2]),0<=r&&r<=x(this.span[2],this.span[2]))?!0:!1},update:function(fromParent){if(!this.needsUpdate)return this;this.updateCoords(fromParent);this.updateSize();this.updateSpan();return this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){this.usrSize=[this.W(),this.H()];this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)];
return this},updateSpan:function(){var i,j,len=this.transformations.length,v=[];if(0===len)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{v[0]=[this.Z(),this.X(),this.Y()];v[1]=[this.Z(),this.X()+this.W(),this.Y()];v[2]=[this.Z(),this.X(),this.Y()+this.H()];for(i=0;i<len;i++)for(j=0;3>j;j++)v[j]=_math.default.matVecMult(this.transformations[i].matrix,v[j]);for(j=0;3>j;j++)v[j][1]/=v[j][0],v[j][2]/=v[j][0],v[j][0]/=v[j][0];for(j=1;3>j;j++)v[j][0]-=v[0][0],
v[j][1]-=v[0][1],v[j][2]-=v[0][2];this.span=v}return this},addTransform:function(transform){var i;if(_type.default.isArray(transform))for(i=0;i<transform.length;i++)this.transformations.push(transform[i]);else this.transformations.push(transform);return this},getParents:function(){var p=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];0!==this.parents.length&&(p=this.parents);return p},setSize:function(width,height){this.W=_type.default.createFunction(width,this.board,"");this.H=_type.default.createFunction(height,
this.board,"");return this},W:function(){},H:function(){}});_jxg.default.createImage=function(board,parents,attributes){var url=parents[0],coords=parents[1],size=parents[2];attributes=_type.default.copyAttributes(attributes,board.options,"image");board=_coordselement.default.create(_jxg.default.Image,board,coords,attributes,url,size);if(!board)throw Error("JSXGraph: Can't create image with parent types '"+typeof parents[0]+"' and '"+typeof parents[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");
0!==attributes.rotate&&board.addRotation(attributes.rotate);return board};_jxg.default.registerElement("image",_jxg.default.createImage);exports.default={Image:_jxg.default.Image,createImage:_jxg.default.createImage}}
//# sourceMappingURL=module$node_modules$$mentatcollective$jsxgraph$src$base$image.js.map
