{
"version":3,
"file":"module$node_modules$mathbox$build$esm$primitives$primitive.js",
"lineCount":13,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/primitives/primitive.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$primitives$primitive\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Primitive = void 0;\n\nvar Model = _interopRequireWildcard(require(\"../model\"));\n\nvar _binder = require(\"threestrap/src/binder.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nclass Primitive {\n  static initClass() {\n    this.Node = Model.Node;\n    this.Group = Model.Group; // Class default\n\n    this.model = this.Node;\n    this.defaults = null;\n    this.traits = null;\n    this.props = null;\n    this.finals = null;\n    this.freeform = false;\n  }\n\n  constructor(node, _context, helpers) {\n    this.node = node;\n    this._context = _context;\n    this._renderables = this._context.renderables;\n    this._attributes = this._context.attributes;\n    this._shaders = this._context.shaders;\n    this._overlays = this._context.overlays;\n    this._animator = this._context.animator;\n    this._types = this._attributes.types; // Link up node 1-to-1\n\n    this.node.controller = this; // This node has been inserted/removed\n\n    this.node.on(\"added\", _event => this._added());\n    this.node.on(\"removed\", _event => this._removed()); // Property change (if mounted)\n\n    this.node.on(\"change\", event => {\n      if (this._root) {\n        return this.change(event.changed, event.touched);\n      }\n    }); // Store local refs\n\n    this.reconfigure(); // Attribute getter / helpers\n\n    this._get = this.node.get.bind(this.node);\n    this._helpers = helpers(this, this.node.traits); // Keep track of various handlers to do auto-cleanup on unmake()\n\n    this._handlers = {\n      inherit: {},\n      listen: [],\n      watch: [],\n      compute: []\n    }; // Detached initially\n\n    this._root = this._parent = null; // Friendly constructor\n\n    this.init();\n  }\n\n  is(trait) {\n    return this.traits.hash[trait];\n  } // Primitive lifecycle\n\n\n  init() {}\n\n  make() {}\n\n  made() {}\n\n  unmake(_rebuild) {}\n\n  unmade() {}\n\n  change(_changed, _touched, _init) {} // Force property reinit\n\n\n  refresh() {\n    return this.change({}, {}, true);\n  } // Destroy and create cycle\n\n\n  rebuild() {\n    if (this._root) {\n      this._removed(true);\n\n      return this._added();\n    }\n  } // Reconfigure traits/props\n\n\n  reconfigure(config) {\n    if (config != null) {\n      this.node.configure(config, this._attributes);\n    }\n\n    this.traits = this.node.traits;\n    return this.props = this.node.props;\n  } // This node has been inserted\n\n\n  _added() {\n    let e, left;\n    this._parent = this.node.parent != null ? this.node.parent.controller : undefined;\n    this._root = this.node.root != null ? this.node.root.controller : undefined;\n    this.node.clock = (left = this._inherit(\"clock\")) != null ? left : this._root;\n\n    try {\n      try {\n        this.make();\n        this.refresh();\n        return this.made();\n      } catch (error) {\n        e = error;\n        this.node.print(\"warn\");\n        console.error(e);\n        throw e;\n      }\n    } catch (error1) {\n      e = error1;\n\n      try {\n        return this._removed(); // eslint-disable-next-line no-empty\n      } catch (error2) {}\n    }\n  }\n\n  _removed(rebuild) {\n    if (rebuild == null) {\n      rebuild = false;\n    }\n\n    this.unmake(rebuild);\n\n    this._unlisten();\n\n    this._unattach();\n\n    this._uncompute();\n\n    this._root = null;\n    this._parent = null;\n    return this.unmade(rebuild);\n  } // Bind event listeners to methods\n\n\n  _listen(object, type, method, self) {\n    if (self == null) {\n      self = this;\n    }\n\n    if (object instanceof Array) {\n      for (const o of Array.from(object)) {\n        return this.__listen(o, type, method, self);\n      }\n    }\n\n    return this.__listen(object, type, method, self);\n  }\n\n  __listen(object, type, method, self) {\n    if (self == null) {\n      self = this;\n    }\n\n    if (typeof object === \"string\") {\n      object = this._inherit(object);\n    }\n\n    if (object != null) {\n      const handler = method.bind(self);\n      handler.node = this.node;\n      object.on(type, handler);\n\n      this._handlers.listen.push([object, type, handler]);\n    }\n\n    return object;\n  }\n\n  _unlisten() {\n    if (!this._handlers.listen.length) {\n      return;\n    }\n\n    for (const [object, type, handler] of Array.from(this._handlers.listen)) {\n      object.off(type, handler);\n    }\n\n    return this._handlers.listen = [];\n  } // Find parent with certain trait\n\n\n  _inherit(trait) {\n    const cached = this._handlers.inherit[trait];\n\n    if (cached !== undefined) {\n      return cached;\n    }\n\n    return this._handlers.inherit[trait] = this._parent != null ? this._parent._find(trait != null ? trait : null) : undefined;\n  }\n\n  _find(trait) {\n    if (this.is(trait)) {\n      return this;\n    }\n\n    return this._parent != null ? this._parent._find(trait) : undefined;\n  }\n\n  _uninherit() {\n    return this._handlers.inherit = {};\n  } // Attach to controller by trait and watch the selector\n\n\n  _attach(selector, trait, method, self, start, optional, multiple) {\n    if (self == null) {\n      self = this;\n    }\n\n    if (start == null) {\n      start = this;\n    }\n\n    if (optional == null) {\n      optional = false;\n    }\n\n    if (multiple == null) {\n      multiple = false;\n    }\n\n    const filter = function (node) {\n      if (node != null && Array.from(node.traits).includes(trait)) {\n        return node;\n      }\n    };\n\n    const map = node => node != null ? node.controller : undefined;\n\n    const flatten = function (list) {\n      if (list == null) {\n        return list;\n      }\n\n      let out = [];\n\n      for (const sub of Array.from(list)) {\n        if (sub instanceof Array) {\n          out = out.concat(sub);\n        } else {\n          out.push(sub);\n        }\n      }\n\n      return out;\n    };\n\n    const resolve = selector => {\n      // Direct JS binding, no watcher.\n      let node, nodes;\n\n      if (typeof selector === \"object\") {\n        node = selector; // API object\n\n        if (node != null ? node._up : undefined) {\n          selector = multiple ? node._targets : [node[0]];\n          return selector;\n        } // Array of things\n\n\n        if (node instanceof Array) {\n          selector = multiple ? flatten(node.map(resolve)) : resolve(node[0]);\n          return selector;\n        } // Node\n\n\n        if (node instanceof Model.Node) {\n          return [node];\n        } // Auto-link selector '<'\n\n      } else if (typeof selector === \"string\" && selector[0] === \"<\") {\n        let match;\n        let discard = 0;\n\n        if (match = selector.match(/^<([0-9])+$/)) {\n          discard = +match[1] - 1;\n        }\n\n        if (selector.match(/^<+$/)) {\n          discard = +selector.length - 1;\n        }\n\n        nodes = []; // Implicitly associated node (scan backwards until we find one)\n\n        let previous = start.node;\n\n        while (previous) {\n          // Find previous node\n          const {\n            parent\n          } = previous;\n\n          if (!parent) {\n            break;\n          }\n\n          previous = parent.children[previous.index - 1]; // If we reached the first child, ascend if nothing found yet\n\n          if (!previous && !nodes.length) {\n            previous = parent;\n          } // Include if matched\n\n\n          node = null;\n\n          if (filter(previous)) {\n            node = previous;\n          }\n\n          if (node != null && discard-- <= 0) {\n            nodes.push(node);\n          } // Return solo match\n\n\n          if (!multiple && nodes.length) {\n            return nodes;\n          }\n        } // Return list match\n\n\n        if (multiple && nodes.length) {\n          return nodes;\n        } // Selector binding\n\n      } else if (typeof selector === \"string\") {\n        const watcher = method.bind(self);\n\n        this._handlers.watch.push(watcher);\n\n        const selection = this._root.watch(selector, watcher);\n\n        if (!multiple) {\n          if (filter(selection[0])) {\n            node = selection[0];\n          }\n\n          if (node != null) {\n            return [node];\n          }\n        } else {\n          nodes = selection.filter(filter);\n\n          if (nodes.length) {\n            return nodes;\n          }\n        }\n      } // Nothing found\n\n\n      if (!optional) {\n        console.warn(this.node.toMarkup());\n        throw new Error(`${this.node.toString()} - Could not find ${trait} \\`${selector}\\``);\n      }\n\n      if (multiple) {\n        return [];\n      } else {\n        return null;\n      }\n    }; // Resolve selection recursively\n\n\n    const nodes = flatten(resolve(selector)); // Return node's controllers if found\n\n    if (multiple) {\n      if (nodes != null) {\n        return nodes.map(map);\n      } else {\n        return null;\n      }\n    } else {\n      if (nodes != null) {\n        return map(nodes[0]);\n      } else {\n        return null;\n      }\n    }\n  } // Remove watcher attachments\n\n\n  _unattach() {\n    if (!this._handlers.watch.length) {\n      return;\n    }\n\n    for (const watcher of Array.from(this._handlers.watch)) {\n      if (watcher != null) {\n        watcher.unwatch();\n      }\n    }\n\n    return this._handlers.watch = [];\n  } // Bind a computed value to a prop\n\n\n  _compute(key, expr) {\n    this._handlers.compute.push(key);\n\n    return this.node.bind(key, expr, true);\n  } // Remove prop bindings\n\n\n  _uncompute() {\n    if (!this._handlers.compute.length) {\n      return;\n    }\n\n    for (const key of Array.from(this._handlers.compute)) {\n      this.node.unbind(key, true);\n    }\n\n    return this._handlers.compute = [];\n  }\n\n}\n\nexports.Primitive = Primitive;\nPrimitive.initClass();\n\n_binder.Binder.apply(Primitive.prototype);\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","Primitive","Model","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_binder","initClass","Node","Group","model","finals","props","traits","defaults","freeform","constructor","node","_context","helpers","_renderables","renderables","_attributes","attributes","_shaders","shaders","_overlays","overlays","_animator","animator","_types","types","controller","on","_event","_added","_removed","event","_root","change","changed","touched","reconfigure","_get","bind","_helpers","_handlers","inherit","listen","watch","compute","_parent","init","is","trait","hash","make","made","unmake","_rebuild","unmade","_changed","_touched","_init","refresh","rebuild","config","configure","e","left","parent","undefined","root","clock","_inherit","error","print","console","error1","error2","_unlisten","_unattach","_uncompute","_listen","object","type","method","self","Array","o","from","__listen","handler","push","length","off","cached","_find","_uninherit","_attach","selector","start","optional","multiple","filter","includes","map","flatten","list","out","sub","concat","resolve","nodes","_up","_targets","discard","match","previous","children","index","watcher","selection","warn","toMarkup","Error","toString","unwatch","_compute","expr","unbind","Binder","apply"]
}
