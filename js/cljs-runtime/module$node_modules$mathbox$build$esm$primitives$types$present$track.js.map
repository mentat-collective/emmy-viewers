{
"version":3,
"file":"module$node_modules$mathbox$build$esm$primitives$types$present$track.js",
"lineCount":14,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/primitives/types/present/track.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$primitives$types$present$track\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Track = void 0;\n\nvar Ease = _interopRequireWildcard(require(\"../../../util/ease.js\"));\n\nvar _primitive = require(\"../../primitive.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nconst deepCopy = function (x) {\n  const out = {};\n\n  for (const k in x) {\n    const v = x[k];\n\n    if (v instanceof Array) {\n      out[k] = v.slice();\n    } else if (v != null && typeof v === \"object\") {\n      out[k] = deepCopy(v);\n    } else {\n      out[k] = v;\n    }\n  }\n\n  return out;\n};\n\nclass Track extends _primitive.Primitive {\n  static initClass() {\n    this.traits = [\"node\", \"track\", \"seek\", \"bind\"];\n  }\n\n  init() {\n    this.handlers = {};\n    this.script = null;\n    this.values = null;\n    this.playhead = 0;\n    this.velocity = null;\n    this.section = null;\n    return this.expr = null;\n  }\n\n  make() {\n    // Bind to attached data sources\n    let ref;\n\n    this._helpers.bind.make([{\n      to: \"track.target\",\n      trait: \"node\",\n      callback: null\n    }]);\n\n    const {\n      script\n    } = this.props;\n    const {\n      node\n    } = this.bind.target;\n    this.targetNode = node;\n    return [this.script, this.values, this.start, this.end] = Array.from(ref = this._process(node, script)), ref;\n  }\n\n  unmake() {\n    this.unbindExpr();\n\n    this._helpers.bind.unmake();\n\n    this.script = this.values = this.start = this.end = this.section = this.expr = null;\n    return this.playhead = 0;\n  } // Bind animated expressions\n\n\n  bindExpr(expr) {\n    this.unbindExpr();\n    this.expr = expr;\n    this.targetNode.bind(expr, true); // Measure playhead velocity on attribute computation\n\n    const {\n      clock\n    } = this.targetNode;\n    const self = this;\n    return this._attributes.bind(this.measure = function () {\n      let playhead = null;\n      return () => {\n        const {\n          step\n        } = clock.getTime();\n\n        if (playhead != null) {\n          self.velocity = (self.playhead - playhead) / step;\n        }\n\n        return playhead = self.playhead;\n      };\n    }());\n  }\n\n  unbindExpr() {\n    if (this.expr != null) {\n      this.targetNode.unbind(this.expr, true);\n    }\n\n    if (this.measure != null) {\n      this._attributes.unbind(this.measure);\n    }\n\n    return this.expr = this.measure = null;\n  } // Process script steps by filling out missing props\n\n\n  _process(object, script) {\n    let k, key, last, message, s, step, v;\n\n    if (script instanceof Array) {\n      // Normalize array to numbered dict\n      s = {};\n\n      for (let i = 0; i < script.length; i++) {\n        step = script[i];\n        s[i] = step;\n      }\n\n      script = s;\n    } // Normalize keyed steps to array of step objects\n\n\n    s = [];\n\n    for (key in script) {\n      step = script[key];\n\n      if (step == null) {\n        step = [];\n      }\n\n      if (step instanceof Array) {\n        // [props, bind] array\n        step = {\n          key: +key,\n          props: step[0] != null ? deepCopy(step[0]) : {},\n          bind: step[1] != null ? deepCopy(step[1]) : {}\n        };\n      } else {\n        if (step.key == null && !step.props && !step.bind) {\n          // Direct props object (iffy, but people will do this anyhow)\n          step = {\n            props: deepCopy(step)\n          };\n        } else {\n          // Proper step\n          step = deepCopy(step);\n        } // Prepare step object\n\n\n        step.key = step.key != null ? +step.key : +key;\n\n        if (step.props == null) {\n          step.props = {};\n        }\n\n        if (step.bind == null) {\n          step.bind = {};\n        }\n      }\n\n      s.push(step);\n    }\n\n    script = s;\n\n    if (!script.length) {\n      return [[], {}, 0, 0];\n    } // Sort by keys\n\n\n    script.sort((a, b) => a.key - b.key);\n    const start = script[0].key;\n    const end = script[script.length - 1].key; // Connect steps\n\n    for (key in script) {\n      step = script[key];\n\n      if (last != null) {\n        last.next = step;\n      }\n\n      last = step;\n    } // Last step leads to itself\n\n\n    last.next = last;\n    script = s; // Determine starting props\n\n    const props = {};\n    const values = {};\n\n    for (key in script) {\n      step = script[key];\n\n      for (k in step.props) {\n        v = step.props[k];\n        props[k] = true;\n      }\n    }\n\n    for (key in script) {\n      step = script[key];\n\n      for (k in step.bind) {\n        v = step.bind[k];\n        props[k] = true;\n      }\n    }\n\n    for (k in props) {\n      props[k] = object.get(k);\n    }\n\n    try {\n      // Need two sources and one destination value for correct mixing of live expressions\n      for (k in props) {\n        values[k] = [object.attribute(k).T.make(), object.attribute(k).T.make(), object.attribute(k).T.make()];\n      }\n    } catch (error) {\n      console.warn(this.node.toMarkup());\n      message = `${this.node.toString()} - Target ${object} has no \\`${k}\\` property`;\n      throw new Error(message);\n    }\n\n    const result = []; // Normalize script props, insert held values\n\n    for (step of Array.from(script)) {\n      for (k in props) {\n        v = props[k];\n        v = object.validate(k, step.props[k] != null ? step.props[k] : v);\n        props[k] = step.props[k] = v;\n\n        if (step.bind[k] != null && typeof step.bind[k] !== \"function\") {\n          console.warn(this.node.toMarkup());\n          message = `${this.node.toString()} - Bind expression \\`${step.bind[k]}\\` on property \\`${k}\\` is not a function`;\n          throw new Error(message);\n        }\n      }\n\n      result.push(step);\n    }\n\n    return [result, values, start, end];\n  }\n\n  update() {\n    let {\n      playhead\n    } = this;\n    const {\n      script\n    } = this;\n    const {\n      ease,\n      seek\n    } = this.props;\n    const node = this.targetNode;\n\n    if (seek != null) {\n      playhead = seek;\n    }\n\n    if (script.length) {\n      let k;\n\n      const find = function () {\n        let last = script[0];\n\n        for (let i = 0; i < script.length; i++) {\n          const step = script[i];\n\n          if (step.key > playhead) {\n            break;\n          }\n\n          last = step;\n        }\n\n        return last;\n      };\n\n      let {\n        section\n      } = this;\n\n      if (!section || playhead < section.key || playhead > section.next.key) {\n        section = find(script, playhead);\n      }\n\n      if (section === this.section) {\n        return;\n      }\n\n      this.section = section;\n      const from = section;\n      const to = section.next;\n      const start = from.key;\n      const end = to.key; // Easing of playhead along track\n\n      const easeMethod = (() => {\n        switch (ease) {\n          case \"linear\":\n          case 0:\n            return Ease.clamp;\n\n          case \"cosine\":\n          case 1:\n            return Ease.cosine;\n\n          case \"binary\":\n          case 2:\n            return Ease.binary;\n\n          case \"hold\":\n          case 3:\n            return Ease.hold;\n\n          default:\n            return Ease.cosine;\n        }\n      })(); // Callback for live playhead interpolator (linear approx time travel)\n\n\n      const {\n        clock\n      } = node;\n\n      const getPlayhead = time => {\n        if (this.velocity == null) {\n          return this.playhead;\n        }\n\n        const now = clock.getTime();\n        return this.playhead + this.velocity * (time - now.time);\n      };\n\n      const getLerpFactor = function () {\n        const scale = 1 / Math.max(0.0001, end - start);\n        return time => easeMethod((getPlayhead(time) - start) * scale, 0, 1);\n      }(); // Create prop expression interpolator\n\n\n      const live = key => {\n        const fromE = from.bind[key];\n        const toE = to.bind[key];\n        const fromP = from.props[key];\n        const toP = to.props[key];\n\n        const invalid = function () {\n          console.warn(node.toMarkup());\n          throw new Error(`${this.node.toString()} - Invalid expression result on track \\`${key}\\``);\n        };\n\n        const attr = node.attribute(key);\n        const values = this.values[key];\n        const animator = this._animator; // Lerp between two expressions\n\n        if (fromE && toE) {\n          return ((values, _from, _to) => function (time, delta) {\n            let _from, _to;\n\n            values[0] = _from = attr.T.validate(fromE(time, delta), values[0], invalid);\n            values[1] = _to = attr.T.validate(toE(time, delta), values[1], invalid);\n            return values[2] = animator.lerp(attr.T, _from, _to, getLerpFactor(time), values[2]);\n          })(values, from, to); // Lerp between an expression and a constant\n        } else if (fromE) {\n          return ((values, _from, _to) => function (time, delta) {\n            let _from;\n\n            values[0] = _from = attr.T.validate(fromE(time, delta), values[0], invalid);\n            return values[1] = animator.lerp(attr.T, _from, toP, getLerpFactor(time), values[1]);\n          })(values, from, to); // Lerp between a constant and an expression\n        } else if (toE) {\n          return ((values, _from, _to) => function (time, delta) {\n            let _to;\n\n            values[0] = _to = attr.T.validate(toE(time, delta), values[0], invalid);\n            return values[1] = animator.lerp(attr.T, fromP, _to, getLerpFactor(time), values[1]);\n          })(values, from, to); // Lerp between two constants\n        } else {\n          return ((values, _from, _to) => (time, _delta) => values[0] = animator.lerp(attr.T, fromP, toP, getLerpFactor(time), values[0]))(values, from, to);\n        }\n      }; // Handle expr / props on both ends\n\n\n      const expr = {};\n\n      for (k in from.bind) {\n        if (expr[k] == null) {\n          expr[k] = live(k);\n        }\n      }\n\n      for (k in to.bind) {\n        if (expr[k] == null) {\n          expr[k] = live(k);\n        }\n      }\n\n      for (k in from.props) {\n        if (expr[k] == null) {\n          expr[k] = live(k);\n        }\n      }\n\n      for (k in to.props) {\n        if (expr[k] == null) {\n          expr[k] = live(k);\n        }\n      } // Bind node props\n\n\n      return this.bindExpr(expr);\n    }\n  }\n\n  change(changed, touched, init) {\n    if (changed[\"track.target\"] || changed[\"track.script\"] || changed[\"track.mode\"]) {\n      return this.rebuild();\n    }\n\n    if (changed[\"seek.seek\"] || init) {\n      return this.update();\n    }\n  }\n\n}\n\nexports.Track = Track;\nTrack.initClass();\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","Track","Ease","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_primitive","deepCopy","x","out","k","v","Array","slice","Primitive","initClass","traits","init","handlers","values","script","playhead","expr","section","velocity","make","ref","_helpers","bind","to","trait","callback","props","node","target","targetNode","start","end","from","_process","unmake","unbindExpr","bindExpr","clock","self","_attributes","measure","step","getTime","unbind","object","s","i","length","push","sort","a","b","last","next","attribute","T","error","console","warn","toMarkup","message","toString","Error","result","validate","update","ease","seek","find","easeMethod","clamp","cosine","binary","hold","getPlayhead","time","now","getLerpFactor","scale","Math","max","live","fromE","toE","fromP","toP","invalid","attr","animator","_animator","_from","_to","delta","lerp","_delta","change","changed","touched","rebuild"]
}
