{
"version":3,
"file":"module$node_modules$mathbox$build$esm$context.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/context.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$context\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Context = void 0;\n\nvar Model = _interopRequireWildcard(require(\"./model\"));\n\nvar Overlay = _interopRequireWildcard(require(\"./overlay\"));\n\nvar Primitives = _interopRequireWildcard(require(\"./primitives\"));\n\nvar Render = _interopRequireWildcard(require(\"./render\"));\n\nvar Shaders = _interopRequireWildcard(require(\"./shaders\"));\n\nvar Stage = _interopRequireWildcard(require(\"./stage\"));\n\nvar Util = _interopRequireWildcard(require(\"./util\"));\n\nvar _PerspectiveCamera = require(\"three/src/cameras/PerspectiveCamera.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nclass Context {\n  static initClass() {\n    // Export for extending. TODO what is the story here, what is this syntax?\n    this.Namespace = {\n      Model,\n      Overlay,\n      Primitives,\n      Render,\n      Shaders,\n      Stage,\n      Util,\n      DOM: Util.VDOM\n    };\n    this.Version = \"2.2.0\";\n  } //-------------------------------------------------------------------\n  // Set up entire environment\n\n\n  constructor(renderer, scene = null, camera = null) {\n    // DOM container\n    let canvas;\n    this.canvas = canvas = renderer.domElement;\n    this.element = null; // Rendering factory\n\n    this.shaders = Shaders.Factory(Shaders.Snippets);\n    this.renderables = new Render.Factory(Render.Classes, renderer, this.shaders);\n    this.overlays = new Overlay.Factory(Overlay.Classes, canvas);\n    this.scene = this.renderables.make(\"scene\", {\n      scene\n    });\n    this.camera = this.defaultCamera = camera != null ? camera : new _PerspectiveCamera.PerspectiveCamera(); // Primitives factory\n\n    this.attributes = new Model.Attributes(Primitives.Types, this);\n    this.primitives = new Primitives.Factory(Primitives.Types, this);\n    this.root = this.primitives.make(\"root\"); // Document model\n\n    this.model = new Model.Model(this.root);\n    this.guard = new Model.Guard(); // Scene controllers\n\n    this.controller = new Stage.Controller(this.model, this.primitives);\n    this.animator = new Stage.Animator(this); // Public API\n\n    this.api = new Stage.API(this); // Global clocks, one real-time and one adjustable\n\n    this.speed = 1;\n    this.time = {\n      now: +new Date() / 1000,\n      time: 0,\n      delta: 0,\n      clock: 0,\n      step: 0\n    };\n  } //-------------------------------------------------------------------\n  // Lifecycle\n\n\n  init() {\n    this.scene.inject();\n    this.overlays.inject();\n    return this;\n  }\n\n  destroy() {\n    this.scene.unject();\n    this.overlays.unject();\n    return this;\n  }\n\n  resize(size) {\n    /*\n    {\n      viewWidth, viewHeight, renderWidth, renderHeight, aspect, pixelRatio\n    }\n    */\n    if (size == null) {\n      size = {};\n    }\n\n    if (size.renderWidth == null) {\n      size.renderWidth = size.viewWidth != null ? size.viewWidth : size.viewWidth = 1280;\n    }\n\n    if (size.renderHeight == null) {\n      size.renderHeight = size.viewHeight != null ? size.viewHeight : size.viewHeight = 720;\n    }\n\n    if (size.pixelRatio == null) {\n      size.pixelRatio = size.renderWidth / Math.max(0.000001, size.viewWidth);\n    }\n\n    if (size.aspect == null) {\n      size.aspect = size.viewWidth / Math.max(0.000001, size.viewHeight);\n    }\n\n    this.root.controller.resize(size);\n    return this;\n  }\n\n  frame(time) {\n    /*\n    {\n      now, clock, step\n    }\n    */\n    this.pre(time);\n    this.update();\n    this.render();\n    this.post();\n    return this;\n  } //-------------------------------------------------------------------\n  // Broken down update/render cycle, for manual scheduling/invocation\n\n\n  pre(time) {\n    if (!time) {\n      time = {\n        now: +new Date() / 1000,\n        time: 0,\n        delta: 0,\n        clock: 0,\n        step: 0\n      };\n      time.delta = this.time.now != null ? time.now - this.time.now : 0; // Check for stopped render loop, assume 1 60fps frame\n\n      if (time.delta > 1) {\n        time.delta = 1 / 60;\n      }\n\n      time.step = time.delta * this.speed;\n      time.time = this.time.time + time.delta;\n      time.clock = this.time.clock + time.step;\n    }\n\n    this.time = time;\n\n    if (typeof this.root.controller.pre === \"function\") {\n      this.root.controller.pre();\n    }\n\n    return this;\n  }\n\n  update() {\n    this.animator.update();\n    this.attributes.compute();\n    this.guard.iterate({\n      step: () => {\n        let change = this.attributes.digest();\n        return change || (change = this.model.digest());\n      },\n\n      last() {\n        return {\n          attribute: this.attributes.getLastTrigger(),\n          model: this.model.getLastTrigger()\n        };\n      }\n\n    });\n\n    if (typeof this.root.controller.update === \"function\") {\n      this.root.controller.update();\n    }\n\n    this.camera = this.root.controller.getCamera();\n    this.speed = this.root.controller.getSpeed();\n    return this;\n  }\n\n  render() {\n    if (typeof this.root.controller.render === \"function\") {\n      this.root.controller.render();\n    }\n\n    this.scene.render();\n    return this;\n  }\n\n  post() {\n    if (typeof this.root.controller.post === \"function\") {\n      this.root.controller.post();\n    }\n\n    return this;\n  } //-------------------------------------------------------------------\n  // Warmup mode, inserts only n objects into the scene per frame\n  // Will render objects to offscreen 1x1 buffer to ensure shader is compiled even if invisible\n\n\n  setWarmup(n) {\n    this.scene.warmup(n);\n    return this;\n  }\n\n  getPending() {\n    return this.scene.pending.length;\n  }\n\n}\n\nexports.Context = Context;\nContext.initClass();\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","value","Context","Model","Overlay","Primitives","Render","Shaders","Stage","Util","_PerspectiveCamera","initClass","Namespace","DOM","VDOM","Version","constructor","renderer","scene","camera","canvas","domElement","element","shaders","Factory","Snippets","renderables","Classes","overlays","make","defaultCamera","PerspectiveCamera","attributes","Attributes","Types","primitives","root","model","guard","Guard","controller","Controller","animator","Animator","api","API","speed","time","now","Date","delta","clock","step","init","inject","destroy","unject","resize","size","renderWidth","viewWidth","renderHeight","viewHeight","pixelRatio","Math","max","aspect","frame","pre","update","render","post","compute","iterate","digest","change","last","attribute","getLastTrigger","getCamera","getSpeed","setWarmup","n","warmup","getPending","pending","length"]
}
