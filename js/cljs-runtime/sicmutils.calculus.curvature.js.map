{"version":3,"sources":["sicmutils/calculus/curvature.cljc"],"mappings":";AAgBA,iDAAA,jDAAMA,0GAAmBC;AAAzB,AACE,kBAAKC,EAAEC;AAAP,AACE,OAACC,kDAAI,AAACC,8BAAa,CAACJ,sCAAAA,yCAAAA,LAAMC,qBAAAA,IAAG,CAACD,sCAAAA,yCAAAA,LAAME,qBAAAA,KAC/B,iBAAAG,WAAO,AAACD,8BAAaH,EAAEC;AAAvB,AAAA,kFAAAG,4BAAAA,tGAACL,sCAAAA,gDAAAA;;;;AAIV,uCAAA,vCAAMM,sFAASN;AAAf,AACE,qBAAA,gEAAyBO,EAAEC,EAAEP,EAAEC;AAA/B,AACU,IAAAO,WAAG,iBAAAC,eAAC,AAAC,AAACX,+CAAkBC,OAAOC,EAAEC;AAA9B,AAAA,QAAAQ,6CAAAA,gDAAAA,LAAiCF,4BAAAA;;AAApC,AAAA,0EAAAC,wBAAAA,1FAACF,kCAAAA,4CAAAA;;AADX,AAEE,qEAAA,mFAAA,iIAAA,kIAAA,kIAAA,thBAACI,+CACCC;;AAMN,qCAAA,rCAAMC,kFAAOb,MAAMc;AAAnB,AACE,mBAAA,4DAAuBb,EAAEC;AAAzB,AACU,OAACa,kCACA,WAAKC,GAAGC;AAAR,AACE,IAAAC,eAAC,AAACZ,qCAAQN;AAAV,AAAA,QAAAkB,6CAAAA,wDAAAA,bAAiBD,oCAAAA,jCAAGhB,oCAAAA,lCAAEe,oCAAAA,jCAAGd,oCAAAA;GAC3BY;;AAJX,AAKE,mEAAA,mFAAA,kIAAA,jRAACH,+CACCQ;;AAMN,8CAAA,9CAAMC,oGAAgBpB;AAAtB,AACE,kBAAKqB,EAAEC;AAAP,AACE,OAACC,8DAAI,iBAAAC,eAAC,CAACxB,sCAAAA,yCAAAA,LAAMqB,qBAAAA;AAAR,AAAA,QAAAG,6CAAAA,gDAAAA,LAAWF,4BAAAA;KACX,uDAAA,vDAACG,4DAAO,iBAAAC,eAAC,CAAC1B,sCAAAA,yCAAAA,LAAMsB,qBAAAA;AAAR,AAAA,QAAAI,6CAAAA,gDAAAA,LAAWL,4BAAAA;wDACnB,uDAAA,vDAACI,4DAAO,AAACrB,8BAAaiB,EAAEC;;;AAIjC,uCAAA,vCAAMK,sFAAS3B;AAAf,AACE,kBAAA,6DAAsBO,EAAEC,EAAEoB;AAA1B,AACU,IAAAC,WAAG,AAAC,AAACT,4CAAepB,OAAOQ,EAAEoB;AAA7B,AAAA,0EAAAC,wBAAAA,1FAACtB,kCAAAA,4CAAAA;;AADX,AAEE,kEAAA,mFAAA,iIAAA,kIAAA,jZAACI,+CACCmB;;AAON,oDAAA,pDAAMC,gHAAsB/B,MAAMgC;AAAlC,AACE,IAAMC,cAAM,AAACC,mEAAmCF;IAC1CG,MAAM,AAACC,kEAAoCJ;IAC3CK,QAAM,AAAC,AAACC,kCAAQN,WAAW,8GAAA,AAAA,mDAAA,AAAA,mDAAA,AAAA,pNAACO;AAFlC,AAGE,IAAAC,eAAC,AAACC,8DACA,WAAKC;AAAL,AACE,OAACD,8DACA,WAAKE;AAAL,AACE,OAACF,8DACA,WAAKG;AAAL,AACE,OAACH,8DACA,WAAKI;AAAL,AACE,IAAAC,WAAI,iBAAAC,eAAC,AAAC,AAAChD,+CAAkBC,OAAO4C,WAAKC;AAAjC,AAAA,QAAAE,6CAAAA,yDAAAA,dACCJ,qCAAAA;;AADL,AAAA,4EAAAG,yBAAAA,7FAACJ,mCAAAA,6CAAAA;qDAEHT;qDACHA;qDACHA;qDACHE;AAbF,AAAA,QAAAK,6CAAAA,oDAAAA,TAcCH,gCAAAA","names":["sicmutils.calculus.curvature/Riemann-curvature","nabla","u","v","sicmutils.generic._","sicmutils.operator/commutator","G__87833","sicmutils.calculus.curvature/Riemann","w","x","G__87839","fexpr__87840","sicmutils.calculus.indexed/with-argument-types","Riemann-tensor","sicmutils.calculus.curvature/Ricci","basis","sicmutils.calculus.basis/contract","ei","wi","fexpr__87861","Ricci-tensor","sicmutils.calculus.curvature/torsion-vector","X","Y","sicmutils.generic._PLUS_","fexpr__87862","sicmutils.generic._STAR_","fexpr__87863","sicmutils.calculus.curvature/torsion","y","G__87865","the-torsion","sicmutils.calculus.curvature/curvature-components","coord-sys","d:dxs","sicmutils.calculus.vector-field/coordinate-system->vector-basis","dxs","sicmutils.calculus.form-field/coordinate-system->oneform-basis","point","sicmutils.calculus.manifold/point","sicmutils.structure.up","fexpr__87881","sicmutils.structure.mapr","dx","d:dx","d:dy","d:dz","G__87889","fexpr__87891"],"sourcesContent":["#_\"SPDX-License-Identifier: GPL-3.0\"\n\n(ns sicmutils.calculus.curvature\n  (:require [sicmutils.calculus.basis :as b]\n            [sicmutils.calculus.form-field :as ff]\n            [sicmutils.calculus.indexed :as ci]\n            [sicmutils.calculus.manifold :as m]\n            [sicmutils.calculus.vector-field :as vf]\n            [sicmutils.generic :as g]\n            [sicmutils.operator :as o]\n            [sicmutils.structure :as s]))\n\n;; Riemann curvature \"tensor\" is pretty easy\n\n;; Hawking and Ellis equation 2.18, page 35.\n\n(defn Riemann-curvature [nabla]\n  (fn [u v]\n    (g/- (o/commutator (nabla u) (nabla v))\n         (nabla (o/commutator u v)))))\n\n;; The traditional Riemann tensor R^i_jkl:\n\n(defn Riemann [nabla]\n  (letfn [(Riemann-tensor [w x u v]\n            (w (((Riemann-curvature nabla) u v) x)))]\n    (ci/with-argument-types\n      Riemann-tensor\n      [::ff/oneform-field\n       ::vf/vector-field\n       ::vf/vector-field\n       ::vf/vector-field])))\n\n(defn Ricci [nabla basis]\n  (letfn [(Ricci-tensor [u v]\n            (b/contract\n             (fn [ei wi]\n               ((Riemann nabla) wi u ei v))\n             basis))]\n    (ci/with-argument-types\n      Ricci-tensor\n      [::vf/vector-field\n       ::vf/vector-field])))\n\n;; Hawking and Ellis page 34.\n\n(defn torsion-vector [nabla]\n  (fn [X Y]\n    (g/+ ((nabla X) Y)\n         (g/* -1 ((nabla Y) X))\n         (g/* -1 (o/commutator X Y)))))\n\n;; The torsion tensor T^i_jk\n\n(defn torsion [nabla]\n  (letfn [(the-torsion [w x y]\n            (w ((torsion-vector nabla) x y)))]\n    (ci/with-argument-types\n      the-torsion\n      [::ff/oneform-field\n       ::vf/vector-field\n       ::vf/vector-field])))\n\n;; Components of the curvature tensor R^i_{jkl}\n\n(defn curvature-components [nabla coord-sys]\n  (let [d:dxs (vf/coordinate-system->vector-basis coord-sys)\n        dxs   (ff/coordinate-system->oneform-basis coord-sys)\n        point ((m/point coord-sys) (s/up 'x 'y 'z))]\n    ((s/mapr\n      (fn [dx]\n        (s/mapr\n         (fn [d:dx]\n           (s/mapr\n            (fn [d:dy]\n              (s/mapr\n               (fn [d:dz]\n                 (dx (((Riemann-curvature nabla) d:dy d:dz)\n                      d:dx)))\n               d:dxs))\n            d:dxs))\n         d:dxs))\n      dxs)\n     point)))\n"]}