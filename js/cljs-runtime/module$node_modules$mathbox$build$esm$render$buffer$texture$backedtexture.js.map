{
"version":3,
"file":"module$node_modules$mathbox$build$esm$render$buffer$texture$backedtexture.js",
"lineCount":3,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/render/buffer/texture/backedtexture.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$render$buffer$texture$backedtexture\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BackedTexture = void 0;\n\nvar _datatexture = require(\"./datatexture.js\");\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\n/*\nManually allocated GL texture for data streaming, locally backed.\n\nAllows partial updates via subImage.\nContains local copy of its data to allow quick resizing without gl.copyTexImage2d\n(which requires render-to-framebuffer)\n*/\nclass BackedTexture extends _datatexture.DataTexture {\n  constructor(renderer, width, height, channels, options) {\n    super(renderer, width, height, channels, options);\n    this.data = new this.ctor(this.n);\n  }\n\n  resize(width, height) {\n    const old = this.data;\n    const oldWidth = this.width;\n    const oldHeight = this.height;\n    this.width = width;\n    this.height = height;\n    this.n = width * height * this.channels;\n    this.data = new this.ctor(this.n);\n    const {\n      gl\n    } = this;\n    const state = this.renderer.state;\n    state.bindTexture(gl.TEXTURE_2D, this.texture);\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n    gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, this.data);\n    this.uniforms.dataResolution.value.set(1 / width, 1 / height);\n    return this.write(old, 0, 0, oldWidth, oldHeight);\n  }\n\n  write(src, x, y, w, h) {\n    let j;\n    const {\n      width\n    } = this;\n    const dst = this.data;\n    const {\n      channels\n    } = this;\n    let i = 0;\n\n    if (width === w && x === 0) {\n      j = y * w * channels;\n      const n = w * h * channels;\n\n      while (i < n) {\n        dst[j++] = src[i++];\n      }\n    } else {\n      const stride = width * channels;\n      const ww = w * channels;\n      const xx = x * channels;\n      let yy = y;\n      const yh = y + h;\n\n      while (yy < yh) {\n        let k = 0;\n        j = xx + yy * stride;\n\n        while (k++ < ww) {\n          dst[j++] = src[i++];\n        }\n\n        yy++;\n      }\n    }\n\n    return super.write(src, x, y, w, h);\n  }\n\n  dispose() {\n    this.data = null;\n    return super.dispose();\n  }\n\n}\n\nexports.BackedTexture = BackedTexture;\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","BackedTexture","_datatexture","DataTexture","constructor","renderer","width","height","channels","options","data","ctor","n","resize","old","oldWidth","oldHeight","gl","state","bindTexture","TEXTURE_2D","texture","pixelStorei","UNPACK_ALIGNMENT","texImage2D","format","type","uniforms","dataResolution","set","write","src","x","y","w","h","dst","i","j","stride","ww","xx","yy","yh","k","dispose"]
}
