shadow$provide.module$node_modules$mathbox$build$esm$primitives$types$operator$repeat=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.Repeat=void 0;global=require("module$node_modules$mathbox$build$esm$primitives$types$operator$operator");class Repeat extends global.Operator{static initClass(){this.traits="node bind operator source index repeat".split(" ")}indexShader(shader){shader.pipe(this.operator);return super.indexShader(shader)}sourceShader(shader){shader.pipe(this.operator);
return super.sourceShader(shader)}getDimensions(){return this._resample(this.bind.source.getDimensions())}getActiveDimensions(){return this._resample(this.bind.source.getActiveDimensions())}getFutureDimensions(){return this._resample(this.bind.source.getFutureDimensions())}getIndexDimensions(){return this._resample(this.bind.source.getIndexDimensions())}_resample(dims){const r=this.resample;return{items:r.items*dims.items,width:r.width*dims.width,height:r.height*dims.height,depth:r.depth*dims.depth}}make(){super.make();
if(null!=this.bind.source){this.resample={};var uniforms={repeatModulus:this._attributes.make(this._types.vec4())};this.repeatModulus=uniforms.repeatModulus;var transform=this._shaders.shader();transform.pipe("repeat.position",uniforms);return this.operator=transform}}unmake(){return super.unmake()}resize(){if(null!=this.bind.source){const dims=this.bind.source.getActiveDimensions();this.repeatModulus.value.set(dims.width,dims.height,dims.depth,dims.items)}return super.resize()}change(changed,touched,
init){if(touched.operator||touched.repeat)return this.rebuild();if(init)return["items","width","height","depth"].map(key=>this.resample[key]=this.props[key])}}exports.Repeat=Repeat;Repeat.initClass()}
//# sourceMappingURL=module$node_modules$mathbox$build$esm$primitives$types$operator$repeat.js.map
