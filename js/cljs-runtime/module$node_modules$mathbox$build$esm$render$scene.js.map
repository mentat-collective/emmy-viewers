{
"version":3,
"file":"module$node_modules$mathbox$build$esm$render$scene.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/render/scene.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$render$scene\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Scene = void 0;\n\nvar _Object3D = require(\"three/src/core/Object3D.js\");\n\nvar _PerspectiveCamera = require(\"three/src/cameras/PerspectiveCamera.js\");\n\nvar _renderable = require(\"./renderable.js\");\n\nvar _Scene = require(\"three/src/scenes/Scene.js\");\n\nvar _WebGLRenderTarget = require(\"three/src/renderers/WebGLRenderTarget.js\");\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS202: Simplify dynamic range loops\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\n/*\n All MathBox renderables sit inside this root, to keep things tidy.\n*/\nclass MathBox extends _Object3D.Object3D {\n  constructor() {\n    super();\n    this.rotationAutoUpdate = false;\n    this.frustumCulled = false;\n    this.matrixAutoUpdate = false;\n  }\n\n}\n/*\n Holds the root and binds to a THREE.Scene\n\n Will hold objects and inject them a few at a time\n to avoid long UI blocks.\n\n Will render injected objects to a 1x1 scratch buffer to ensure availability\n*/\n\n\nclass Scene extends _renderable.Renderable {\n  constructor(renderer, shaders, options) {\n    super(renderer, shaders, options);\n    this.root = new MathBox();\n\n    if ((options != null ? options.scene : undefined) != null) {\n      this.scene = options.scene;\n    }\n\n    if (this.scene == null) {\n      this.scene = new _Scene.Scene();\n    }\n\n    this.pending = [];\n    this.async = 0;\n    this.scratch = new _WebGLRenderTarget.WebGLRenderTarget(1, 1);\n    this.camera = new _PerspectiveCamera.PerspectiveCamera();\n  }\n\n  inject(scene) {\n    if (scene != null) {\n      this.scene = scene;\n    }\n\n    return this.scene.add(this.root);\n  }\n\n  unject() {\n    return this.scene != null ? this.scene.remove(this.root) : undefined;\n  }\n\n  add(object) {\n    if (this.async) {\n      return this.pending.push(object);\n    } else {\n      return this._add(object);\n    }\n  }\n\n  remove(object) {\n    this.pending = this.pending.filter(o => o !== object);\n\n    if (object.parent != null) {\n      return this._remove(object);\n    }\n  }\n\n  _add(object) {\n    return this.root.add(object);\n  }\n\n  _remove(object) {\n    return this.root.remove(object);\n  }\n\n  dispose() {\n    if (this.root.parent != null) {\n      return this.unject();\n    }\n  }\n\n  warmup(n) {\n    return this.async = +n || 0;\n  }\n\n  render() {\n    if (!this.pending.length) {\n      return;\n    }\n\n    const {\n      children\n    } = this.root; // Insert up to @async children\n\n    const added = [];\n\n    for (let i = 0, end = this.async, asc = 0 <= end; asc ? i < end : i > end; asc ? i++ : i--) {\n      const pending = this.pending.shift();\n\n      if (!pending) {\n        break;\n      } // Insert new child\n\n\n      this._add(pending);\n\n      added.push(added);\n    } // Remember current visibility\n\n\n    const visible = children.map(function (o) {\n      return o.visible;\n    }); // Force only this child visible\n\n    children.map(o => o.visible = !Array.from(added).includes(o)); // Render and throw away\n\n    const currentTarget = this.renderer.getRenderTarget();\n    this.renderer.setRenderTarget(this.scratch);\n    this.renderer.render(this.scene, this.camera);\n    this.renderer.setRenderTarget(currentTarget); // Restore visibility\n\n    return children.map((o, i) => o.visible = visible[i]);\n  }\n\n  toJSON() {\n    return this.root.toJSON();\n  }\n\n}\n\nexports.Scene = Scene;\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","Scene","_Object3D","_PerspectiveCamera","_renderable","_Scene","_WebGLRenderTarget","MathBox","Object3D","constructor","matrixAutoUpdate","frustumCulled","rotationAutoUpdate","Renderable","renderer","shaders","options","root","scene","undefined","pending","async","scratch","WebGLRenderTarget","camera","PerspectiveCamera","inject","add","unject","remove","object","push","_add","filter","o","parent","_remove","dispose","warmup","n","render","length","children","added","i","end","asc","shift","visible","map","Array","from","includes","currentTarget","getRenderTarget","setRenderTarget","toJSON"]
}
