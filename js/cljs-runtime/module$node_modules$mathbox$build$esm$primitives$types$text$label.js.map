{
"version":3,
"file":"module$node_modules$mathbox$build$esm$primitives$types$text$label.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/primitives/types/text/label.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$primitives$types$text$label\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Label = void 0;\n\nvar UJS = _interopRequireWildcard(require(\"../../../util/js.js\"));\n\nvar _primitive = require(\"../../primitive.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nclass Label extends _primitive.Primitive {\n  static initClass() {\n    this.traits = [\"node\", \"bind\", \"object\", \"visible\", \"style\", \"label\", \"attach\", \"geometry\", \"position\"];\n  }\n\n  make() {\n    let color;\n    super.make(); // Bind to attached objects\n\n    this._helpers.bind.make([{\n      to: \"label.text\",\n      trait: \"text\"\n    }, {\n      to: \"geometry.points\",\n      trait: \"source\"\n    }, {\n      to: \"geometry.colors\",\n      trait: \"source\"\n    }]);\n\n    if (this.bind.points == null) {\n      return;\n    }\n\n    if (this.bind.text == null) {\n      return;\n    } // Fetch geometry/text dimensions\n\n\n    const pointDims = this.bind.points.getDimensions();\n    const textDims = this.bind.text.getDimensions();\n    const textIsSDF = this.bind.text.textIsSDF();\n    const items = Math.min(pointDims.items, textDims.items);\n    const width = Math.min(pointDims.width, textDims.width);\n    const height = Math.min(pointDims.height, textDims.height);\n    const depth = Math.min(pointDims.depth, textDims.depth); // Build shader to sample position data\n    // and transform into screen space\n\n    let position = this.bind.points.sourceShader(this._shaders.shader());\n    position = this._helpers.position.pipeline(position); // Build shader to sample text geometry data\n\n    const sprite = this.bind.text.sourceShader(this._shaders.shader()); // Build shader to sample text image data\n\n    const map = this._shaders.shader().pipe(\"label.map\");\n\n    map.pipe(this.bind.text.textShader(this._shaders.shader())); // Build shader to resolve text data\n\n    const labelUniforms = {\n      spriteDepth: this.node.attributes[\"attach.depth\"],\n      spriteOffset: this.node.attributes[\"attach.offset\"],\n      spriteSnap: this.node.attributes[\"attach.snap\"],\n      spriteScale: this._attributes.make(this._types.number()),\n      outlineStep: this._attributes.make(this._types.number()),\n      outlineExpand: this._attributes.make(this._types.number()),\n      outlineColor: this.node.attributes[\"label.background\"]\n    };\n    this.spriteScale = labelUniforms.spriteScale;\n    this.outlineStep = labelUniforms.outlineStep;\n    this.outlineExpand = labelUniforms.outlineExpand;\n    const snippet = textIsSDF ? \"label.outline\" : \"label.alpha\";\n\n    const combine = this._shaders.shader().pipe(snippet, labelUniforms); // Build color lookup\n\n\n    if (this.bind.colors) {\n      color = this._shaders.shader();\n      this.bind.colors.sourceShader(color);\n    } // Build transition mask lookup\n\n\n    const mask = this._helpers.object.mask(); // Prepare bound uniforms\n\n\n    const styleUniforms = this._helpers.style.uniforms();\n\n    const unitUniforms = this._inherit(\"unit\").getUnitUniforms(); // Make sprite renderable\n\n\n    const uniforms = UJS.merge(unitUniforms, styleUniforms, labelUniforms);\n    this.sprite = this._renderables.make(\"sprite\", {\n      uniforms,\n      width,\n      height,\n      depth,\n      items,\n      position,\n      sprite,\n      map,\n      combine,\n      color,\n      mask,\n      linear: true\n    });\n\n    this._helpers.visible.make();\n\n    return this._helpers.object.make([this.sprite]);\n  }\n\n  unmake() {\n    this._helpers.bind.unmake();\n\n    this._helpers.visible.unmake();\n\n    this._helpers.object.unmake();\n\n    return this.sprite = null;\n  }\n\n  resize() {\n    // Fetch geometry/text dimensions\n    const pointDims = this.bind.points.getActiveDimensions();\n    const textDims = this.bind.text.getActiveDimensions();\n    const items = Math.min(pointDims.items, textDims.items);\n    const width = Math.min(pointDims.width, textDims.width);\n    const height = Math.min(pointDims.height, textDims.height);\n    const depth = Math.min(pointDims.depth, textDims.depth);\n    return this.sprite.geometry.clip(width, height, depth, items);\n  }\n\n  change(changed, touched, _init) {\n    if (touched[\"geometry\"] || changed[\"label.text\"]) {\n      return this.rebuild();\n    }\n\n    if (this.bind.points == null) {\n      return;\n    }\n\n    const {\n      size\n    } = this.props;\n    const {\n      outline\n    } = this.props;\n    const {\n      expand\n    } = this.props;\n    const height = this.bind.text.textHeight();\n    const scale = size / height;\n    this.outlineExpand.value = expand / scale * 16 / 255;\n    this.outlineStep.value = outline / scale * 16 / 255;\n    return this.spriteScale.value = scale;\n  }\n\n}\n\nexports.Label = Label;\nLabel.initClass();\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","Label","UJS","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_primitive","Primitive","initClass","traits","make","color","_helpers","bind","to","trait","points","text","pointDims","getDimensions","textDims","textIsSDF","items","Math","min","width","height","depth","position","sourceShader","_shaders","shader","pipeline","sprite","map","pipe","textShader","labelUniforms","spriteDepth","node","attributes","spriteOffset","spriteSnap","spriteScale","_attributes","_types","number","outlineStep","outlineExpand","outlineColor","snippet","combine","colors","mask","object","styleUniforms","style","uniforms","unitUniforms","_inherit","getUnitUniforms","merge","_renderables","linear","visible","unmake","resize","getActiveDimensions","geometry","clip","change","changed","touched","_init","rebuild","size","props","outline","expand","textHeight","scale"]
}
