{
"version":3,
"file":"module$node_modules$three$src$renderers$webgl$WebGLBindingStates.js",
"lineCount":18,
"mappings":"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",
"sources":["node_modules/three/src/renderers/webgl/WebGLBindingStates.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$three$src$renderers$webgl$WebGLBindingStates\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WebGLBindingStates = WebGLBindingStates;\n\nfunction WebGLBindingStates(gl, extensions, attributes, capabilities) {\n  const maxVertexAttributes = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n  const extension = capabilities.isWebGL2 ? null : extensions.get('OES_vertex_array_object');\n  const vaoAvailable = capabilities.isWebGL2 || extension !== null;\n  const bindingStates = {};\n  const defaultState = createBindingState(null);\n  let currentState = defaultState;\n\n  function setup(object, material, program, geometry, index) {\n    let updateBuffers = false;\n\n    if (vaoAvailable) {\n      const state = getBindingState(geometry, program, material);\n\n      if (currentState !== state) {\n        currentState = state;\n        bindVertexArrayObject(currentState.object);\n      }\n\n      updateBuffers = needsUpdate(geometry, index);\n      if (updateBuffers) saveCache(geometry, index);\n    } else {\n      const wireframe = material.wireframe === true;\n\n      if (currentState.geometry !== geometry.id || currentState.program !== program.id || currentState.wireframe !== wireframe) {\n        currentState.geometry = geometry.id;\n        currentState.program = program.id;\n        currentState.wireframe = wireframe;\n        updateBuffers = true;\n      }\n    }\n\n    if (object.isInstancedMesh === true) {\n      updateBuffers = true;\n    }\n\n    if (index !== null) {\n      attributes.update(index, gl.ELEMENT_ARRAY_BUFFER);\n    }\n\n    if (updateBuffers) {\n      setupVertexAttributes(object, material, program, geometry);\n\n      if (index !== null) {\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, attributes.get(index).buffer);\n      }\n    }\n  }\n\n  function createVertexArrayObject() {\n    if (capabilities.isWebGL2) return gl.createVertexArray();\n    return extension.createVertexArrayOES();\n  }\n\n  function bindVertexArrayObject(vao) {\n    if (capabilities.isWebGL2) return gl.bindVertexArray(vao);\n    return extension.bindVertexArrayOES(vao);\n  }\n\n  function deleteVertexArrayObject(vao) {\n    if (capabilities.isWebGL2) return gl.deleteVertexArray(vao);\n    return extension.deleteVertexArrayOES(vao);\n  }\n\n  function getBindingState(geometry, program, material) {\n    const wireframe = material.wireframe === true;\n    let programMap = bindingStates[geometry.id];\n\n    if (programMap === undefined) {\n      programMap = {};\n      bindingStates[geometry.id] = programMap;\n    }\n\n    let stateMap = programMap[program.id];\n\n    if (stateMap === undefined) {\n      stateMap = {};\n      programMap[program.id] = stateMap;\n    }\n\n    let state = stateMap[wireframe];\n\n    if (state === undefined) {\n      state = createBindingState(createVertexArrayObject());\n      stateMap[wireframe] = state;\n    }\n\n    return state;\n  }\n\n  function createBindingState(vao) {\n    const newAttributes = [];\n    const enabledAttributes = [];\n    const attributeDivisors = [];\n\n    for (let i = 0; i < maxVertexAttributes; i++) {\n      newAttributes[i] = 0;\n      enabledAttributes[i] = 0;\n      attributeDivisors[i] = 0;\n    }\n\n    return {\n      // for backward compatibility on non-VAO support browser\n      geometry: null,\n      program: null,\n      wireframe: false,\n      newAttributes: newAttributes,\n      enabledAttributes: enabledAttributes,\n      attributeDivisors: attributeDivisors,\n      object: vao,\n      attributes: {},\n      index: null\n    };\n  }\n\n  function needsUpdate(geometry, index) {\n    const cachedAttributes = currentState.attributes;\n    const geometryAttributes = geometry.attributes;\n    let attributesNum = 0;\n\n    for (const key in geometryAttributes) {\n      const cachedAttribute = cachedAttributes[key];\n      const geometryAttribute = geometryAttributes[key];\n      if (cachedAttribute === undefined) return true;\n      if (cachedAttribute.attribute !== geometryAttribute) return true;\n      if (cachedAttribute.data !== geometryAttribute.data) return true;\n      attributesNum++;\n    }\n\n    if (currentState.attributesNum !== attributesNum) return true;\n    if (currentState.index !== index) return true;\n    return false;\n  }\n\n  function saveCache(geometry, index) {\n    const cache = {};\n    const attributes = geometry.attributes;\n    let attributesNum = 0;\n\n    for (const key in attributes) {\n      const attribute = attributes[key];\n      const data = {};\n      data.attribute = attribute;\n\n      if (attribute.data) {\n        data.data = attribute.data;\n      }\n\n      cache[key] = data;\n      attributesNum++;\n    }\n\n    currentState.attributes = cache;\n    currentState.attributesNum = attributesNum;\n    currentState.index = index;\n  }\n\n  function initAttributes() {\n    const newAttributes = currentState.newAttributes;\n\n    for (let i = 0, il = newAttributes.length; i < il; i++) {\n      newAttributes[i] = 0;\n    }\n  }\n\n  function enableAttribute(attribute) {\n    enableAttributeAndDivisor(attribute, 0);\n  }\n\n  function enableAttributeAndDivisor(attribute, meshPerAttribute) {\n    const newAttributes = currentState.newAttributes;\n    const enabledAttributes = currentState.enabledAttributes;\n    const attributeDivisors = currentState.attributeDivisors;\n    newAttributes[attribute] = 1;\n\n    if (enabledAttributes[attribute] === 0) {\n      gl.enableVertexAttribArray(attribute);\n      enabledAttributes[attribute] = 1;\n    }\n\n    if (attributeDivisors[attribute] !== meshPerAttribute) {\n      const extension = capabilities.isWebGL2 ? gl : extensions.get('ANGLE_instanced_arrays');\n      extension[capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE'](attribute, meshPerAttribute);\n      attributeDivisors[attribute] = meshPerAttribute;\n    }\n  }\n\n  function disableUnusedAttributes() {\n    const newAttributes = currentState.newAttributes;\n    const enabledAttributes = currentState.enabledAttributes;\n\n    for (let i = 0, il = enabledAttributes.length; i < il; i++) {\n      if (enabledAttributes[i] !== newAttributes[i]) {\n        gl.disableVertexAttribArray(i);\n        enabledAttributes[i] = 0;\n      }\n    }\n  }\n\n  function vertexAttribPointer(index, size, type, normalized, stride, offset) {\n    if (capabilities.isWebGL2 === true && (type === gl.INT || type === gl.UNSIGNED_INT)) {\n      gl.vertexAttribIPointer(index, size, type, stride, offset);\n    } else {\n      gl.vertexAttribPointer(index, size, type, normalized, stride, offset);\n    }\n  }\n\n  function setupVertexAttributes(object, material, program, geometry) {\n    if (capabilities.isWebGL2 === false && (object.isInstancedMesh || geometry.isInstancedBufferGeometry)) {\n      if (extensions.get('ANGLE_instanced_arrays') === null) return;\n    }\n\n    initAttributes();\n    const geometryAttributes = geometry.attributes;\n    const programAttributes = program.getAttributes();\n    const materialDefaultAttributeValues = material.defaultAttributeValues;\n\n    for (const name in programAttributes) {\n      const programAttribute = programAttributes[name];\n\n      if (programAttribute.location >= 0) {\n        let geometryAttribute = geometryAttributes[name];\n\n        if (geometryAttribute === undefined) {\n          if (name === 'instanceMatrix' && object.instanceMatrix) geometryAttribute = object.instanceMatrix;\n          if (name === 'instanceColor' && object.instanceColor) geometryAttribute = object.instanceColor;\n        }\n\n        if (geometryAttribute !== undefined) {\n          const normalized = geometryAttribute.normalized;\n          const size = geometryAttribute.itemSize;\n          const attribute = attributes.get(geometryAttribute); // TODO Attribute may not be available on context restore\n\n          if (attribute === undefined) continue;\n          const buffer = attribute.buffer;\n          const type = attribute.type;\n          const bytesPerElement = attribute.bytesPerElement;\n\n          if (geometryAttribute.isInterleavedBufferAttribute) {\n            const data = geometryAttribute.data;\n            const stride = data.stride;\n            const offset = geometryAttribute.offset;\n\n            if (data && data.isInstancedInterleavedBuffer) {\n              for (let i = 0; i < programAttribute.locationSize; i++) {\n                enableAttributeAndDivisor(programAttribute.location + i, data.meshPerAttribute);\n              }\n\n              if (object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined) {\n                geometry._maxInstanceCount = data.meshPerAttribute * data.count;\n              }\n            } else {\n              for (let i = 0; i < programAttribute.locationSize; i++) {\n                enableAttribute(programAttribute.location + i);\n              }\n            }\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n\n            for (let i = 0; i < programAttribute.locationSize; i++) {\n              vertexAttribPointer(programAttribute.location + i, size / programAttribute.locationSize, type, normalized, stride * bytesPerElement, (offset + size / programAttribute.locationSize * i) * bytesPerElement);\n            }\n          } else {\n            if (geometryAttribute.isInstancedBufferAttribute) {\n              for (let i = 0; i < programAttribute.locationSize; i++) {\n                enableAttributeAndDivisor(programAttribute.location + i, geometryAttribute.meshPerAttribute);\n              }\n\n              if (object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined) {\n                geometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n              }\n            } else {\n              for (let i = 0; i < programAttribute.locationSize; i++) {\n                enableAttribute(programAttribute.location + i);\n              }\n            }\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n\n            for (let i = 0; i < programAttribute.locationSize; i++) {\n              vertexAttribPointer(programAttribute.location + i, size / programAttribute.locationSize, type, normalized, size * bytesPerElement, size / programAttribute.locationSize * i * bytesPerElement);\n            }\n          }\n        } else if (materialDefaultAttributeValues !== undefined) {\n          const value = materialDefaultAttributeValues[name];\n\n          if (value !== undefined) {\n            switch (value.length) {\n              case 2:\n                gl.vertexAttrib2fv(programAttribute.location, value);\n                break;\n\n              case 3:\n                gl.vertexAttrib3fv(programAttribute.location, value);\n                break;\n\n              case 4:\n                gl.vertexAttrib4fv(programAttribute.location, value);\n                break;\n\n              default:\n                gl.vertexAttrib1fv(programAttribute.location, value);\n            }\n          }\n        }\n      }\n    }\n\n    disableUnusedAttributes();\n  }\n\n  function dispose() {\n    reset();\n\n    for (const geometryId in bindingStates) {\n      const programMap = bindingStates[geometryId];\n\n      for (const programId in programMap) {\n        const stateMap = programMap[programId];\n\n        for (const wireframe in stateMap) {\n          deleteVertexArrayObject(stateMap[wireframe].object);\n          delete stateMap[wireframe];\n        }\n\n        delete programMap[programId];\n      }\n\n      delete bindingStates[geometryId];\n    }\n  }\n\n  function releaseStatesOfGeometry(geometry) {\n    if (bindingStates[geometry.id] === undefined) return;\n    const programMap = bindingStates[geometry.id];\n\n    for (const programId in programMap) {\n      const stateMap = programMap[programId];\n\n      for (const wireframe in stateMap) {\n        deleteVertexArrayObject(stateMap[wireframe].object);\n        delete stateMap[wireframe];\n      }\n\n      delete programMap[programId];\n    }\n\n    delete bindingStates[geometry.id];\n  }\n\n  function releaseStatesOfProgram(program) {\n    for (const geometryId in bindingStates) {\n      const programMap = bindingStates[geometryId];\n      if (programMap[program.id] === undefined) continue;\n      const stateMap = programMap[program.id];\n\n      for (const wireframe in stateMap) {\n        deleteVertexArrayObject(stateMap[wireframe].object);\n        delete stateMap[wireframe];\n      }\n\n      delete programMap[program.id];\n    }\n  }\n\n  function reset() {\n    resetDefaultState();\n    if (currentState === defaultState) return;\n    currentState = defaultState;\n    bindVertexArrayObject(currentState.object);\n  } // for backward-compatilibity\n\n\n  function resetDefaultState() {\n    defaultState.geometry = null;\n    defaultState.program = null;\n    defaultState.wireframe = false;\n  }\n\n  return {\n    setup: setup,\n    reset: reset,\n    resetDefaultState: resetDefaultState,\n    dispose: dispose,\n    releaseStatesOfGeometry: releaseStatesOfGeometry,\n    releaseStatesOfProgram: releaseStatesOfProgram,\n    initAttributes: initAttributes,\n    enableAttribute: enableAttribute,\n    disableUnusedAttributes: disableUnusedAttributes\n  };\n}\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","WebGLBindingStates","gl","extensions","attributes","capabilities","bindVertexArrayObject","vao","isWebGL2","bindVertexArray","extension","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","createBindingState","newAttributes","enabledAttributes","attributeDivisors","i","maxVertexAttributes","geometry","program","wireframe","object","index","initAttributes","currentState","il","length","enableAttribute","attribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","get","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","size","type","normalized","stride","offset","INT","UNSIGNED_INT","vertexAttribIPointer","reset","resetDefaultState","defaultState","getParameter","MAX_VERTEX_ATTRIBS","vaoAvailable","bindingStates","setup","material","updateBuffers","programMap","id","undefined","stateMap","state","createVertexArray","createVertexArrayOES","cachedAttributes","geometryAttributes","attributesNum","key","cachedAttribute","geometryAttribute","data","cache","isInstancedMesh","update","ELEMENT_ARRAY_BUFFER","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","defaultAttributeValues","name","programAttribute","location","instanceMatrix","instanceColor","itemSize","buffer","isInterleavedBufferAttribute","bytesPerElement","isInstancedInterleavedBuffer","locationSize","_maxInstanceCount","count","bindBuffer","ARRAY_BUFFER","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","dispose","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram"]
}
