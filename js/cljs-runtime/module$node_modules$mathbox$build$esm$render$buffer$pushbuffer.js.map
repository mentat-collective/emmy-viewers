{
"version":3,
"file":"module$node_modules$mathbox$build$esm$render$buffer$pushbuffer.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/render/buffer/pushbuffer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$render$buffer$pushbuffer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PushBuffer = void 0;\n\nvar _buffer = require(\"./buffer.js\");\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\n/*\n * Buffer for CPU-side use\n */\nclass PushBuffer extends _buffer.Buffer {\n  constructor(renderer, shaders, options) {\n    const width = options.width || 1;\n    const height = options.height || 1;\n    const depth = options.depth || 1;\n    const samples = width * height * depth;\n\n    if (!options.samples) {\n      options.samples = samples;\n    }\n\n    super(renderer, shaders, options);\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n\n    if (this.samples == null) {\n      this.samples = samples;\n    }\n\n    this.build(options);\n  }\n\n  build(_options) {\n    this.data = [];\n    this.data.length = this.samples;\n    this.filled = 0;\n    this.pad = {\n      x: 0,\n      y: 0,\n      z: 0\n    };\n    return this.streamer = this.generate(this.data);\n  }\n\n  dispose() {\n    this.data = null;\n    return super.dispose();\n  }\n\n  getFilled() {\n    return this.filled;\n  }\n\n  setActive(i, j, k) {\n    let ref;\n    return [this.pad.x, this.pad.y, this.pad.z] = Array.from(ref = [this.width - i, this.height - j, this.depth - k]), ref;\n  }\n\n  read() {\n    return this.data;\n  }\n\n  copy(data) {\n    const n = Math.min(data.length, this.samples);\n    const d = this.data;\n    return __range__(0, n, false).map(i => d[i] = data[i]);\n  }\n\n  fill() {\n    let j, k, l, repeat;\n    const {\n      callback\n    } = this;\n\n    if (typeof callback.reset === \"function\") {\n      callback.reset();\n    }\n\n    const {\n      emit,\n      skip,\n      count,\n      done,\n      reset\n    } = this.streamer;\n    reset();\n    const n = this.width;\n    const m = this.height;\n    const padX = this.pad.x;\n    const padY = this.pad.y;\n    const limit = this.samples - this.pad.z * n * m;\n    let i = j = k = l = 0;\n\n    if (padX > 0 || padY > 0) {\n      while (!done() && l < limit) {\n        l++;\n        repeat = callback(emit, i, j, k);\n\n        if (++i === n - padX) {\n          skip(padX);\n          i = 0;\n\n          if (++j === m - padY) {\n            skip(n * padY);\n            j = 0;\n            k++;\n          }\n        }\n\n        if (repeat === false) {\n          break;\n        }\n      }\n    } else {\n      while (!done() && l < limit) {\n        l++;\n        repeat = callback(emit, i, j, k);\n\n        if (++i === n) {\n          i = 0;\n\n          if (++j === m) {\n            j = 0;\n            k++;\n          }\n        }\n\n        if (repeat === false) {\n          break;\n        }\n      }\n    }\n\n    this.filled = 1;\n    return count();\n  }\n\n}\n\nexports.PushBuffer = PushBuffer;\n\nfunction __range__(left, right, inclusive) {\n  const range = [];\n  const ascending = left < right;\n  const end = !inclusive ? right : ascending ? right + 1 : right - 1;\n\n  for (let i = left; ascending ? i < end : i > end; ascending ? i++ : i--) {\n    range.push(i);\n  }\n\n  return range;\n}\n};"],
"names":["shadow$provide","global","require","module","exports","__range__","left","right","inclusive","range","ascending","end","i","push","Object","defineProperty","value","PushBuffer","_buffer","Buffer","constructor","renderer","shaders","options","width","height","depth","samples","build","_options","data","length","filled","pad","x","y","z","streamer","generate","dispose","getFilled","setActive","j","k","ref","Array","from","read","copy","d","Math","min","n","map","fill","l","repeat","callback","reset","emit","skip","count","done","m","padX","padY","limit"]
}
