{"version":3,"sources":["editscript/edit.cljc"],"mappings":";;AAeA,AAAA;AAAA;;;wBAAA,xBAAae;;AAAb,IAAAf,8CAAA,WACgBgB,MAAKC,KAAKC;AAD1B,AAAA,IAAAjB,kBAAA,EAAA,UAAA,OAAA,hBACgBe,qBAAAA;IADhBd,kBAAA,CAAAC,4BAAA,AAAAC,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,kEAAAA,pBACgBc,8CAAAA,xCAAKC,8CAAAA,zCAAKC,8CAAAA;;AAD1B,IAAAb,kBAAA,CAAAF,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAE,mBAAA;AAAA,QAAAA,gDAAAA,kEAAAA,pBACgBW,8CAAAA,xCAAKC,8CAAAA,zCAAKC,8CAAAA;;AAD1B,MAAA,AAAAZ,2BAAA,oBACgBU;;;;AADhB,AAAA,8BAAA,9BACGb,oEAAaa,MAAKC,KAAKC;AAD1B,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,mDAAA,7EACgBF,0BAAAA;AADhB,OACgBA,gDAAAA,MAAKC,KAAKC;;AAD1B,OAAAlB,4CACgBgB,MAAKC,KAAKC;;;;AAD1B,IAAAX,2CAAA,WAEaS,MAAKC,KAAKC;AAFvB,AAAA,IAAAjB,kBAAA,EAAA,UAAA,OAAA,hBAEae,qBAAAA;IAFbd,kBAAA,CAAAM,yBAAA,AAAAJ,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,kEAAAA,pBAEac,8CAAAA,xCAAKC,8CAAAA,zCAAKC,8CAAAA;;AAFvB,IAAAb,kBAAA,CAAAG,yBAAA;AAAA,AAAA,GAAA,GAAA,CAAAH,mBAAA;AAAA,QAAAA,gDAAAA,kEAAAA,pBAEaW,8CAAAA,xCAAKC,8CAAAA,zCAAKC,8CAAAA;;AAFvB,MAAA,AAAAZ,2BAAA,iBAEaU;;;;AAFb,AAAA,2BAAA,3BAEGR,8DAAUQ,MAAKC,KAAKC;AAFvB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,gDAAA,1EAEaF,0BAAAA;AAFb,OAEaA,6CAAAA,MAAKC,KAAKC;;AAFvB,OAAAX,yCAEaS,MAAKC,KAAKC;;;;AAFvB,IAAAT,8CAAA,WAGgBO,MAAKC;AAHrB,AAAA,IAAAhB,kBAAA,EAAA,UAAA,OAAA,hBAGgBe,qBAAAA;IAHhBd,kBAAA,CAAAQ,4BAAA,AAAAN,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,4DAAAA,dAGgBc,wCAAAA,lCAAKC,wCAAAA;;AAHrB,IAAAZ,kBAAA,CAAAK,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAL,mBAAA;AAAA,QAAAA,gDAAAA,4DAAAA,dAGgBW,wCAAAA,lCAAKC,wCAAAA;;AAHrB,MAAA,AAAAX,2BAAA,oBAGgBU;;;;AAHhB,AAAA,8BAAA,9BAGGN,oEAAaM,MAAKC;AAHrB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,mDAAA,7EAGgBD,0BAAAA;AAHhB,OAGgBA,gDAAAA,MAAKC;;AAHrB,OAAAR,4CAGgBO,MAAKC;;;;AAHrB,IAAAN,+CAAA,WAIiBK,MAAKC,KAAKC;AAJ3B,AAAA,IAAAjB,kBAAA,EAAA,UAAA,OAAA,hBAIiBe,qBAAAA;IAJjBd,kBAAA,CAAAU,6BAAA,AAAAR,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,kEAAAA,pBAIiBc,8CAAAA,xCAAKC,8CAAAA,zCAAKC,8CAAAA;;AAJ3B,IAAAb,kBAAA,CAAAO,6BAAA;AAAA,AAAA,GAAA,GAAA,CAAAP,mBAAA;AAAA,QAAAA,gDAAAA,kEAAAA,pBAIiBW,8CAAAA,xCAAKC,8CAAAA,zCAAKC,8CAAAA;;AAJ3B,MAAA,AAAAZ,2BAAA,qBAIiBU;;;;AAJjB,AAAA,+BAAA,/BAIGJ,sEAAcI,MAAKC,KAAKC;AAJ3B,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,oDAAA,9EAIiBF,0BAAAA;AAJjB,OAIiBA,iDAAAA,MAAKC,KAAKC;;AAJ3B,OAAAP,6CAIiBK,MAAKC,KAAKC;;;;AAJ3B,IAAAL,8CAAA,WAKgBG,MAAKC,KAAKE,IAAIC;AAL9B,AAAA,IAAAnB,kBAAA,EAAA,UAAA,OAAA,hBAKgBe,qBAAAA;IALhBd,kBAAA,CAAAY,4BAAA,AAAAV,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,sEAAAA,xBAKgBc,kDAAAA,5CAAKC,kDAAAA,7CAAKE,kDAAAA,9CAAIC,kDAAAA;;AAL9B,IAAAf,kBAAA,CAAAS,4BAAA;AAAA,AAAA,GAAA,GAAA,CAAAT,mBAAA;AAAA,QAAAA,gDAAAA,sEAAAA,xBAKgBW,kDAAAA,5CAAKC,kDAAAA,7CAAKE,kDAAAA,9CAAIC,kDAAAA;;AAL9B,MAAA,AAAAd,2BAAA,oBAKgBU;;;;AALhB,AAAA,8BAAA,9BAKGF,oEAAaE,MAAKC,KAAKE,IAAIC;AAL9B,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,mDAAA,7EAKgBJ,0BAAAA;AALhB,OAKgBA,gDAAAA,MAAKC,KAAKE,IAAIC;;AAL9B,OAAAP,4CAKgBG,MAAKC,KAAKE,IAAIC;;;;AAL9B,AAOA,AAAA;AAAA;;;8BAAA,9BAAaiB;;AAAb,IAAAhB,gDAAA,WACYL,MAAKsB;AADjB,AAAA,IAAArC,kBAAA,EAAA,UAAA,OAAA,hBACYe,qBAAAA;IADZd,kBAAA,CAAAoB,wBAAA,AAAAlB,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,4DAAAA,dACYc,wCAAAA,lCAAKsB,wCAAAA;;AADjB,IAAAjC,kBAAA,CAAAiB,wBAAA;AAAA,AAAA,GAAA,GAAA,CAAAjB,mBAAA;AAAA,QAAAA,gDAAAA,4DAAAA,dACYW,wCAAAA,lCAAKsB,wCAAAA;;AADjB,MAAA,AAAAhC,2BAAA,sBACYU;;;;AADZ,AAAA;;;0BAAA,1BACGM,4DAASN,MAAKsB;AADjB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,qDAAA,/EACYtB,0BAAAA;AADZ,OACYA,kDAAAA,MAAKsB;;AADjB,OAAAjB,8CACYL,MAAKsB;;;;AADjB,IAAAf,iDAAA,WAGaP;AAHb,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBAGae,qBAAAA;IAHbd,kBAAA,CAAAsB,yBAAA,AAAApB,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAGac,mCAAAA;;AAHb,IAAAX,kBAAA,CAAAmB,yBAAA;AAAA,AAAA,GAAA,GAAA,CAAAnB,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAGaW,mCAAAA;;AAHb,MAAA,AAAAV,2BAAA,uBAGaU;;;;AAHb,AAAA;;;2BAAA,3BAGGQ,8DAAUR;AAHb,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,sDAAA,hFAGaA,0BAAAA;AAHb,OAGaA,mDAAAA;;AAHb,OAAAO,+CAGaP;;;;AAHb,IAAAS,iDAAA,WAIaT,MAAKuB;AAJlB,AAAA,IAAAtC,kBAAA,EAAA,UAAA,OAAA,hBAIae,qBAAAA;IAJbd,kBAAA,CAAAwB,yBAAA,AAAAtB,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,4DAAAA,dAIac,wCAAAA,lCAAKuB,wCAAAA;;AAJlB,IAAAlC,kBAAA,CAAAqB,yBAAA;AAAA,AAAA,GAAA,GAAA,CAAArB,mBAAA;AAAA,QAAAA,gDAAAA,4DAAAA,dAIaW,wCAAAA,lCAAKuB,wCAAAA;;AAJlB,MAAA,AAAAjC,2BAAA,uBAIaU;;;;AAJb,AAAA;;;2BAAA,3BAIGU,8DAAUV,MAAKuB;AAJlB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,sDAAA,hFAIavB,0BAAAA;AAJb,OAIaA,mDAAAA,MAAKuB;;AAJlB,OAAAd,+CAIaT,MAAKuB;;;;AAJlB,IAAAZ,sDAAA,WAKkBX;AALlB,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBAKkBe,qBAAAA;IALlBd,kBAAA,CAAA0B,8BAAA,AAAAxB,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAKkBc,mCAAAA;;AALlB,IAAAX,kBAAA,CAAAuB,8BAAA;AAAA,AAAA,GAAA,GAAA,CAAAvB,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAKkBW,mCAAAA;;AALlB,MAAA,AAAAV,2BAAA,4BAKkBU;;;;AALlB,AAAA;;;gCAAA,hCAKGY,wEAAeZ;AALlB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,2DAAA,rFAKkBA,0BAAAA;AALlB,OAKkBA,wDAAAA;;AALlB,OAAAW,oDAKkBX;;;;AALlB,IAAAa,kDAAA,WAMcb;AANd,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBAMce,qBAAAA;IANdd,kBAAA,CAAA4B,0BAAA,AAAA1B,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAMcc,mCAAAA;;AANd,IAAAX,kBAAA,CAAAyB,0BAAA;AAAA,AAAA,GAAA,GAAA,CAAAzB,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAMcW,mCAAAA;;AANd,MAAA,AAAAV,2BAAA,wBAMcU;;;;AANd,AAAA;;;4BAAA,5BAMGc,gEAAWd;AANd,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,uDAAA,jFAMcA,0BAAAA;AANd,OAMcA,oDAAAA;;AANd,OAAAa,gDAMcb;;;;AANd,IAAAe,qDAAA,WAOiBf;AAPjB,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBAOiBe,qBAAAA;IAPjBd,kBAAA,CAAA8B,6BAAA,AAAA5B,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAOiBc,mCAAAA;;AAPjB,IAAAX,kBAAA,CAAA2B,6BAAA;AAAA,AAAA,GAAA,GAAA,CAAA3B,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAOiBW,mCAAAA;;AAPjB,MAAA,AAAAV,2BAAA,2BAOiBU;;;;AAPjB,AAAA;;;+BAAA,/BAOGgB,sEAAchB;AAPjB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,0DAAA,pFAOiBA,0BAAAA;AAPjB,OAOiBA,uDAAAA;;AAPjB,OAAAe,mDAOiBf;;;;AAPjB,IAAAiB,qDAAA,WAQiBjB;AARjB,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBAQiBe,qBAAAA;IARjBd,kBAAA,CAAAgC,6BAAA,AAAA9B,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAQiBc,mCAAAA;;AARjB,IAAAX,kBAAA,CAAA6B,6BAAA;AAAA,AAAA,GAAA,GAAA,CAAA7B,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TAQiBW,mCAAAA;;AARjB,MAAA,AAAAV,2BAAA,2BAQiBU;;;;AARjB,AAAA;;;+BAAA,/BAQGkB,sEAAclB;AARjB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,0DAAA,pFAQiBA,0BAAAA;AARjB,OAQiBA,uDAAAA;;AARjB,OAAAiB,mDAQiBjB;;;;AARjB,IAAAmB,qDAAA,WASiBnB;AATjB,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBASiBe,qBAAAA;IATjBd,kBAAA,CAAAkC,6BAAA,AAAAhC,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TASiBc,mCAAAA;;AATjB,IAAAX,kBAAA,CAAA+B,6BAAA;AAAA,AAAA,GAAA,GAAA,CAAA/B,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TASiBW,mCAAAA;;AATjB,MAAA,AAAAV,2BAAA,2BASiBU;;;;AATjB,AAAA;;;+BAAA,/BASGoB,sEAAcpB;AATjB,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,0DAAA,pFASiBA,0BAAAA;AATjB,OASiBA,uDAAAA;;AATjB,OAAAmB,mDASiBnB;;;;AATjB,AAWA,AAAA;AAAA;;;wBAAA,xBAAa0B;;AAAb,IAAAF,2CAAA,WACaxB;AADb,AAAA,IAAAf,kBAAA,EAAA,UAAA,OAAA,hBACae,qBAAAA;IADbd,kBAAA,CAAAuC,yBAAA,AAAArC,YAAAH;AAAA,AAAA,GAAA,GAAA,CAAAC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TACac,mCAAAA;;AADb,IAAAX,kBAAA,CAAAoC,yBAAA;AAAA,AAAA,GAAA,GAAA,CAAApC,mBAAA;AAAA,QAAAA,gDAAAA,uDAAAA,TACaW,mCAAAA;;AADb,MAAA,AAAAV,2BAAA,iBACaU;;;;AADb,AAAA;;;2BAAA,3BACGyB,8DAAUzB;AADb,AAAA,GAAA,EAAA,GAAA,UAAA,aAAA,GAAA,CAAA,gDAAA,1EACaA,0BAAAA;AADb,OACaA,6CAAAA;;AADb,OAAAwB,yCACaxB;;;;AADb,AAGA;;;uBAAA,vBAAM2B;AAAN,AAGE,AAAA,GAAA,QAAAC,uCAAAC,4CAAAC;AAAA;AAAA,AAAA,AAAA;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,AAAAC,0FAAA,WAAAC,OAAAC;;AAAA,AAAA,IAAAD,aAAA;AAAA,AAAA,YAAAD,uCAAAE;;;AAAA,CAAA,AAAA,AAAAF,iFAAA,WAAAC;;AAAA,AAAA,IAAAA,aAAA;AAAA,AAAAC;;;AAAA,CAAA,AAAA,AAAAF,0EAAAG;;AAAA,CAAA,AAAA,AAAAH,0FAAA,WACaS;;AADb,AAAA,YAAA,RACaA;AADb,AAAA;;;AAAA,CAAA,AAAAT,kDAAA;AAAA,AAAA,AAAA;;;AAAA,CAAA,AAAAA,wDAAA;;AAAA,CAAA,AAAAA,2DAAA;;AAAA,CAAA,AAAAA,gEAAA,WAAAI,mBAAAC,qBAAAC;AAAA,AAAA,OAAAC,iBAAAF,qBAAA;;;AAAA;;;AAAAG,8CAAA,6DAAAN;AAAA,AAAA,YAAAF,uCAAAE;;;AAAAF;;AAAA,YAAAA,uCAAA;;AAiCC,AAAA,AAAA,CAAAL,sBAAA,UAAA;;AAAA,CAAAD,yBAAA,UAmCE,WAAWe;AAAX,AAAA;;;AAnCF,AAAA,CAAA,AAAA,sDAAAN,tDAyBEe;;AAzBF,CAAA,AAAA,AAyBEA,sEACA,WAAWT;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AA1BF,AAAA,CAAA,AAAA,+DAAAN,/DA+BEiB;;AA/BF,CAAA,AAAA,AA+BEA,+EACA,WAAWX;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AAhCF,AAAA,CAAA,AAAA,kDAAAN,lDAOES;;AAPF,CAAA,AAAA,AAOEA,kEACA,WAAWH;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AARF,AAAA,CAAA,AAAA,+DAAAN,/DAaEW;;AAbF,CAAA,AAAA,AAaEA,+EACA,WAAWL;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AAdF,AAAA,CAAA,AAAA,oDAAAN,pDAsBEc;;AAtBF,CAAA,AAAA,AAsBEA,oEACA,WAAWR;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AAvBF,AAAA,CAAAd,sBAAA,OAAA;;AAAA,CAAAD,yBAAA,OAyCE,WAAWe;AAAX,AAAA;;;AAzCF,AAAA,CAAA,AAAA,+DAAAN,/DAgBEY;;AAhBF,CAAA,AAAA,AAgBEA,+EACA,WAAWN;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AAjBF,AAAA,CAAA,AAAA,+DAAAN,/DA4BEgB;;AA5BF,CAAA,AAAA,AA4BEA,+EACA,WAAWV;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AA7BF,AAAA,CAAA,AAAA,8DAAAN,9DAmBEa;;AAnBF,CAAA,AAAA,AAmBEA,8EACA,WAAWP;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AApBF,AAAA,CAAAd,sBAAA,YAAA;;AAAA,CAAAD,yBAAA,YAsCE,WAAWe;AAAX,AAAA;;;AAtCF,AAAA,CAAA,AAAA,uDAAAN,vDAIEQ;;AAJF,CAAA,AAAA,AAIEA,uEACA,WAAWF;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AALF,AAAA,CAAA,AAAA,gEAAAN,hEAUEU;;AAVF,CAAA,AAAA,AAUEA,gFACA,WAAWJ;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;;AAXF,AAAA,CAAA,AAAA,kDAAAN,lDACEO;;AADF,CAAA,AAAA,AACEA,kEACA,WAAWD;AAAX,AAAA,YAAA,RAAWA;AAAX,AAAA;;AAyCL,+BAAA,/BAAOY,sEACJC,KAAK9B;AADR,AAEE,IAAM+B,KAAG,WAAKC;AAAL,AAAQ,YAAA,JAAWA;;AAA5B,AACE,oBAAI,iBAAAC,WAAwB,AAAC/B,yBAAS4B;IAAlCI,eAAA,iFAAA,uDAAA,wDAAA,uDAAA;AAAA,AAAA,QAAAA,6CAAAA,2CAAAD,YAAAC,uBAAAD;;AACF,AAAI,AAAAE,6BAAA,GAAA,AAAAC,RAAQpC,yBAAAA,pBAAK+B;;AACb,IAAAM,aAAA,AAAAC,cAAcR;IAAdS,eAAA;IAAAC,eAAA;IAAAC,WAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,WAAAD;AAAA,YAAA,AAAAD,kDAAAE,1DAAQS;AAAR,AAAA,AACE,CAACrB,6DAAAA,yEAAAA,dAAQqB,qDAAAA,/CAAMlD,qDAAAA;;AADjB;AAAA,eAAAqC;eAAAE;eAAAC;eAAA,CAAAC,WAAA;;;;;;;AAAA,IAAAC,qBAAA,AAAAJ,cAAAD;AAAA,AAAA,GAAAK;AAAA,AAAA,IAAAL,iBAAAK;AAAA,AAAA,GAAA,AAAAC,6BAAAN;AAAA,IAAAO,kBAAA,AAAAC,sBAAAR;AAAA,AAAA,eAAA,AAAAS,qBAAAT;eAAAO;eAAA,AAAAG,gBAAAH;eAAA;;;;;;;AAAA,YAAA,AAAAI,gBAAAX,xBAAQa;AAAR,AAAA,AACE,CAACrB,6DAAAA,yEAAAA,dAAQqB,qDAAAA,/CAAMlD,qDAAAA;;AADjB;AAAA,eAAA,AAAAiD,eAAAZ;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;;AAEJ,OAAAF,6BAAA,GAAA,AAAAC,RAAQpC,yBAAAA,pBAAK+B;;;AAEnB,yBAAA,zBAAOoB,0DACJrB;AADH,AAEE,IAAM9B,OAAK,yBAAA,zBAACqD;AAAZ,AACE,AAACxB,6BAAQC,KAAK9B;;AADhB,OAAAoD,gBAEGpD;;AAEL,AAAA;;;;;;;;;;;;;;AAAA,AAAA,CAAA,AAAA,8DAAAW,9DAAkB2C;;AAAlB,CAAA,AAAA,iFAAA,jFAAkBA,4FAQF7E,MAAKC,KAAKC;;AAR1B,AAAA,gBAAA,ZAQgBF;AARhB,AASI,GAAMgF;AAAN,AACE,CAAMzD,cAAK,AAAC6D,gBAAK,CAAA,CAAA,CAAA,MAAK7D,eAAK,AAACmD,uBAAOzE,SAAM,uDAAA,rCAAIC,OAAM,AAACwE,uBAAOxE;;AAD7D;;AAEAF;;;AAXJ,CAAA,AAAA,8EAAA,9EAAkB6E,yFAYL7E,MAAKC,KAAKC;;AAZvB,AAAA,gBAAA,ZAYaF;AAZb,AAaI,AACE,CAAMiF,kBAAS,mBAAA,lBAAKA;;AACpB,CAAMF,eAAM,0DAAA,wFAAA,lJAACM,6CAAKN,gGAAO9E,oDAAQC;;AACjC,OAAaF,yDAAKC,KAAKC;;;AAhB7B,CAAA,AAAA,iFAAA,jFAAkB2E,4FAiBF7E,MAAKC;;AAjBrB,AAAA,gBAAA,ZAiBgBD;AAjBhB,AAkBI,AACE,CAAMkF,kBAAS,mBAAA,lBAAKA;;AACpB,CAAMH,eAAM,0DAAA,wFAAA,lJAACM,6CAAKN,gGAAO9E;;AACzB,qEAAA,9DAAaD,yDAAKC;;;AArBxB,CAAA,AAAA,kFAAA,lFAAkB4E,6FAsBD7E,MAAKC,KAAKC;;AAtB3B,AAAA,gBAAA,ZAsBiBF;AAtBjB,AAuBI,AACE,CAAMmF,kBAAS,mBAAA,lBAAKA;;AACpB,CAAMJ,eAAM,0DAAA,wFAAA,lJAACM,6CAAKN,gGAAO9E,oDAAQC;;AACjC,OAAaF,yDAAKC,KAAKC;;;AA1B7B,CAAA,AAAA,iFAAA,jFAAkB2E,4FA2BF7E,MAAKC,KAAKE,IAAIC;;AA3B9B,AAAA,gBAAA,ZA2BgBJ;AA3BhB,AA4BI,AACE,CAAMmF,kBAAS,mBAAA,lBAAKA;;AACpB,CAAMJ,eAAM,0DAAA,1DAACM,6CAAKN,gGAAO9E,KACA,iBAAAqF,WAAMlF;IAANkF,eAAA,EAAA,CAAAA,oBAAAC,oBAAA,AAAAD,aAAA;AAAA,AAAA,QAAAA;KAAA;AAAA;;;KAAA;AAAA;;;KAAA;AAAA;;;;AAAA,MAAA,KAAAE,MAAA,CAAA,mEAAAF;;;KAIAnF;;AACzB,qEAAA,9DAAaH,yDAAKC;;;AApCxB,CAAA,AAAA,oEAAAiC,pEAAkB2C;;AAAlB,CAAA,AAAA,mFAAA,nFAAkBA,8FAuCNrC,EAAElB;;AAvCd,AAAA,YAAA,RAuCYkB;AAvCZ,AAwCI,YAAAqC,2BAAa,AAACY,6CAAKV,aAAM,AAACjE,0BAAUQ,OACvB0D,0BACA,CAAGzD,cAAK,AAACf,yBAASc,OAClB,CAAG2D,kBAAS,AAACjE,6BAAaM,OAC1B,CAAG4D,kBAAS,AAAChE,6BAAaI,OAC1B,CAAG6D,kBAAS,AAAC/D,6BAAaE;;;AA7C3C,CAAA,AAAA,oFAAA,pFAAkBuD,+FA8CLrC;;AA9Cb,AAAA,YAAA,RA8CaA;AA9Cb,AA8CgBjB;;;AA9ChB,CAAA,AAAA,oFAAA,pFAAkBsD,+FA+CL7E,MAAKuD;;AA/ClB,AAAA,gBAAA,ZA+CavD;AA/Cb,AA+CqB,CAAMuB,cAAK,AAAC6D,gBAAK7B;;AAAIvD;;;AA/C1C,CAAA,AAAA,qFAAA,rFAAkB6E,gGAgDJrC;;AAhDd,AAAA,YAAA,RAgDcA;AAhDd,AAgDiBuC;;;AAhDjB,CAAA,AAAA,wFAAA,xFAAkBF,mGAiDDrC;;AAjDjB,AAAA,YAAA,RAiDiBA;AAjDjB,AAiDoByC;;;AAjDpB,CAAA,AAAA,wFAAA,xFAAkBJ,mGAkDDrC;;AAlDjB,AAAA,YAAA,RAkDiBA;AAlDjB,AAkDoB0C;;;AAlDpB,CAAA,AAAA,wFAAA,xFAAkBL,mGAmDDrC;;AAnDjB,AAAA,YAAA,RAmDiBA;AAnDjB,AAmDoB2C;;;AAnDpB,CAAA,AAAA,yFAAA,zFAAkBN,oGAoDArC;;AApDlB,AAAA,YAAA,RAoDkBA;AApDlB,AAoDqB,QAAA,CAAGyC,kBAASC,mBAASC;;;AApD1C,CAAA,sCAAA,tCAAkBN;AAAlB,AAAA,AAAA;;;AAAA,CAAA,4CAAA,5CAAkBA;;AAAlB,CAAA,+CAAA,/CAAkBA;;AAAlB,CAAA,oDAAA,WAAA1C,mBAAAC,qBAAAC,vGAAkBwC;AAAlB,AAAA,OAAAvC,iBAAAF,qBAAA;;;AAAA;;;kCAAA,lCAAkB0C,4EAAuDC,MAClCC,mBACsBzD,KACA0D,SACAC,SACAC;AAL7D,AAAA,YAAAN,2BAAyEE,MAClCC,mBACsBzD,KACA0D,SACAC,SACAC;;;AAL3CN,AAsDlB,yCAAA,zCAAOa,0FACJrC,KAAKjD;AADR,AAEE,SAAK,AAACuF,wBAAQtC,WACT,AAACuC,uBAAO,WAAKC;AAAL,AACE,IAAAC,mBAAI,AAACC,yBAASF;AAAd,AAAA,GAAAC;AAAAA;;AACI,IAAAE,wBAAK,AAACL,wBAAQE;AAAd,AAAA,GAAAG;AAAA,IAAAA,wBACK,6CAAA,7CAACC,iDAAI,AAAC3B,gBAAMuB;AADjB,AAAA,GAAAG;AAEK,IAAAE,aAAaL;SAAb,AAAAM,4CAAAD,WAAA,IAAA,hEAAOE;QAAP,AAAAD,4CAAAD,WAAA,IAAA,/DAAUG;AAAV,AACE,IAAAL,wBACE,iBAAAM,eAAA,iFAAA,oDAAA,qDAAA;AAAA,AAAA,QAAAA,6CAAAA,iDAAAA,NAAaF,6BAAAA;;AADf,AAAA,oBAAAJ;AAEE,IAAAO,WAAMH;IAANG,eAAA,EAAA,CAAAA,oBAAAhB,oBAAA,AAAAgB,aAAA;AAAA,AAAA,QAAAA;KAAA;AACU,OAACR,yBAASM;;;KADpB;KAAA;AAEU,IAAAG,WAAMpG;IAANoG,eAAA,EAAA,CAAAA,oBAAAjB,oBAAA,AAAAiB,aAAA;AAAA,AAAA,QAAAA;KAAA;AACY,cAASH;;;KADrB;KAAA;AAEY,OAACV,wBAAQU;;;;AAFrB,MAAA,KAAAb,MAAA,CAAA,mEAAAgB;;;;;;AAFV,MAAA,KAAAhB,MAAA,CAAA,mEAAAe;;;;AAFFP;;;AAHPA;;;AAAAA;;;GAUN3C;;AAEf,oCAAA,pCAAOoD,gFACJC;AADH,AAEE,GAAM,AAACf,wBAAQe;AAAf,AACE,IAAMC,IAAE,AAACrC,gBAAMoC;AAAf,AACE,GAAM,EAAA,CAAA,cAAA,KAAA,bAAKC,SAAAA;AAAX,AACE,IAAAC,aAAqBF;WAArB,AAAAP,4CAAAS,WAAA,IAAA,lEAAO3G;SAAP,AAAAkG,4CAAAS,WAAA,IAAA,hEAAYR;WAAZ,AAAAD,4CAAAS,WAAA,IAAA,lEAAevD;AAAf,AACE,IAAA2C,oBAAK,AAACL,wBAAQ1F;AAAd,AAAA,GAAA+F;AAAA,IAAAA,wBACK,iBAAAa,eAAA,iFAAA,oDAAA,qDAAA,sDAAA,oDAAA,oDAAA;AAAA,AAAA,QAAAA,6CAAAA,iDAAAA,NAAwBT,6BAAAA;;AAD7B,AAAA,oBAAAJ;AAAA,IAAAA,wBAEK,EAAI,6CAAA,7CAACC,6FAAKG,KAAI,SAAA,RAAM/C,cAAM,+CAAA,/CAAC4C,6CAAEU;AAFlC,AAAA,GAAAX;AAGK,oBAAI,iBAAAc,eAAA,iFAAA,sDAAA,oDAAA;AAAA,AAAA,QAAAA,6CAAAA,iDAAAA,NAAeV,6BAAAA;;AACjB,OAACV,uCAAiBrC,KAAK+C;;AADzB;;;AAHLJ;;;AAAAA;;;AAAAA;;;AAFJ;;;AAFJ;;;AAWF,qCAAA,rCAAMe,kFACHhC;AADH,AAEE,GAAM,AAACY,wBAAQZ;AAAf,AACE,GAAI,AAAClB,cAAIkB;AACP,OAACa,uBAAOa,kCAAY1B;;AADtB;;;AADF;;;AAKF,gCAAA,hCAAOiC,wEACJ3D,KAAK4D,KAAKC,KAAKC;AADlB,AAEE,IAAAC,aAAA,AAAAvD,cAAcR;IAAdgE,eAAA;IAAAC,eAAA;IAAAC,WAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,WAAAD;AAAA,QAAA,AAAAD,kDAAAE,tDAAQC;AAAR,AAAA,GACc,AAAC7B,wBAAQ6B;AADvB,AAAA,AAEE,IAAAC,iBAAM,8CAAA,9CAACtB,4CAAIqB;IAAXC,qBAAA,EAAA,CAAAA,0BAAAlC,oBAAA,AAAAkC,mBAAA;AAAA,AAAA,QAAAA;KAAA;AACK,AAAA/D,6BAAA,CAAA,AAAAC,yBAAA,/BAAQsD,uBAAAA;;;KADb;AAEK,AAAAvD,6BAAA,CAAA,AAAAC,yBAAA,/BAAQuD,uBAAAA;;;KAFb;AAGK,AAAAxD,6BAAA,CAAA,AAAAC,yBAAA,/BAAQwD,uBAAAA;;;;AAHb,MAAA,KAAA3B,MAAA,CAAA,mEAAAiC;;;;AAFF;AAAA,eAAAL;eAAAC;eAAAC;eAAA,CAAAC,WAAA;;;;;;;AAAA,eAAAH;eAAAC;eAAAC;eAAA,CAAAC,WAAA;;;;;;;;AAAA,IAAAtD,qBAAA,AAAAJ,cAAAuD;AAAA,AAAA,GAAAnD;AAAA,AAAA,IAAAmD,iBAAAnD;AAAA,AAAA,GAAA,AAAAC,6BAAAkD;AAAA,IAAAjD,kBAAA,AAAAC,sBAAAgD;AAAA,AAAA,eAAA,AAAA/C,qBAAA+C;eAAAjD;eAAA,AAAAG,gBAAAH;eAAA;;;;;;;AAAA,QAAA,AAAAI,gBAAA6C,pBAAQI;AAAR,AAAA,GACc,AAAC7B,wBAAQ6B;AADvB,AAAA,AAEE,IAAAE,iBAAM,8CAAA,9CAACvB,4CAAIqB;IAAXE,qBAAA,EAAA,CAAAA,0BAAAnC,oBAAA,AAAAmC,mBAAA;AAAA,AAAA,QAAAA;KAAA;AACK,AAAAhE,6BAAA,CAAA,AAAAC,yBAAA,/BAAQsD,uBAAAA;;;KADb;AAEK,AAAAvD,6BAAA,CAAA,AAAAC,yBAAA,/BAAQuD,uBAAAA;;;KAFb;AAGK,AAAAxD,6BAAA,CAAA,AAAAC,yBAAA,/BAAQwD,uBAAAA;;;;AAHb,MAAA,KAAA3B,MAAA,CAAA,mEAAAkC;;;;AAFF;AAAA,eAAA,AAAAlD,eAAA4C;eAAA;eAAA;eAAA;;;;;;;AAAA,eAAA,AAAA5C,eAAA4C;eAAA;eAAA;eAAA;;;;;;;;;AAAA;;;;;;AAOF,4BAAA,5BAAOO,gEACJ5C;AADH,AAEE,IAAMkC,OAAK,yBAAA,zBAACrC;IACNsC,OAAK,yBAAA,zBAACtC;IACNuC,OAAK,yBAAA,zBAACvC;AAFZ,AAGE,IAAAgD,mBAAA,AAAA/D,cAAoBkB;IAApB8C,qBAAA;IAAAC,qBAAA;IAAAC,iBAAA;;AAAA,AAAA,GAAA,AAAA,CAAAA,iBAAAD;AAAA,IAAAE,mBAAA,AAAAH,wDAAAE;cAAA,AAAA5B,4CAAA6B,iBAAA,IAAA,3EAASxF;eAAT,AAAA2D,4CAAA6B,iBAAA,IAAA,5EAAW5B;iBAAX,AAAAD,4CAAA6B,iBAAA,IAAA,9EAAc3E;AAAd,AAAA,AACE,IAAA6E,iBAAM9B;IAAN8B,qBAAA,EAAA,CAAAA,0BAAA3C,oBAAA,AAAA2C,mBAAA;AAAA,AAAA,QAAAA;KAAA;AACe,oDAAA,CAAA,6CAAA,lGAAQjB,qDAAAA;;;KADvB;AAEe,oDAAA,CAAA,6CAAA,lGAAQC,qDAAAA;;;KAFvB;AAGe,oDAAA,CAAA,6CAAA,lGAAQC,qDAAAA;;;KAHvB;KAAA;KAAA;AAIe,AAACH,8BAAc3D,WAAK4D,KAAKC,KAAKC;;;;AAJ7C,MAAA,KAAA3B,MAAA,CAAA,mEAAA0C;;;;AADF;AAAA,eAAAN;eAAAC;eAAAC;eAAA,CAAAC,iBAAA;;;;;;;AAAA,IAAA9D,2BAAA,AAAAJ,cAAA+D;AAAA,AAAA,GAAA3D;AAAA,AAAA,IAAA2D,uBAAA3D;AAAA,AAAA,GAAA,AAAAC,6BAAA0D;AAAA,IAAAzD,wBAAA,AAAAC,sBAAAwD;AAAA,AAAA,eAAA,AAAAvD,qBAAAuD;eAAAzD;eAAA,AAAAG,gBAAAH;eAAA;;;;;;;AAAA,IAAA8D,mBAAA,AAAA1D,gBAAAqD;cAAA,AAAAzB,4CAAA8B,iBAAA,IAAA,3EAASzF;eAAT,AAAA2D,4CAAA8B,iBAAA,IAAA,5EAAW7B;iBAAX,AAAAD,4CAAA8B,iBAAA,IAAA,9EAAc5E;AAAd,AAAA,AACE,IAAA8E,iBAAM/B;IAAN+B,qBAAA,EAAA,CAAAA,0BAAA5C,oBAAA,AAAA4C,mBAAA;AAAA,AAAA,QAAAA;KAAA;AACe,oDAAA,CAAA,6CAAA,lGAAQlB,qDAAAA;;;KADvB;AAEe,oDAAA,CAAA,6CAAA,lGAAQC,qDAAAA;;;KAFvB;AAGe,oDAAA,CAAA,6CAAA,lGAAQC,qDAAAA;;;KAHvB;KAAA;KAAA;AAIe,AAACH,8BAAc3D,WAAK4D,KAAKC,KAAKC;;;;AAJ7C,MAAA,KAAA3B,MAAA,CAAA,mEAAA2C;;;;AADF;AAAA,eAAA,AAAA3D,eAAAoD;eAAA;eAAA;eAAA;;;;;;;;AAAA;;;;;AAHF,0FAAA,AAAAjD,sBAAA,AAAAA,sBAAA,AAAAA,5BASIsC,sBAAMC,sBAAMC;;AAElB;;;;mCAAA,nCAAMiB,8EAGHrD;AAHH,AAIE,oBAAQ,AAACgC,mCAAahC;AAAtB;AAAA,AAAA,MAAA,KAAAS,MAAA,CAAA,kBAAA,8BAAA,KAAA;;;AACA,IAAA6C,aAAuB,AAACV,0BAAU5C;WAAlC,AAAAoB,4CAAAkC,WAAA,IAAA,lEAAOpB;WAAP,AAAAd,4CAAAkC,WAAA,IAAA,lEAAYnB;WAAZ,AAAAf,4CAAAkC,WAAA,IAAA,lEAAiBlB;AAAjB,AACE,6CAAA,tCAACrC,gCAAaC,WAAW,AAACL,uBAAOK,OAAOkC,KAAKC,KAAKC;;AAM7C,AAAA,AAAA,CAAA,AAAA,mEAAAjF,nEACE2C;;AADF,CAAA,AAAA,AACEA,qFACA,WAAayD,EAAEC,OAAOC;AAAtB,AAAA,YAAA,RAAaF;AAAb,AACE,OAACG,yDAAUF,yDAAO,4CAAK,AAAWD","names":["editscript$edit$IEdit$auto_sizing$dyn","x__5393__auto__","m__5394__auto__","editscript.edit/auto-sizing","goog/typeOf","m__5392__auto__","cljs.core/missing-protocol","editscript$edit$IEdit$add_data$dyn","editscript.edit/add-data","editscript$edit$IEdit$delete_data$dyn","editscript.edit/delete-data","editscript$edit$IEdit$replace_data$dyn","editscript.edit/replace-data","editscript$edit$IEdit$replace_str$dyn","editscript.edit/replace-str","editscript.edit/IEdit","this","path","value","ops","level","editscript$edit$IEditScript$combine$dyn","editscript.edit/combine","editscript$edit$IEditScript$get_size$dyn","editscript.edit/get-size","editscript$edit$IEditScript$set_size$dyn","editscript.edit/set-size","editscript$edit$IEditScript$edit_distance$dyn","editscript.edit/edit-distance","editscript$edit$IEditScript$get_edits$dyn","editscript.edit/get-edits","editscript$edit$IEditScript$get_adds_num$dyn","editscript.edit/get-adds-num","editscript$edit$IEditScript$get_dels_num$dyn","editscript.edit/get-dels-num","editscript$edit$IEditScript$get_reps_num$dyn","editscript.edit/get-reps-num","editscript.edit/IEditScript","that","size","editscript$edit$IType$get_type$dyn","editscript.edit/get-type","editscript.edit/IType","editscript.edit/nada","js/editscript","js/editscript.edit","js/editscript.edit.t_editscript$edit75123","editscript.edit/t_editscript$edit75123","_75125","meta75124","cljs.core/PROTOCOL_SENTINEL","this__5330__auto__","writer__5331__auto__","opt__5332__auto__","cljs.core/-write","editscript.edit/->t_editscript$edit75123","_","cljs.core/List","cljs.core/EmptyList","cljs.core/Cons","cljs.core/PersistentArrayMap","cljs.core/PersistentHashMap","cljs.core/PersistentTreeMap","cljs.core/PersistentVector","cljs.core/Subvec","cljs.core/MapEntry","cljs.core/PersistentHashSet","cljs.core/PersistentTreeSet","editscript.edit/sizing*","data","up","s","G__75129","fexpr__75128","cljs.core/-vreset!","cljs.core/-deref","seq__75130","cljs.core/seq","chunk__75131","count__75132","i__75133","temp__5753__auto__","cljs.core/chunked-seq?","c__5568__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","child","editscript.edit/sizing","cljs.core/deref","cljs.core/volatile!","editscript.edit/EditScript","editscript.edit/->EditScript","edits","auto-sizing?","adds-num","dels-num","reps-num","cljs.core/long","cljs.core.conj","G__75137","cljs.core/Keyword","js/Error","cljs.core.into","editscript.edit/valid-str-edits?","cljs.core/vector?","cljs.core/every?","x","or__5045__auto__","cljs.core/nat-int?","and__5043__auto__","cljs.core._EQ_","vec__75146","cljs.core.nth","op","y","fexpr__75150","G__75152","G__75153","editscript.edit/valid-edit?","edit","c","vec__75160","fexpr__75165","fexpr__75168","editscript.edit/valid-edits?","editscript.edit/count-str-ops","adds","dels","reps","seq__75171","chunk__75173","count__75174","i__75175","d","G__75181","G__75182","editscript.edit/count-ops","seq__75185","chunk__75186","count__75187","i__75188","vec__75213","vec__75217","G__75216","G__75220","editscript.edit/edits->script","vec__75221","o","writer","opts","cljs.core.write_all"],"sourcesContent":[";;\n;; Copyright (c) Huahai Yang. All rights reserved.\n;; The use and distribution terms for this software are covered by the\n;; Eclipse Public License 1.0 (http://opensource.org/licenses/eclipse-1.0.php)\n;; which can be found in the file LICENSE at the root of this distribution.\n;; By using this software in any fashion, you are agreeing to be bound by\n;; the terms of this license.\n;; You must not remove this notice, or any other, from this software.\n;;\n\n(ns ^:no-doc editscript.edit\n  #?(:clj (:import [clojure.lang PersistentVector IPersistentList IPersistentMap\n                    IPersistentSet IPersistentVector MapEntry]\n                   [java.util Map$Entry])))\n\n(defprotocol IEdit\n  (auto-sizing [this path value])\n  (add-data [this path value])\n  (delete-data [this path])\n  (replace-data [this path value])\n  (replace-str [this path ops level]))\n\n(defprotocol IEditScript\n  (combine [this that]\n    \"Concate that editscript onto this editscript, return the new editscript\")\n  (get-size [this] \"Report the size of the editscript\")\n  (set-size [this size] \"Set the size, return the script\")\n  (edit-distance [this] \"Report the edit distance, i.e number of operations\")\n  (get-edits [this] \"Report the edits as a vector\")\n  (get-adds-num [this] \"Report the number of additions\")\n  (get-dels-num [this] \"Report the number of deletions\")\n  (get-reps-num [this] \"Report the number of replacements\"))\n\n(defprotocol IType\n  (get-type [this] \"Return a type keyword, :val, :map, :lst, etc.\"))\n\n(defn nada\n  \"A special type means 'not present'\"\n  []\n  (reify IType\n    (get-type [_] :nil)))\n\n#?(:clj\n   (extend-protocol IType\n     IPersistentList\n     (get-type [_] :lst)\n\n     IPersistentMap\n     (get-type [_] :map)\n\n     IPersistentVector\n     (get-type [_] :vec)\n\n     IPersistentSet\n     (get-type [_] :set)\n\n     Map$Entry\n     (get-type [_] :val)\n\n     MapEntry\n     (get-type [_] :val)\n\n     nil\n     (get-type [_] :val)\n\n     String\n     (get-type [_] :str)\n\n     Object\n     (get-type [_] :val))\n\n   :cljs\n   (extend-protocol IType\n     List\n     (get-type [_] :lst)\n\n     EmptyList\n     (get-type [_] :lst)\n\n     Cons\n     (get-type [_] :lst)\n\n     PersistentArrayMap\n     (get-type [_] :map)\n\n     PersistentHashMap\n     (get-type [_] :map)\n\n     PersistentTreeMap\n     (get-type [_] :map)\n\n     PersistentVector\n     (get-type [_] :vec)\n\n     Subvec\n     (get-type [_] :vec)\n\n     MapEntry\n     (get-type [_] :val)\n\n     PersistentHashSet\n     (get-type [_] :set)\n\n     PersistentTreeSet\n     (get-type [_] :set)\n\n     nil\n     (get-type [_] :val)\n\n     string\n     (get-type [_] :str)\n\n     default\n     (get-type [_] :val)))\n\n(defn- sizing*\n  [data size]\n  (let [up (fn [s] (inc ^long s))]\n    (if (#{:vec :lst :map :set} (get-type data))\n      (do (vswap! size up)\n          (doseq [child data]\n            (sizing* child size)))\n      (vswap! size up))))\n\n(defn- sizing\n  [data]\n  (let [size (volatile! 0) ]\n    (sizing* data size)\n    @size))\n\n(deftype ^:no-doc EditScript [^:unsynchronized-mutable ^PersistentVector edits\n                              ^boolean auto-sizing?\n                              ^:unsynchronized-mutable ^long size\n                              ^:unsynchronized-mutable ^long adds-num\n                              ^:unsynchronized-mutable ^long dels-num\n                              ^:unsynchronized-mutable ^long reps-num]\n\n  IEdit\n  (auto-sizing [this path value]\n    (when auto-sizing?\n      (set! size (long (+ 2 size (sizing path) (if value (sizing value) 0)))))\n    this)\n  (add-data [this path value]\n    (locking this\n      (set! adds-num (inc adds-num))\n      (set! edits (conj edits [path :+ value]))\n      (auto-sizing this path value)))\n  (delete-data [this path]\n    (locking this\n      (set! dels-num (inc dels-num))\n      (set! edits (conj edits [path :-]))\n      (auto-sizing this path nil)))\n  (replace-data [this path value]\n    (locking this\n      (set! reps-num (inc reps-num))\n      (set! edits (conj edits [path :r value]))\n      (auto-sizing this path value)))\n  (replace-str [this path ops level]\n    (locking this\n      (set! reps-num (inc reps-num))\n      (set! edits (conj edits [path\n                               (case level\n                                 :character :s\n                                 :word      :sw\n                                 :line      :sl)\n                               ops]))\n      (auto-sizing this path \"\")))\n\n  IEditScript\n  (combine [_ that]\n    (EditScript. (into edits (get-edits that))\n                 auto-sizing?\n                 (+ size (get-size that))\n                 (+ adds-num (get-adds-num that))\n                 (+ dels-num (get-dels-num that))\n                 (+ reps-num (get-reps-num that))))\n  (get-size [_] size)\n  (set-size [this s] (set! size (long s)) this)\n  (get-edits [_] edits)\n  (get-adds-num [_] adds-num)\n  (get-dels-num [_] dels-num)\n  (get-reps-num [_] reps-num)\n  (edit-distance [_] (+ adds-num dels-num reps-num)))\n\n(defn- valid-str-edits?\n  [data level]\n  (and (vector? data)\n       (every? (fn [x]\n                 (or (nat-int? x)\n                     (and (vector? x)\n                          (= 2 (count x))\n                          (let [[op y] x]\n                            (and\n                              (#{:- :r :+} op)\n                              (case op\n                                :-      (nat-int? y)\n                                (:+ :r) (case level\n                                          :s        (string? y)\n                                          (:sl :sw) (vector? y))))))))\n               data)))\n\n(defn- valid-edit?\n  [edit]\n  (when (vector? edit)\n    (let [c (count edit)]\n      (when (< 1 c 4)\n        (let [[path op data] edit]\n          (and (vector? path)\n               (#{:- :r :+ :s :sw :sl} op)\n               (if (= :- op) (nil? data) (= c 3))\n               (if (#{:s :sw :sl} op)\n                 (valid-str-edits? data op)\n                 true)))))))\n\n(defn valid-edits?\n  [edits]\n  (when (vector? edits)\n    (if (seq edits)\n      (every? valid-edit? edits)\n      true)))\n\n(defn- count-str-ops\n  [data adds dels reps]\n  (doseq [d     data\n          :when (vector? d)]\n    (case (nth d 0)\n      :+ (vswap! adds inc)\n      :- (vswap! dels inc)\n      :r (vswap! reps inc))))\n\n(defn- count-ops\n  [edits]\n  (let [adds (volatile! 0)\n        dels (volatile! 0)\n        reps (volatile! 0)]\n    (doseq [[_ op data] edits]\n      (case op\n        :+           (vswap! adds inc)\n        :-           (vswap! dels inc)\n        :r           (vswap! reps inc)\n        (:s :sw :sl) (count-str-ops data adds dels reps)))\n    [@adds @dels @reps]))\n\n(defn edits->script\n  \"Create an EditScript instance from a vector of edits, like those obtained\n  through calling `get-edits` on an EditScript\"\n  [edits]\n  (assert (valid-edits? edits) \"Not a vector of valid edits\")\n  (let [[adds dels reps] (count-ops edits)]\n    (->EditScript edits true (sizing edits) adds dels reps)))\n\n\n#?(:clj (defmethod print-method EditScript\n          [x ^java.io.Writer writer]\n          (print-method (get-edits x) writer))\n   :cljs (extend-protocol IPrintWithWriter\n           EditScript\n           (-pr-writer [o writer opts]\n             (write-all writer (str (get-edits o))))))\n"]}