{
"version":3,
"file":"module$node_modules$mathbox$build$esm$primitives$types$operator$split.js",
"lineCount":7,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/primitives/types/operator/split.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$primitives$types$operator$split\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Split = void 0;\n\nvar UGLSL = _interopRequireWildcard(require(\"../../../util/glsl.js\"));\n\nvar _operator = require(\"./operator.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS101: Remove unnecessary use of Array.from\n * DS102: Remove unnecessary code created because of implicit returns\n * DS104: Avoid inline assignments\n * DS205: Consider reworking code to avoid use of IIFEs\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\n\n/*\nsplit:\n  order:       Types.transpose('wxyz')\n  axis:        Types.axis()\n  length:      Types.int(1)\n  overlap:     Types.int(0)\n*/\nclass Split extends _operator.Operator {\n  static initClass() {\n    this.traits = [\"node\", \"bind\", \"operator\", \"source\", \"index\", \"split\"];\n  }\n\n  indexShader(shader) {\n    shader.pipe(this.operator);\n    return super.indexShader(shader);\n  }\n\n  sourceShader(shader) {\n    shader.pipe(this.operator);\n    return super.sourceShader(shader);\n  }\n\n  getDimensions() {\n    return this._resample(this.bind.source.getDimensions());\n  }\n\n  getActiveDimensions() {\n    return this._resample(this.bind.source.getActiveDimensions());\n  }\n\n  getFutureDimensions() {\n    return this._resample(this.bind.source.getFutureDimensions());\n  }\n\n  getIndexDimensions() {\n    return this._resample(this.bind.source.getIndexDimensions());\n  }\n\n  _resample(dims) {\n    let dim;\n    const {\n      order\n    } = this;\n    const {\n      axis\n    } = this;\n    const {\n      overlap\n    } = this;\n    const {\n      length\n    } = this;\n    const {\n      stride\n    } = this;\n    const labels = [\"width\", \"height\", \"depth\", \"items\"];\n    const mapped = order.map(x => labels[x - 1]);\n    const index = order.indexOf(axis);\n\n    let set = (() => {\n      const result = [];\n\n      for (dim of Array.from(mapped)) {\n        result.push(dims[dim]);\n      }\n\n      return result;\n    })();\n\n    const remain = Math.floor((set[index] - overlap) / stride);\n    set.splice(index, 1, length, remain);\n    set = set.slice(0, 4);\n    const out = {};\n\n    for (let i = 0; i < mapped.length; i++) {\n      dim = mapped[i];\n      out[dim] = set[i];\n    } //console.log 'split', order, axis, length, stride\n    //console.log dims, out\n\n\n    return out;\n  }\n\n  make() {\n    let left;\n    super.make();\n\n    if (this.bind.source == null) {\n      return;\n    }\n\n    const {\n      order\n    } = this.props;\n    let {\n      axis\n    } = this.props;\n    let {\n      overlap\n    } = this.props;\n    const {\n      length\n    } = this.props;\n    /*\n    Calculate index transform\n         order: wxyz\n    length: 3\n    overlap: 1\n         axis: w\n    index: 0\n    split: wx\n    rest:  0yz0\n           s\n         axis: x\n    index: 1\n    split: xy\n    rest:  w0z0\n            s\n         axis: y\n    index: 2\n    split: yz\n    rest:  wx00\n             s\n         axis: z\n    index: 3\n    split: z0\n    rest: wxy0\n             s\n         */\n\n    const permute = order.join(\"\");\n\n    if (axis == null) {\n      axis = order[0];\n    }\n\n    const index = permute.indexOf(axis);\n    const split = permute[index] + ((left = permute[index + 1]) != null ? left : 0);\n    const rest = permute.replace(split[1], \"\").replace(split[0], \"0\") + \"0\"; // Prepare uniforms\n\n    overlap = Math.min(length - 1, overlap);\n    const stride = length - overlap;\n    const uniforms = {\n      splitStride: this._attributes.make(this._types.number(stride))\n    }; // Build shader to split a dimension into two\n\n    const transform = this._shaders.shader();\n\n    transform.require(UGLSL.swizzleVec4(split, 2));\n\n    transform.require(UGLSL.swizzleVec4(rest, 4));\n\n    transform.require(UGLSL.injectVec4(index));\n\n    transform.pipe(\"split.position\", uniforms);\n    transform.pipe(UGLSL.invertSwizzleVec4(order));\n    this.operator = transform;\n    this.order = order;\n    this.axis = axis;\n    this.overlap = overlap;\n    this.length = length;\n    return this.stride = stride;\n  }\n\n  unmake() {\n    return super.unmake();\n  }\n\n  change(changed, touched, _init) {\n    if (changed[\"split.axis\"] || changed[\"split.order\"] || touched[\"operator\"]) {\n      return this.rebuild();\n    }\n  }\n\n}\n\nexports.Split = Split;\nSplit.initClass();\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","Split","UGLSL","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_operator","Operator","initClass","traits","indexShader","shader","pipe","operator","sourceShader","getDimensions","_resample","bind","source","getActiveDimensions","getFutureDimensions","getIndexDimensions","dims","dim","order","axis","overlap","length","stride","labels","mapped","map","x","index","indexOf","result","Array","from","push","splice","Math","floor","remain","slice","out","i","make","left","props","permute","join","split","rest","replace","min","uniforms","splitStride","_attributes","_types","number","transform","_shaders","swizzleVec4","injectVec4","invertSwizzleVec4","unmake","change","changed","touched","_init","rebuild"]
}
