shadow$provide.module$node_modules$three$src$extras$ImageUtils=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.ImageUtils=void 0;var _utils=require("module$node_modules$three$src$utils"),_Color=require("module$node_modules$three$src$math$Color");let _canvas;class ImageUtils{static getDataURL(image){if(/^data:/i.test(image.src)||"undefined"==typeof HTMLCanvasElement)return image.src;if(image instanceof HTMLCanvasElement)var canvas=image;else void 0===
_canvas&&(_canvas=(0,_utils.createElementNS)("canvas")),_canvas.width=image.width,_canvas.height=image.height,canvas=_canvas.getContext("2d"),image instanceof ImageData?canvas.putImageData(image,0,0):canvas.drawImage(image,0,0,image.width,image.height),canvas=_canvas;return 2048<canvas.width||2048<canvas.height?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",image),canvas.toDataURL("image/jpeg",.6)):canvas.toDataURL("image/png")}static sRGBToLinear(image){if("undefined"!==
typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&image instanceof ImageBitmap){var canvas=(0,_utils.createElementNS)("canvas");canvas.width=image.width;canvas.height=image.height;var context=canvas.getContext("2d");context.drawImage(image,0,0,image.width,image.height);image=context.getImageData(0,0,image.width,image.height);const data=image.data;for(let i=0;i<data.length;i++)data[i]=
255*(0,_Color.SRGBToLinear)(data[i]/255);context.putImageData(image,0,0);return canvas}if(image.data){canvas=image.data.slice(0);for(context=0;context<canvas.length;context++)canvas[context]=canvas instanceof Uint8Array||canvas instanceof Uint8ClampedArray?Math.floor(255*(0,_Color.SRGBToLinear)(canvas[context]/255)):(0,_Color.SRGBToLinear)(canvas[context]);return{data:canvas,width:image.width,height:image.height}}console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.");
return image}}exports.ImageUtils=ImageUtils}
//# sourceMappingURL=module$node_modules$three$src$extras$ImageUtils.js.map
