shadow$provide.module$node_modules$$mentatcollective$jsxgraph$src$utils$dump=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _jxg=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$jxg")),_type=_interopRequireDefault(require("module$node_modules$$mentatcollective$jsxgraph$src$utils$type"));_jxg.default.Dump={addMarkers:function(board,
markers,values){var e,i;_type.default.isArray(markers)||(markers=[markers]);_type.default.isArray(values)||(values=[values]);var l=Math.min(markers.length,values.length);markers.length=l;values.length=l;for(e in board.objects)if(board.objects.hasOwnProperty(e))for(i=0;i<l;i++)board.objects[e][markers[i]]=values[i]},deleteMarkers:function(board,markers){var e,i;_type.default.isArray(markers)||(markers=[markers]);var l=markers.length;markers.length=l;for(e in board.objects)if(board.objects.hasOwnProperty(e))for(i=
0;i<l;i++)delete board.objects[e][markers[i]]},str:function(s){"string"===typeof s&&"function"!==s.substr(0,7)&&(s='"'+s+'"');return s},minimizeObject:function(instance,s){var p,pl,def={},copy=_type.default.deepCopy(instance),defaults=[];for(pl=1;pl<arguments.length;pl++)defaults.push(arguments[pl]);def=_type.default.deepCopy(def,_jxg.default.Options.elements,!0);for(pl=defaults.length;0<pl;pl--)def=_type.default.deepCopy(def,defaults[pl-1],!0);for(p in def)def.hasOwnProperty(p)&&(pl=p.toLowerCase(),
"object"!==typeof def[p]&&def[p]===copy[pl]&&delete copy[pl]);return copy},prepareAttributes:function(board,obj){var s;board=this.minimizeObject(obj.getAttributes(),_jxg.default.Options[obj.elType]);for(s in obj.subs)obj.subs.hasOwnProperty(s)&&(board[s]=this.minimizeObject(obj.subs[s].getAttributes(),_jxg.default.Options[obj.elType][s],_jxg.default.Options[obj.subs[s].elType]),board[s].id=obj.subs[s].id,board[s].name=obj.subs[s].name);board.id=obj.id;board.name=obj.name;return board},setBoundingBox:function(methods,
board,boardVarName){methods.push({obj:boardVarName,method:"setBoundingBox",params:[board.getBoundingBox(),board.keepaspectratio]});return methods},dump:function(board){var e,s,props=[],elementList=[],len=board.objectsList.length;this.addMarkers(board,"dumped",!1);for(e=0;e<len;e++){var obj=board.objectsList[e];var element={};if(!obj.dumped&&obj.dump){element.type=obj.getType();element.parents=obj.getParents().slice();"point"===element.type&&1===element.parents[0]&&(element.parents=element.parents.slice(1));
for(s=0;s<element.parents.length;s++)_type.default.isString(element.parents[s])&&"'"!==element.parents[s][0]&&'"'!==element.parents[s][0]?element.parents[s]='"'+element.parents[s]+'"':_type.default.isArray(element.parents[s])&&(element.parents[s]="["+element.parents[s].toString()+"]");element.attributes=this.prepareAttributes(board,obj);"glider"===element.type&&obj.onPolygon&&props.push({obj:obj.id,prop:"onPolygon",val:!0});elementList.push(element)}}this.deleteMarkers(board,"dumped");return{elements:elementList,
props,methods:[]}},arrayToParamStr:function(a,converter){var i,s=[];for(i=0;i<a.length;i++)s.push(converter.call(this,a[i]));return s.join(", ")},toJCAN:function(obj){var i;switch(typeof obj){case "object":if(obj){var list=[];if(_type.default.isArray(obj)){for(i=0;i<obj.length;i++)list.push(this.toJCAN(obj[i]));return"["+list.join(",")+"]"}for(i in obj)obj.hasOwnProperty(i)&&list.push(i+": "+this.toJCAN(obj[i]));return"\x3c\x3c"+list.join(", ")+"\x3e\x3e "}return"null";case "string":return"'"+obj.replace(/\\/g,
"\\\\").replace(/(["'])/g,"\\$1")+"'";case "number":case "boolean":return obj.toString();case "null":return"null"}},toJessie:function(board){var i,dump=this.dump(board),script=[];dump.methods=this.setBoundingBox(dump.methods,board,"$board");var elements=dump.elements;for(i=0;i<elements.length;i++){0<elements[i].attributes.name.length&&script.push("// "+elements[i].attributes.name);script.push("s"+i+" \x3d "+elements[i].type+"("+elements[i].parents.join(", ")+") "+this.toJCAN(elements[i].attributes).replace(/\n/,
"\\n")+";");if("axis"===elements[i].type){var id=elements[i].attributes.id;null===board.objects[id].defaultTicks&&script.push("s"+i+".removeAllTicks();")}script.push("")}for(i=0;i<dump.methods.length;i++)script.push(dump.methods[i].obj+"."+dump.methods[i].method+"("+this.arrayToParamStr(dump.methods[i].params,this.toJCAN)+");"),script.push("");for(i=0;i<dump.props.length;i++)script.push(dump.props[i].obj+"."+dump.props[i].prop+" \x3d "+this.toJCAN(dump.props[i].val)+";"),script.push("");return script.join("\n")},
toJavaScript:function(board){var i,dump=this.dump(board),script=[];dump.methods=this.setBoundingBox(dump.methods,board,"board");var elements=dump.elements;for(i=0;i<elements.length;i++)if(script.push('board.create("'+elements[i].type+'", ['+elements[i].parents.join(", ")+"], "+_type.default.toJSON(elements[i].attributes)+");"),"axis"===elements[i].type){var id=elements[i].attributes.id;null===board.objects[id].defaultTicks&&script.push('board.objects["'+id+'"].removeTicks(board.objects["'+id+'"].defaultTicks);')}for(i=
0;i<dump.methods.length;i++)script.push(dump.methods[i].obj+"."+dump.methods[i].method+"("+this.arrayToParamStr(dump.methods[i].params,_type.default.toJSON)+");"),script.push("");for(i=0;i<dump.props.length;i++)script.push(dump.props[i].obj+"."+dump.props[i].prop+" \x3d "+_type.default.toJSON(dump.props[i].val)+";"),script.push("");return script.join("\n")}};exports.default=_jxg.default.Dump}
//# sourceMappingURL=module$node_modules$$mentatcollective$jsxgraph$src$utils$dump.js.map
