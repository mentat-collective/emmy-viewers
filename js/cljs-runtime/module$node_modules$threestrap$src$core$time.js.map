{
"version":3,
"file":"module$node_modules$threestrap$src$core$time.js",
"lineCount":3,
"mappings":"AAAAA,cAAA,CAAA,4CAAA,CAAiE,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAGxFF,OAAAG,CAAQ,8CAARA,CAENC,CAAAA,SAAUC,CAAAA,cAArB,CAAoC,MAApC,CAA4C,CAC1CC,SAAU,CACRC,MAAO,CADC,CAGRC,OAAQ,CAHA,CAKRC,QAAS,CALD,CADgC,CAS1CC,OAAQ,CAAC,UAAD,CAAa,aAAb,CATkC,CAU1CC,IAAKA,QAAS,EAAG,CACf,MAAO,CAAC,IAAIC,IAAZ,CAAqB,GADN,CAVyB,CAa1CC,QAASA,QAAS,CAACC,KAAD,CAAQ,CACxBA,KAAMC,CAAAA,IAAN,CAAa,IAAKC,CAAAA,GAAL,CAAS,CACpBL,IAAK,IAAKA,CAAAA,GAAL,EADe,CAGpBM,MAAO,CAHa,CAKpBC,KAAM,CAANA,CAAU,EALU,CAOpBC,OAAQ,CAPY,CASpBC,KAAM,CATc,CAWpBC,MAAO,CAAPA,CAAW,EAXS,CAapBC,QAAS,CAbW,CAepBC,IAAK,CAfe,CAAT,CAoBb,KAAKN,CAAAA,KAAL,CADA,IAAKG,CAAAA,IACL,CAFA,IAAKI,CAAAA,IAEL,CAFY,CAGZ,KAAKC,CAAAA,IAAL,CAAY,IAAKC,CAAAA,OAAQlB,CAAAA,MAEzB,KAAKmB,CAAAA,SAAL,CADA,IAAKC,CAAAA,UACL;AADkB,CAvBM,CAbgB,CAuC1CC,KAAMA,QAAS,CAACC,KAAD,CAAQhB,KAAR,CAAe,CACtBP,KAAAA,CAAQ,IAAKmB,CAAAA,OAAQnB,CAAAA,KAC3B,OAAME,QAAU,IAAKiB,CAAAA,OAAQjB,CAAAA,OACvBO,MAAAA,CAAMF,KAAMC,CAAAA,IAClB,OAAMJ,IAAMK,KAAIL,CAAAA,GAAVA,CAAgB,IAAKA,CAAAA,GAAL,EACtB,KAAMa,KAAO,IAAKA,CAAAA,IAClB,KAAIJ,KAAO,IAAKA,CAAAA,IAAhB,CACIH,MAAQ,IAAKA,CAAAA,KAEjB,IAAIO,IAAJ,CAAU,CACJH,IAAAA,CAAQL,KAAIK,CAAAA,KAAZA,CAAoBV,GAApBU,CAA0BG,IAC9B,OAAMF,QAAUN,KAAIM,CAAAA,OAAdA,EAAyBD,IAE3BA,KAAJ,CAAYZ,OAAZ,GACEY,IADF,CACU,CADV,CAIMH,MAAAA,EAAOG,IACbD,KAAA,EAAQC,IACRJ,MAAA,EAASC,KAEQ,EAAjB,CAAIF,KAAIG,CAAAA,MAAR,GACEH,KAAIM,CAAAA,OACJ,CADcA,OACd,CAD4C,EAC5C,EADyBD,IACzB,CADiCC,OACjC,EAAAN,KAAIO,CAAAA,GAAJ,CAAU,CAAV,CAAcD,OAFhB,CAKAN,MAAIE,CAAAA,IAAJ,CAAWA,KACXF,MAAIC,CAAAA,KAAJ,CAAYA,KAAZ,CAAoB,IAAKW,CAAAA,UACzBZ,MAAII,CAAAA,IAAJ,CAAWA,IAAX,CAAkB,IAAKO,CAAAA,SACvBX,MAAIG,CAAAA,MAAJ,EAEkB,EAAlB,CAAI,IAAKM,CAAAA,IAAL,EAAJ;CACE,IAAKG,CAAAA,UAGL,CAHkBX,KAGlB,CAFA,IAAKU,CAAAA,SAEL,CAFiBP,IAEjB,CADAJ,KAAIC,CAAAA,KACJ,CADY,CACZ,CAAAD,KAAIE,CAAAA,IAAJ,CAAW,MAJb,CAtBQ,CA8BV,IAAKM,CAAAA,IAAL,CAAYb,GACZ,KAAKM,CAAAA,KAAL,CAAaA,KACb,KAAKG,CAAAA,IAAL,CAAYA,IAzCgB,CAvCY,CAkF1CW,UAAWA,QAAS,CAACjB,KAAD,CAAQ,CAC1B,OAAOA,KAAMC,CAAAA,IADa,CAlFc,CAA5C,CALyG;",
"sources":["node_modules/threestrap/src/core/time.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$threestrap$src$core$time\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _bootstrap = require(\"../bootstrap\");\n\n_bootstrap.Bootstrap.registerPlugin(\"time\", {\n  defaults: {\n    speed: 1,\n    // Clock speed\n    warmup: 0,\n    // Wait N frames before starting clock\n    timeout: 1 // Timeout in seconds. Pause if no tick happens in this time.\n\n  },\n  listen: [\"pre:tick\", \"this.change\"],\n  now: function () {\n    return +new Date() / 1000;\n  },\n  install: function (three) {\n    three.Time = this.api({\n      now: this.now(),\n      // Time since 1970 in seconds\n      clock: 0,\n      // Adjustable clock that counts up from 0 seconds\n      step: 1 / 60,\n      // Clock step in seconds\n      frames: 0,\n      // Framenumber\n      time: 0,\n      // Real time in seconds\n      delta: 1 / 60,\n      // Frame step in seconds\n      average: 0,\n      // Average frame time in seconds\n      fps: 0 // Average frames per second\n\n    });\n    this.last = 0;\n    this.time = 0;\n    this.clock = 0;\n    this.wait = this.options.warmup;\n    this.clockStart = 0;\n    this.timeStart = 0;\n  },\n  tick: function (event, three) {\n    const speed = this.options.speed;\n    const timeout = this.options.timeout;\n    const api = three.Time;\n    const now = api.now = this.now();\n    const last = this.last;\n    let time = this.time;\n    let clock = this.clock;\n\n    if (last) {\n      let delta = api.delta = now - last;\n      const average = api.average || delta;\n\n      if (delta > timeout) {\n        delta = 0;\n      }\n\n      const step = delta * speed;\n      time += delta;\n      clock += step;\n\n      if (api.frames > 0) {\n        api.average = average + (delta - average) * 0.1;\n        api.fps = 1 / average;\n      }\n\n      api.step = step;\n      api.clock = clock - this.clockStart;\n      api.time = time - this.timeStart;\n      api.frames++;\n\n      if (this.wait-- > 0) {\n        this.clockStart = clock;\n        this.timeStart = time;\n        api.clock = 0;\n        api.step = 1e-100;\n      }\n    }\n\n    this.last = now;\n    this.clock = clock;\n    this.time = time;\n  },\n  uninstall: function (three) {\n    delete three.Time;\n  }\n});\n};"],
"names":["shadow$provide","global","require","module","exports","_bootstrap","Bootstrap","registerPlugin","defaults","speed","warmup","timeout","listen","now","Date","install","three","Time","api","clock","step","frames","time","delta","average","fps","last","wait","options","timeStart","clockStart","tick","event","uninstall"]
}
