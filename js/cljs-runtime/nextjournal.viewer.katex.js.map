{"version":3,"sources":["nextjournal/viewer/katex.cljs"],"mappings":";;AAKA,qDAAA,rDAAMA,kHAA2BC;AAAjC,AACE,IAAAC,WAAQD;IAARC,eAAA,EAAA,CAAAA,YAAA,OAAA,KACQ,uBAAAA,SAAA,uCAAA,vEAACC;IADTD,eAAA,EAAA,CAAAA,gBAAA,OAAA,KAEQ,uBAAAA,aAAA,kCAAA,tEAACC;IAFTD,eAAA,EAAA,CAAAA,gBAAA,OAAA,KAGQ,uBAAAA,aAAA,WAAA,/CAACC;IAHTD,eAAA,EAAA,CAAAA,gBAAA,OAAA,KAIQ,uBAAAA,aAAA,UAAA,9CAACC;AAJT,AAAA,GAAA,CAAAD,gBAAA;AAAA;;AAKQ,8BAAAA,aAAA,WAAA,/CAACC;;;AAEX,AAAA,0CAAA,kDAAAC,5FAAME;AAAN,AAAA,IAAAD,WAAA,AAAA;AAAA,AAAA,QAAAA;KAAA;AAAA,OAAAC,sEAAA,CAAA,UAAA;;;KAAA;AAAA,OAAAA,sEAAA,CAAA,UAAA,MAAA,CAAA,UAAA;;;;AAAA,MAAA,KAAAC,MAAA,CAAA,8DAAA,AAAA;;;;;AAAA,CAAA,wEAAA,xEAAMD,mFACFL;AADJ,AACa,qFAAA,9EAACO,sEAAeP;;;AAD7B,CAAA,wEAAA,xEAAMK,mFAEFL,QAAQQ;AAFZ,AAGG,IAAAC,qBAAoB,AAACV,mDAA0BC;AAA/C,AAAA,GAAA,CAAAS,sBAAA;AAAA;;AAAA,kBAAAA,dAAYT;AAAZ,AACE,OAACU,oDAAqBV,YAAQ,sEAAA,iBAAA,uBAAA,qBAAA,nIAACW,+IAGUH;;;;AAP9C,CAAA,kEAAA,lEAAMH;;AAAN","names":["nextjournal.viewer.katex/remove-unsupported-syntax","content","G__89269","clojure.string/replace","var_args","G__89272","nextjournal.viewer.katex/to-html-string","js/Error","nextjournal.viewer.katex.to_html_string","opts","temp__5757__auto__","js/module$node_modules$katex$dist$katex.renderToString","applied_science.js_interop.extend_BANG_"],"sourcesContent":["(ns nextjournal.viewer.katex\n  (:require [clojure.string :as str]\n            [\"katex\" :as katex]\n            [applied-science.js-interop :as j]))\n\n(defn remove-unsupported-syntax [content]\n  (some-> content\n          (str/replace #\"\\\\(begin|end)\\{(align|eqnarray)\\*?\\}\" \"\\\\$1{aligned}\")\n          (str/replace #\"\\\\(begin|end)\\{equation[^}]*?\\}\" \"\")\n          (str/replace #\"\\\\mbox\\{\" \"\\\\textrm{\")\n          (str/replace #\"\\\\label\" \"\")\n          (str/replace #\"\\\\\\\\\\\\\\n\" \"\\\\\\\\\\n\")))\n\n(defn to-html-string\n  ([content] (to-html-string content nil))\n  ([content opts]\n   (when-some [content (remove-unsupported-syntax content)]\n     (katex/renderToString content (j/extend! #js{:displayMode false\n                                                  :throwOnError false\n                                                  :errorColor \"#FF5722\"}\n                                              opts)))))\n"]}