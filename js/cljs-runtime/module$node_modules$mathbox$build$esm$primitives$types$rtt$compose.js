shadow$provide.module$node_modules$mathbox$build$esm$primitives$types$rtt$compose=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.Compose=void 0;global=require("module$node_modules$mathbox$build$esm$primitives$primitive");class Compose extends global.Primitive{static initClass(){this.traits="node bind object visible operator style compose".split(" ");this.defaults={zWrite:!1,zTest:!1,color:"#ffffff"}}init(){return this.compose=null}resize(){if(this.compose&&
this.bind.source){var dims=this.bind.source.getActiveDimensions(),{width}=dims;({height:dims}=dims);return this.remapUVScale.set(width,dims)}}make(){this._helpers.bind.make([{to:"operator.source",trait:"source"}]);if(null!=this.bind.source){var resampleUniforms={remapUVScale:this._attributes.make(this._types.vec2())};this.remapUVScale=resampleUniforms.remapUVScale.value;var fragment=this._shaders.shader(),{alpha}=this.props;this.bind.source.is("image")?(fragment.pipe("screen.pass.uv",resampleUniforms),
fragment=this.bind.source.imageShader(fragment)):(fragment.pipe("screen.map.xy",resampleUniforms),fragment=this.bind.source.sourceShader(fragment));alpha||fragment.pipe("color.opaque");resampleUniforms=this._helpers.style.uniforms();this.compose=this._renderables.make("screen",{map:fragment,uniforms:resampleUniforms,linear:!0});this._helpers.visible.make();return this._helpers.object.make([this.compose])}}made(){return this.resize()}unmake(){this._helpers.bind.unmake();this._helpers.visible.unmake();
return this._helpers.object.unmake()}change(changed,_touched,_init){if(changed["operator.source"]||changed["compose.alpha"])return this.rebuild()}}exports.Compose=Compose;Compose.initClass()}
//# sourceMappingURL=module$node_modules$mathbox$build$esm$primitives$types$rtt$compose.js.map
