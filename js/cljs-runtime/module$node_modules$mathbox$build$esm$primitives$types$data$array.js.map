{
"version":3,
"file":"module$node_modules$mathbox$build$esm$primitives$types$data$array.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/mathbox/build/esm/primitives/types/data/array.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$mathbox$build$esm$primitives$types$data$array\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Array_ = void 0;\n\nvar UData = _interopRequireWildcard(require(\"../../../util/data.js\"));\n\nvar _buffer = require(\"./buffer.js\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// TODO: This file was created by bulk-decaffeinate.\n// Sanity-check the conversion and remove this comment.\n\n/*\n * decaffeinate suggestions:\n * DS102: Remove unnecessary code created because of implicit returns\n * DS206: Consider reworking classes to avoid initClass\n * DS207: Consider shorter variations of null checks\n * Full docs: https://github.com/decaffeinate/decaffeinate/blob/master/docs/suggestions.md\n */\nclass Array_ extends _buffer.Buffer {\n  static initClass() {\n    this.traits = [\"node\", \"buffer\", \"active\", \"data\", \"source\", \"index\", \"array\", \"texture\", \"raw\"];\n  }\n\n  init() {\n    this.buffer = this.spec = null;\n    this.space = {\n      width: 0,\n      history: 0\n    };\n    this.used = {\n      width: 0\n    };\n    this.storage = \"arrayBuffer\";\n\n    this.passthrough = (emit, x) => emit(x, 0, 0, 0);\n\n    return super.init();\n  }\n\n  sourceShader(shader) {\n    const dims = this.getDimensions();\n    this.alignShader(dims, shader);\n    return this.buffer.shader(shader);\n  }\n\n  getDimensions() {\n    return {\n      items: this.items,\n      width: this.space.width,\n      height: this.space.history,\n      depth: 1\n    };\n  }\n\n  getActiveDimensions() {\n    return {\n      items: this.items,\n      width: this.used.width,\n      height: this.buffer.getFilled(),\n      depth: 1\n    };\n  }\n\n  getFutureDimensions() {\n    return {\n      items: this.items,\n      width: this.used.width,\n      height: this.space.history,\n      depth: 1\n    };\n  }\n\n  getRawDimensions() {\n    return {\n      items: this.items,\n      width: this.space.width,\n      height: 1,\n      depth: 1\n    };\n  }\n\n  make() {\n    super.make(); // Read sampling parameters\n\n    const minFilter = this.minFilter != null ? this.minFilter : this.props.minFilter;\n    const magFilter = this.magFilter != null ? this.magFilter : this.props.magFilter;\n    const type = this.type != null ? this.type : this.props.type; // Read given dimensions\n\n    const {\n      width\n    } = this.props;\n    const {\n      history\n    } = this.props;\n    const reserve = this.props.bufferWidth;\n    const {\n      channels\n    } = this.props;\n    const {\n      items\n    } = this.props;\n    let dims = this.spec = {\n      channels,\n      items,\n      width\n    };\n    this.items = dims.items;\n    this.channels = dims.channels; // Init to right size if data supplied\n\n    const {\n      data\n    } = this.props;\n    dims = UData.getDimensions(data, dims);\n    const {\n      space\n    } = this;\n    space.width = Math.max(reserve, dims.width || 1);\n    space.history = history; // Create array buffer\n\n    return this.buffer = this._renderables.make(this.storage, {\n      width: space.width,\n      history: space.history,\n      channels,\n      items,\n      minFilter,\n      magFilter,\n      type\n    });\n  }\n\n  unmake() {\n    super.unmake();\n\n    if (this.buffer) {\n      this.buffer.dispose();\n      return this.buffer = this.spec = null;\n    }\n  }\n\n  change(changed, touched, init) {\n    if (touched[\"texture\"] || changed[\"history.history\"] || changed[\"buffer.channels\"] || changed[\"buffer.items\"] || changed[\"array.bufferWidth\"]) {\n      return this.rebuild();\n    }\n\n    if (!this.buffer) {\n      return;\n    }\n\n    if (changed[\"array.width\"]) {\n      const {\n        width,\n        bufferWidth\n      } = this.props;\n      this.spec.width = width;\n\n      if (width > bufferWidth) {\n        return this.rebuild();\n      }\n    }\n\n    if (changed[\"data.map\"] || changed[\"data.data\"] || changed[\"data.resolve\"] || changed[\"data.expr\"] || init) {\n      return this.buffer.setCallback(this.emitter());\n    }\n  }\n\n  callback(callback) {\n    if (callback.length <= 2) {\n      return callback;\n    } else {\n      return (emit, i) => {\n        return callback(emit, i, this.bufferClock, this.bufferStep);\n      };\n    }\n  }\n\n  update() {\n    if (!this.buffer) {\n      return;\n    }\n\n    const {\n      data\n    } = this.props;\n    let {\n      width\n    } = this.props;\n    const {\n      space,\n      used\n    } = this;\n    const l = used.width;\n    const filled = this.buffer.getFilled();\n    this.syncBuffer(abort => {\n      if (data != null) {\n        const dims = UData.getDimensions(data, this.spec); // Grow width if needed\n\n        if (dims.width > space.width) {\n          abort();\n          return this.rebuild();\n        }\n\n        used.width = dims.width;\n        this.buffer.setActive(used.width);\n\n        if (typeof this.buffer.callback.rebind === \"function\") {\n          this.buffer.callback.rebind(data);\n        }\n\n        return this.buffer.update();\n      } else {\n        width = this.spec.width || 1;\n        this.buffer.setActive(width);\n        width = this.buffer.update();\n        return used.width = width;\n      }\n    });\n\n    if (used.width !== l || filled !== this.buffer.getFilled()) {\n      return this.trigger({\n        type: \"source.resize\"\n      });\n    }\n  }\n\n}\n\nexports.Array_ = Array_;\nArray_.initClass();\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","Object","defineProperty","value","Array_","UData","_interopRequireWildcard","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_buffer","Buffer","initClass","traits","init","buffer","spec","space","width","history","used","storage","passthrough","emit","x","this.passthrough","sourceShader","shader","dims","getDimensions","alignShader","items","height","depth","getActiveDimensions","getFilled","getFutureDimensions","getRawDimensions","make","minFilter","props","magFilter","type","reserve","bufferWidth","channels","data","Math","max","_renderables","unmake","dispose","change","changed","touched","rebuild","setCallback","emitter","callback","length","i","bufferClock","bufferStep","update","l","filled","syncBuffer","abort","setActive","rebind","trigger"]
}
