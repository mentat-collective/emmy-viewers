shadow$provide.module$node_modules$mathbox$build$esm$model$node=function(global,require,module,exports){function _getRequireWildcardCache(nodeInterop$jscomp$0){if("function"!==typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop$jscomp$0)}Object.defineProperty(exports,"__esModule",{value:!0});exports.Node=void 0;var Pretty=function(obj,nodeInterop){if(!nodeInterop&&
obj&&obj.__esModule)return obj;if(null===obj||"object"!==typeof obj&&"function"!==typeof obj)return{default:obj};if((nodeInterop=_getRequireWildcardCache(nodeInterop))&&nodeInterop.has(obj))return nodeInterop.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor,key;for(key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,
key,desc):newObj[key]=obj[key]}newObj.default=obj;nodeInterop&&nodeInterop.set(obj,newObj);return newObj}(require("module$node_modules$mathbox$build$esm$util$pretty"));global=require("module$node_modules$threestrap$src$binder");let nodeIndex=0;class Node{constructor(type,defaults,options,binds,config,attributes){this.type=type;this._id=(++nodeIndex).toString();this.configure(config,attributes);this.parent=this.root=this.path=this.index=null;this.set(defaults,!0,!0);this.set(options,!1,!0);this.bind(binds,
!1)}configure(config,attributes){let {traits,props,finals,freeform}=config;null==traits&&(traits=null!=(null!=this._config?this._config.traits:void 0)?null!=this._config?this._config.traits:void 0:[]);null==props&&(props=null!=(null!=this._config?this._config.props:void 0)?null!=this._config?this._config.props:void 0:{});null==finals&&(finals=null!=(null!=this._config?this._config.finals:void 0)?null!=this._config?this._config.finals:void 0:{});null==freeform&&(freeform=null!=(null!=this._config?
this._config.freeform:void 0)?null!=this._config?this._config.freeform:void 0:!1);this._config={traits,props,finals,freeform};return this.attributes=attributes.apply(this,this._config)}dispose(){this.attributes.dispose();return this.attributes=null}_added(parent){this.parent=parent;this.root=parent.root;parent={type:"add",node:this,parent:this.parent};this.root&&this.root.trigger(parent);parent.type="added";return this.trigger(parent)}_removed(){const event={type:"remove",node:this};this.root&&this.root.trigger(event);
event.type="removed";this.trigger(event);return this.root=this.parent=null}_index(index,parent){null==parent&&({parent}=this);this.index=index;this.path=index=null!=index?(null!=(null!=parent?parent.path:void 0)?null!=parent?parent.path:void 0:[]).concat([index]):null;this.order=null!=index?this._encode(index):Infinity;if(null!=this.root)return this.trigger({type:"reindex"})}_encode(path){let a=1+1/3,b=0;for(const index of Array.from(path))[a,b]=Array.from([b+3/(index+1+3)*(a-b),b+3/(index+2+3)*(a-
b)]);return a}toString(){const tag=null!=this.type?this.type:"node";let id;id=tag+`#${null!=this.id?this.id:this._id}`;null!=this.classes&&this.classes.length&&(id+=`.${this.classes.join(".")}`);if(null!=this.children){let count;return(count=this.children.length)?`<${id}>…(${count})…</${tag}>`:`<${id}></${tag}>`}return`<${id} />`}toMarkup(selector=null,indent){let k,v;null==indent&&(indent="");if(selector&&"function"!==typeof selector){var left;selector=null!=(left=null!=this.root?this.root.model._matcher(selector):
void 0)?left:()=>!0}left=null!=this.type?this.type:"node";let {expr}=this;const orig={id:this._id};var object="function"===typeof this.orig?this.orig():void 0;for(k in object)v=object[k],orig[k]=v;object=(()=>{const result=[];for(k in orig)v=orig[k],this.expr[k]||result.push(Pretty.JSX.prop(k,v));return result})();expr=(()=>{const result1=[];for(k in expr)v=expr[k],result1.push(Pretty.JSX.bind(k,v));return result1})();var attr=[""];object.length&&(attr=attr.concat(object));expr.length&&(attr=attr.concat(expr));
attr=attr.join(" ");let child=indent;object=()=>null!=this.children&&this.children.length?this.children.map(x=>x.toMarkup(selector,child)).filter(x=>null!=x&&x.length).join("\n"):"";return selector&&!selector(this)?object():null!=this.children?(attr=`<${left}${attr}>`,left=`</${left}>`,child=indent+"  ",object=object(),object.length&&(object="\n"+object+"\n"+indent),null==object&&(object=""),indent+attr+object+left):`${indent}<${left}${attr} />`}print(selector,level){return Pretty.print(this.toMarkup(selector),
level)}}exports.Node=Node;global.Binder.apply(Node.prototype)}
//# sourceMappingURL=module$node_modules$mathbox$build$esm$model$node.js.map
