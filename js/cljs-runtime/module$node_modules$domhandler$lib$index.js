shadow$provide.module$node_modules$domhandler$lib$index=function(global,require,module,exports$jscomp$0){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable))desc={enumerable:!0,get:function(){return m[k]}};Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k);o[k2]=m[k]});global=this&&this.__exportStar||function(m,
exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports$jscomp$0,"__esModule",{value:!0});exports$jscomp$0.DomHandler=void 0;var domelementtype_1=require("module$node_modules$domelementtype$lib$index"),node_1=require("module$node_modules$domhandler$lib$node");global(require("module$node_modules$domhandler$lib$node"),exports$jscomp$0);var reWhitespace=/\s+/g,defaultOpts={normalizeWhitespace:!1,withStartIndices:!1,
withEndIndices:!1,xmlMode:!1};require=function(){function DomHandler(callback,options,elementCB){this.dom=[];this.root=new node_1.Document(this.dom);this.done=!1;this.tagStack=[this.root];this.parser=this.lastNode=null;"function"===typeof options&&(elementCB=options,options=defaultOpts);"object"===typeof callback&&(options=callback,callback=void 0);this.callback=null!==callback&&void 0!==callback?callback:null;this.options=null!==options&&void 0!==options?options:defaultOpts;this.elementCB=null!==
elementCB&&void 0!==elementCB?elementCB:null}DomHandler.prototype.onparserinit=function(parser){this.parser=parser};DomHandler.prototype.onreset=function(){this.dom=[];this.root=new node_1.Document(this.dom);this.done=!1;this.tagStack=[this.root];this.parser=this.lastNode=null};DomHandler.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))};DomHandler.prototype.onerror=function(error){this.handleCallback(error)};DomHandler.prototype.onclosetag=function(){this.lastNode=
null;var elem=this.tagStack.pop();this.options.withEndIndices&&(elem.endIndex=this.parser.endIndex);this.elementCB&&this.elementCB(elem)};DomHandler.prototype.onopentag=function(name,attribs){name=new node_1.Element(name,attribs,void 0,this.options.xmlMode?domelementtype_1.ElementType.Tag:void 0);this.addNode(name);this.tagStack.push(name)};DomHandler.prototype.ontext=function(data){var normalizeWhitespace=this.options.normalizeWhitespace,lastNode=this.lastNode;lastNode&&lastNode.type===domelementtype_1.ElementType.Text?
(lastNode.data=normalizeWhitespace?(lastNode.data+data).replace(reWhitespace," "):lastNode.data+data,this.options.withEndIndices&&(lastNode.endIndex=this.parser.endIndex)):(normalizeWhitespace&&(data=data.replace(reWhitespace," ")),data=new node_1.Text(data),this.addNode(data),this.lastNode=data)};DomHandler.prototype.oncomment=function(data){this.lastNode&&this.lastNode.type===domelementtype_1.ElementType.Comment?this.lastNode.data+=data:(data=new node_1.Comment(data),this.addNode(data),this.lastNode=
data)};DomHandler.prototype.oncommentend=function(){this.lastNode=null};DomHandler.prototype.oncdatastart=function(){var text=new node_1.Text(""),node=new node_1.NodeWithChildren(domelementtype_1.ElementType.CDATA,[text]);this.addNode(node);text.parent=node;this.lastNode=text};DomHandler.prototype.oncdataend=function(){this.lastNode=null};DomHandler.prototype.onprocessinginstruction=function(name,data){name=new node_1.ProcessingInstruction(name,data);this.addNode(name)};DomHandler.prototype.handleCallback=
function(error){if("function"===typeof this.callback)this.callback(error,this.dom);else if(error)throw error;};DomHandler.prototype.addNode=function(node){var parent=this.tagStack[this.tagStack.length-1],previousSibling=parent.children[parent.children.length-1];this.options.withStartIndices&&(node.startIndex=this.parser.startIndex);this.options.withEndIndices&&(node.endIndex=this.parser.endIndex);parent.children.push(node);previousSibling&&(node.prev=previousSibling,previousSibling.next=node);node.parent=
parent;this.lastNode=null};return DomHandler}();exports$jscomp$0.DomHandler=require;exports$jscomp$0.default=require}
//# sourceMappingURL=module$node_modules$domhandler$lib$index.js.map
