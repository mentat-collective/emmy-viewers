shadow$provide.module$node_modules$markdown_it_sidenote$index=function(global,require,module,exports){function render_footnote_anchor_name(tokens,idx,options,env){tokens=Number(tokens[idx].meta.id+1).toString();idx="";"string"===typeof env.docId&&(idx="-"+env.docId+"-");return idx+tokens}function render_sidenote_ref(tokens,idx,options,env,slf){tokens=slf.rules.footnote_anchor_name(tokens,idx,options,env,slf);return'\x3clabel for\x3d"fntoggle'+tokens+'" class\x3d"sidenote-number" role\x3d"doc-noteref" id\x3d"fnref:'+
tokens+'" aria-describedby\x3d"fn:'+tokens+'"\x3e\x3c/label\x3e\x3cinput type\x3d"checkbox" class\x3d"sidenote-trigger" id\x3d"fntoggle'+tokens+'" style\x3d"display:none;"\x3e'}function render_sidenote_open(tokens,idx,options,env,slf){tokens=slf.rules.footnote_anchor_name(tokens,idx,options,env,slf);return'\x3clabel for\x3d"fntoggle'+tokens+'" role\x3d"doc-footnote"\x3e\x3cspan class\x3d"sidenote" id\x3d"fn:'+tokens+'"\x3e'}function render_sidenote_close(tokens,idx,options,env,slf){return"\x3c/span\x3e\x3c/label\x3e"}
module.exports=function(md){var parseLinkLabel=md.helpers.parseLinkLabel,isSpace=md.utils.isSpace;md.renderer.rules.sidenote_ref=render_sidenote_ref;md.renderer.rules.sidenote_open=render_sidenote_open;md.renderer.rules.sidenote_close=render_sidenote_close;md.renderer.rules.footnote_anchor_name=render_footnote_anchor_name;md.block.ruler.before("reference","sidenote_def",function(state,startLine,endLine,silent){var pos,initial,offset;var oldBMark=state.bMarks[startLine]+state.tShift[startLine];var max=
state.eMarks[startLine];if(oldBMark+4>max||91!==state.src.charCodeAt(oldBMark)||94!==state.src.charCodeAt(oldBMark+1))return!1;for(pos=oldBMark+2;pos<max;pos++){if(32===state.src.charCodeAt(pos))return!1;if(93===state.src.charCodeAt(pos))break}if(pos===oldBMark+2||pos+1>=max||58!==state.src.charCodeAt(++pos))return!1;if(silent)return!0;pos++;state.env.footnotes||(state.env.footnotes={});state.env.footnotes.refs||(state.env.footnotes.refs={});state.env.footnotes.contents||(state.env.footnotes.contents=
{});silent=state.src.slice(oldBMark+2,pos-2);state.env.footnotes.refs[":"+silent]=-1;oldBMark=new state.Token("sidenote_def_open","",1);oldBMark.meta={label:silent};oldBMark.level=state.level++;state.tokens.push(oldBMark);oldBMark=state.bMarks[startLine];var oldTShift=state.tShift[startLine];var oldSCount=state.sCount[startLine];var oldParentType=state.parentType;var posAfterColon=pos;for(initial=offset=state.sCount[startLine]+pos-(state.bMarks[startLine]+state.tShift[startLine]);pos<max;){var ch=
state.src.charCodeAt(pos);if(isSpace(ch))9===ch?offset+=4-offset%4:offset++;else break;pos++}state.tShift[startLine]=pos-posAfterColon;state.sCount[startLine]=offset-initial;state.bMarks[startLine]=posAfterColon;state.blkIndent+=4;state.parentType="sidenote";state.sCount[startLine]<state.blkIndent&&(state.sCount[startLine]+=state.blkIndent);state.md.block.tokenize(state,startLine,endLine,!0);endLine=state.getLines(startLine,state.line,state.blkIndent,!1);state.env.footnotes.contents[":"+silent]=endLine;
state.parentType=oldParentType;state.blkIndent-=4;state.tShift[startLine]=oldTShift;state.sCount[startLine]=oldSCount;state.bMarks[startLine]=oldBMark;oldBMark=new state.Token("sidenote_def_close","",-1);oldBMark.level=--state.level;state.tokens.push(oldBMark);return!0},{alt:["paragraph","reference"]});md.core.ruler.before("inline","sidenote_def_clean",function(state){var current,insideRef=!1;state.env.footnotes&&(state.tokens=state.tokens.filter(function(tok){if("sidenote_def_open"===tok.type)return insideRef=
!0,current=[],!1;if("sidenote_def_close"===tok.type)return insideRef=!1;insideRef&&current.push(tok);return!insideRef}),state.env.footnotes.list&&(list=state.env.footnotes.list))});md.inline.ruler.after("image","sidenote_inline",function(state,silent){var tokens,max=state.posMax;var labelEnd=state.pos;if(labelEnd+2>=max||94!==state.src.charCodeAt(labelEnd)||91!==state.src.charCodeAt(labelEnd+1))return!1;var labelStart=labelEnd+2;labelEnd=parseLinkLabel(state,labelEnd+1);if(0>labelEnd)return!1;silent||
(state.env.footnotes||(state.env.footnotes={}),state.env.footnotes.list||(state.env.footnotes.list=[]),silent=state.env.footnotes.list.length,state.md.inline.parse(state.src.slice(labelStart,labelEnd),state.md,state.env,tokens=[]),labelStart=state.push("footnote_ref","",0),labelStart.meta={id:silent},state.env.footnotes.list[silent]={tokens});state.pos=labelEnd+1;state.posMax=max;return!0});md.inline.ruler.after("sidenote_inline","sidenote_ref",function(state,silent){var pos,max=state.posMax;var label=
state.pos;if(label+3>max||!state.env.footnotes||!state.env.footnotes.refs||91!==state.src.charCodeAt(label)||94!==state.src.charCodeAt(label+1))return!1;for(pos=label+2;pos<max;pos++){if(32===state.src.charCodeAt(pos)||10===state.src.charCodeAt(pos))return!1;if(93===state.src.charCodeAt(pos))break}if(pos===label+2||pos>=max)return!1;pos++;label=state.src.slice(label+2,pos-1);if("undefined"===typeof state.env.footnotes.refs[":"+label])return!1;if(!silent){state.env.footnotes.list||(state.env.footnotes.list=
[]);0>state.env.footnotes.refs[":"+label]?(silent=state.env.footnotes.list.length,state.env.footnotes.list[silent]={label,count:0},state.env.footnotes.refs[":"+label]=silent):silent=state.env.footnotes.refs[":"+label];var footnoteSubId=state.env.footnotes.list[silent].count;state.env.footnotes.list[silent].count++;var token=state.push("sidenote_ref","",0);token.meta={id:silent,subId:footnoteSubId,label,footnoteTokens:void 0};token=state.push("sidenote_open","",0);token.meta={id:silent,subId:footnoteSubId,
label,footnoteTokens:void 0};(silent=state.env.footnotes.contents[":"+label])?state.md.inline.parse(silent,state.md,state.env,state.tokens):console.log("No content for sidenote [^"+label+"]");state.push("sidenote_close","",0)}state.pos=pos;state.posMax=max;return!0})}}
//# sourceMappingURL=module$node_modules$markdown_it_sidenote$index.js.map
